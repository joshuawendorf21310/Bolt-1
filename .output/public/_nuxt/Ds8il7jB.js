import{s as ae}from"./BkCaJbz8.js";import{j as K,G as J,o as d,c,F as B,n as t,a as e,s as L,t as l,q as k,B as U,d as ee,r as q,J as te,_ as Y,H as de,m as V,v as Q,a1 as re,E as le,g as ne,y as se,C as ce,b as Z,x as G}from"./Ys5eufZ_.js";const ue={key:0,class:"failover-banner"},pe={class:"failover-alerts"},_e={class:"alert-content"},me={key:0,class:"failover-mode"},ve=["onClick"],ge={key:1,class:"status-panel"},fe={class:"panel-header"},ye={class:"status-list"},be={class:"status-details"},we={class:"status-name"},he={class:"status-message"},$e={class:"status-time"},ke=K({__name:"SystemFailoverStatus",setup(g){const M=useSupabaseClient(),C=q([]),N=q([]),h=q(!1),w=te(()=>C.value.filter(D=>D.component_status!=="operational"&&!N.value.includes(D.component_name))),x=te(()=>w.value.length>0),E=te(()=>{const D=C.value.map(y=>y.component_status);return D.includes("offline")?"offline":D.includes("degraded")?"degraded":"operational"}),S=D=>D.split("_").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" "),b=D=>new Date(D).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),m=D=>{N.value.push(D)},O=async()=>{const{data:D,error:y}=await M.from("system_failover_status").select("*");if(y){console.error("Error loading system status:",y);return}C.value=D||[]};return J(()=>{O(),ae(()=>{O()},3e4)}),(D,y)=>(d(),c(B,null,[t(x)?(d(),c("div",ue,[e("div",pe,[(d(!0),c(B,null,L(t(w),p=>(d(),c("div",{key:p.component_name,class:"failover-alert"},[y[2]||(y[2]=e("span",{class:"alert-icon"},"âš ï¸",-1)),e("div",_e,[e("strong",null,l(S(p.component_name))+" "+l(p.component_status),1),e("p",null,l(p.status_message),1),p.failover_active?(d(),c("p",me," Failover active: "+l(p.failover_mode),1)):k("",!0)]),e("button",{onClick:_=>m(p.component_name),class:"dismiss-btn"},"Ã—",8,ve)]))),128))])])):k("",!0),t(h)?(d(),c("div",ge,[e("div",fe,[y[3]||(y[3]=e("h3",null,"System Status",-1)),e("button",{onClick:y[0]||(y[0]=p=>h.value=!1),class:"close-btn"},"Ã—")]),e("div",ye,[(d(!0),c(B,null,L(t(C),p=>(d(),c("div",{key:p.component_name,class:"status-item"},[e("span",{class:U(["status-indicator",p.component_status])},null,2),e("div",be,[e("p",we,l(S(p.component_name)),1),e("p",he,l(p.status_message),1)]),e("span",$e,l(b(p.last_checked)),1)]))),128))])])):k("",!0),e("button",{onClick:y[1]||(y[1]=p=>h.value=!0),class:"status-trigger"},[e("span",{class:U(["status-dot",t(E)])},null,2),y[4]||(y[4]=ee(" System Status ",-1))])],64))}}),Ce=Y(ke,[["__scopeId","data-v-89181e50"]]),Se=()=>{const g=useSupabaseClient(),M={human_request:["human","person","transfer","supervisor","manager"],dispute_denial:["denied","denial","appeal","reconsideration","overturned","not payable","not covered"],legal_compliance:["legal","attorney","lawyer","compliance","hipaa","cms","fraud","audit"],payment_commitment:["can't guarantee","can't confirm payment","payment decision","policy exception","out of network exception"]},C=async a=>{const{data:r,error:u}=await g.from("phone_system_settings").select("*").eq("user_id",a).maybeSingle();if(u)throw u;return r||await N(a)},N=async a=>{const{data:r,error:u}=await g.from("phone_system_settings").insert({user_id:a,ringer_volume:80,in_call_volume:80,notification_volume:60,ringer_muted:!1,notifications_muted:!1,dnd_enabled:!1,ai_answer_first:!0}).select().single();if(u)throw u;return r},h=async(a,r)=>{const{data:u,error:n}=await g.from("phone_system_settings").update({...r,updated_at:new Date().toISOString()}).eq("user_id",a).select().single();if(n)throw n;return u};return{ESCALATION_KEYWORDS:M,getPhoneSettings:C,updatePhoneSettings:h,enableDND:async(a,r)=>{const u=r?new Date(Date.now()+r*6e4).toISOString():null;return await h(a,{dnd_enabled:!0,dnd_until:u})},disableDND:async a=>await h(a,{dnd_enabled:!1,dnd_until:null}),getActiveCalls:async()=>{const{data:a,error:r}=await g.from("active_calls").select("*").neq("call_state","completed").order("started_at",{ascending:!1});if(r)throw r;return a||[]},createInboundCall:async a=>{const{data:r,error:u}=await g.from("active_calls").insert({call_sid:a.callSid,direction:"inbound",caller_number:a.callerNumber,caller_identity:a.callerIdentity,call_state:"ringing"}).select().single();if(u)throw u;return r},createOutboundCall:async a=>{const{data:r,error:u}=await g.from("active_calls").insert({call_sid:a.callSid,direction:"outbound",callee_number:a.calleeNumber,call_state:"ringing",call_context:a.context||{}}).select().single();if(u)throw u;return r},answerCall:async(a,r)=>{const{data:u,error:n}=await g.from("active_calls").update({call_state:"answered",handled_by:r,answered_at:new Date().toISOString()}).eq("id",a).select().single();if(n)throw n;return u},declineCall:async a=>{const{data:r,error:u}=await g.from("active_calls").update({call_state:"completed",handled_by:"voicemail",ended_at:new Date().toISOString()}).eq("id",a).select().single();if(u)throw u;return r},escalateCall:async(a,r,u,n)=>{await g.from("active_calls").update({call_state:"escalating",escalation_triggered:!0,escalation_reason:r,escalation_keywords:u}).eq("id",a);const{data:f,error:I}=await g.from("call_escalations").insert({call_id:a,escalation_trigger:r,trigger_keywords:u,ai_summary:n}).select().single();if(I)throw I;return f},acceptEscalation:async a=>{const{data:r,error:u}=await g.from("call_escalations").update({escalation_accepted:!0,founder_joined_at:new Date().toISOString()}).eq("id",a).select().single();if(u)throw u;return r},endCall:async(a,r)=>{const{data:u,error:n}=await g.from("active_calls").update({call_state:"completed",ended_at:new Date().toISOString(),duration_seconds:r}).eq("id",a).select().single();if(n)throw n;return u},createVoicemail:async a=>{const{data:r,error:u}=await g.from("voicemail_records").insert({call_id:a.callId,caller_number:a.callerNumber,caller_identity:a.callerIdentity,audio_url:a.audioUrl,transcript:a.transcript,duration_seconds:a.durationSeconds,voicemail_status:"new"}).select().single();if(u)throw u;return r},getVoicemails:async a=>{let r=g.from("voicemail_records").select("*").order("created_at",{ascending:!1});a&&(r=r.eq("voicemail_status",a));const{data:u,error:n}=await r;if(n)throw n;return u||[]},updateVoicemailStatus:async(a,r)=>{const u={voicemail_status:r};r==="reviewed"?u.reviewed_at=new Date().toISOString():r==="resolved"&&(u.resolved_at=new Date().toISOString());const{error:n}=await g.from("voicemail_records").update(u).eq("id",a);if(n)throw n},checkForEscalationKeywords:a=>{const r=a.toLowerCase();for(const[u,n]of Object.entries(M)){const f=n.filter(I=>r.includes(I.toLowerCase()));if(f.length>0)return{triggered:!0,keywords:f,trigger:u}}return{triggered:!1,keywords:[],trigger:""}}}},Ie={class:"phone-system"},qe={class:"incoming-call-card"},xe={class:"call-info"},Te={class:"caller"},Ne={key:0,class:"ai-option"},De={key:1,class:"active-call-panel"},Ee={class:"call-header"},Ae={class:"call-duration"},Oe={class:"call-identity"},Ve={class:"call-direction"},Me={class:"call-controls"},Fe={key:0,class:"escalation-alert"},Re={class:"reason"},Ue={key:1,class:"live-transcript"},Pe={class:"phone-controls"},ze={class:"phone-status"},Be={key:2,class:"phone-settings-panel"},Le={class:"settings-header"},Qe={class:"settings-content"},je={class:"setting-group"},We={class:"setting-group"},He={class:"setting-group"},Ge={class:"setting-group"},Ke={class:"setting-group"},Je={class:"setting-group"},Ye={key:0,class:"dnd-info"},Xe={key:3,class:"dnd-indicator"},Ze=K({__name:"PhoneSystem",setup(g){const{getPhoneSettings:M,updatePhoneSettings:C,enableDND:N,disableDND:h,answerCall:w,declineCall:x,endCall:E}=Se(),S=q(null),b=q(null),m=q(!1),O=q(!1),D=q(!1),y=q("operational"),p=q(0),_=q(10),o=q({ringer_volume:80,in_call_volume:80,notification_volume:60,ringer_muted:!1,notifications_muted:!1,dnd_enabled:!1,dnd_until:null,ai_answer_first:!0}),s=H=>{const A=Math.floor(H/60),W=H%60;return`${A}:${W.toString().padStart(2,"0")}`},i=te(()=>o.value.dnd_until?new Date(o.value.dnd_until).toLocaleTimeString():"manually disabled"),a=async()=>{const A=await M("founder");A&&(o.value=A)},r=async()=>{await C("founder",o.value)},u=async()=>{const H="founder";if(o.value.dnd_enabled)await h(H),o.value.dnd_enabled=!1,o.value.dnd_until=null;else{await N(H,30);const A=await M(H);o.value=A}},n=()=>{o.value.ringer_muted||o.value.dnd_enabled||(m.value=!0)},f=()=>{m.value=!1},I=async()=>{S.value&&(f(),await w(S.value.id,"founder"),b.value=S.value,b.value.call_state="active",S.value=null,j())},F=async()=>{S.value&&(f(),await x(S.value.id),S.value=null)},z=async()=>{b.value&&(await E(b.value.id,p.value),v(),b.value=null)},P=async()=>{b.value&&(b.value.handled_by="founder",b.value.escalation_triggered=!1)},R=()=>{O.value=!O.value};let $=null;const j=()=>{p.value=0,$=ae(()=>{p.value++},1e3)},v=()=>{$&&(clearInterval($),$=null),p.value=0},T=()=>{if(S.value||b.value)return;const H={id:`call-${Date.now()}`,call_sid:`sid-${Date.now()}`,direction:"inbound",caller_number:"+1-555-0123",caller_identity:"Blue Cross Insurance",call_state:"ringing"};if(S.value=H,n(),o.value.ai_answer_first){_.value=10;const A=ae(()=>{_.value--,_.value<=0&&(clearInterval(A),S.value&&oe())},1e3)}},oe=async()=>{S.value&&(f(),await w(S.value.id,"ai"),b.value=S.value,b.value.call_state="active",b.value.handled_by="ai",S.value=null,j(),setTimeout(()=>{b.value&&b.value.handled_by==="ai"&&X()},15e3))},X=()=>{b.value&&(b.value.escalation_triggered=!0,b.value.escalation_reason="Caller requested human supervisor",b.value.call_state="escalating",n())};return J(async()=>{await a(),setTimeout(()=>{T()},5e3)}),de(()=>{v(),f()}),(H,A)=>(d(),c("div",Ie,[t(S)?(d(),c("div",{key:0,class:U(["incoming-call-overlay",{ringing:t(m)}])},[e("div",qe,[A[9]||(A[9]=e("div",{class:"call-icon"},"ðŸ“ž",-1)),e("div",xe,[A[7]||(A[7]=e("h3",null,"Incoming Call",-1)),e("p",Te,l(t(S).caller_identity||t(S).caller_number),1),A[8]||(A[8]=e("p",{class:"call-type"},"Billing Related",-1))]),e("div",{class:"call-actions"},[e("button",{onClick:I,class:"answer-btn"},"Answer"),e("button",{onClick:F,class:"decline-btn"},"Decline")]),t(o).ai_answer_first?(d(),c("div",Ne,[e("p",null,"AI Assistant will answer in "+l(t(_))+"s...",1)])):k("",!0)])],2)):k("",!0),t(b)?(d(),c("div",De,[e("div",Ee,[e("span",{class:U(["status-indicator",t(b).call_state])},null,2),e("span",Ae,l(s(t(p))),1)]),e("div",Oe,[e("h4",null,l(t(b).caller_identity||t(b).caller_number||t(b).callee_number),1),e("p",Ve,l(t(b).direction==="inbound"?"Inbound":"Outbound"),1)]),e("div",Me,[e("button",{onClick:R,class:U(["control-btn",{active:t(O)}])},l(t(O)?"ðŸ”‡":"ðŸŽ¤"),3),e("button",{onClick:z,class:"end-call-btn"},"End Call")]),t(b).escalation_triggered?(d(),c("div",Fe,[A[10]||(A[10]=e("p",null,"âš ï¸ Escalation Triggered",-1)),e("p",Re,l(t(b).escalation_reason),1),e("button",{onClick:P,class:"takeover-btn"},"Take Over Call")])):k("",!0),t(b).live_transcript?(d(),c("div",Ue,[A[11]||(A[11]=e("h5",null,"Live Transcript",-1)),e("p",null,l(t(b).live_transcript),1)])):k("",!0)])):k("",!0),e("div",Pe,[e("div",ze,[e("span",{class:U(["status-dot",t(y)])},null,2),e("span",null,"Phone "+l(t(y)),1)]),e("button",{onClick:A[0]||(A[0]=W=>D.value=!t(D)),class:"settings-btn"},"âš™ï¸")]),t(D)?(d(),c("div",Be,[e("div",Le,[A[12]||(A[12]=e("h3",null,"Phone Settings",-1)),e("button",{onClick:A[1]||(A[1]=W=>D.value=!1),class:"close-btn"},"Ã—")]),e("div",Qe,[e("div",je,[A[13]||(A[13]=e("label",null,"Ringer Volume",-1)),V(e("input",{type:"range","onUpdate:modelValue":A[2]||(A[2]=W=>t(o).ringer_volume=W),min:"0",max:"100",onChange:r},null,544),[[Q,t(o).ringer_volume]]),e("span",null,l(t(o).ringer_volume)+"%",1)]),e("div",We,[A[14]||(A[14]=e("label",null,"In-Call Volume",-1)),V(e("input",{type:"range","onUpdate:modelValue":A[3]||(A[3]=W=>t(o).in_call_volume=W),min:"0",max:"100",onChange:r},null,544),[[Q,t(o).in_call_volume]]),e("span",null,l(t(o).in_call_volume)+"%",1)]),e("div",He,[A[15]||(A[15]=e("label",null,"Notification Volume",-1)),V(e("input",{type:"range","onUpdate:modelValue":A[4]||(A[4]=W=>t(o).notification_volume=W),min:"0",max:"100",onChange:r},null,544),[[Q,t(o).notification_volume]]),e("span",null,l(t(o).notification_volume)+"%",1)]),e("div",Ge,[e("label",null,[V(e("input",{type:"checkbox","onUpdate:modelValue":A[5]||(A[5]=W=>t(o).ringer_muted=W),onChange:r},null,544),[[re,t(o).ringer_muted]]),A[16]||(A[16]=ee(" Mute Ringer ",-1))])]),e("div",Ke,[e("label",null,[V(e("input",{type:"checkbox","onUpdate:modelValue":A[6]||(A[6]=W=>t(o).ai_answer_first=W),onChange:r},null,544),[[re,t(o).ai_answer_first]]),A[17]||(A[17]=ee(" AI Answers First ",-1))])]),e("div",Je,[A[18]||(A[18]=e("label",null,"Do Not Disturb",-1)),e("button",{onClick:u,class:U(["dnd-btn",{active:t(o).dnd_enabled}])},l(t(o).dnd_enabled?"Disable DND":"Enable DND"),3),t(o).dnd_enabled?(d(),c("div",Ye,[e("p",null,"Active until "+l(t(i)),1)])):k("",!0)])])])):k("",!0),t(o).dnd_enabled?(d(),c("div",Xe," ðŸŒ™ Do Not Disturb ")):k("",!0)]))}}),et=Y(Ze,[["__scopeId","data-v-23bd3f04"]]),ie=()=>{const g=useSupabaseClient(),M=async n=>{let f=g.from("billing_emails").select("*").order("created_at",{ascending:!1});n?.status&&(f=f.eq("status",n.status)),n?.linkedAgencyId&&(f=f.eq("linked_agency_id",n.linkedAgencyId)),n?.linkedClaimId&&(f=f.eq("linked_claim_id",n.linkedClaimId));const{data:I,error:F}=await f;if(F)throw F;return I||[]},C=async n=>{const f=`thread-${Date.now()}`,I=`msg-${Date.now()}-${Math.random().toString(36).substring(7)}`,{data:F,error:z}=await g.from("billing_emails").insert({thread_id:f,message_id:I,subject:n.subject,from_address:"billing@malibuems.com",to_addresses:n.toAddresses,cc_addresses:n.ccAddresses||[],body_text:n.bodyText,body_html:n.bodyHtml||n.bodyText,direction:"outbound",status:"sent",linked_agency_id:n.linkedAgencyId,linked_claim_id:n.linkedClaimId,linked_encounter_id:n.linkedEncounterId,sent_at:new Date().toISOString()}).select().single();if(z)throw z;return await r({activityType:"email_sent",entityType:"email",entityId:F.id,description:`Sent email: ${n.subject}`,metadata:{to:n.toAddresses}}),F},N=async n=>{const{error:f}=await g.from("billing_emails").update({status:"archived"}).eq("id",n);if(f)throw f},h=async(n,f)=>{const{error:I}=await g.from("billing_emails").update({internal_notes:f}).eq("id",n);if(I)throw I},w=async n=>{let f=g.from("ai_phone_calls").select("*").order("created_at",{ascending:!1});n?.status&&(f=f.eq("call_status",n.status)),n?.escalationRequired!==void 0&&(f=f.eq("escalation_required",n.escalationRequired));const{data:I,error:F}=await f;if(F)throw F;return I||[]},x=async n=>{const{data:f,error:I}=await g.from("ai_phone_calls").insert({phone_number:n.phoneNumber,direction:"outbound",call_purpose:n.purpose,organization_name:n.organizationName,call_status:"initiated",linked_agency_id:n.linkedAgencyId,linked_claim_id:n.linkedClaimId,linked_encounter_id:n.linkedEncounterId,started_at:new Date().toISOString()}).select().single();if(I)throw I;return await r({activityType:"call_made",entityType:"phone_call",entityId:f.id,description:`Initiated AI call to ${n.organizationName}`,metadata:{purpose:n.purpose}}),f},E=async(n,f,I)=>{const F={call_status:f};f==="completed"&&(F.completed_at=new Date().toISOString()),I&&Object.assign(F,I);const{error:z}=await g.from("ai_phone_calls").update(F).eq("id",n);if(z)throw z},S=async n=>{const{error:f}=await g.from("ai_phone_calls").update({founder_reviewed:!0}).eq("id",n);if(f)throw f},b=async n=>{let f=g.from("billing_faxes").select("*").order("created_at",{ascending:!1});n?.direction&&(f=f.eq("direction",n.direction)),n?.status&&(f=f.eq("status",n.status));const{data:I,error:F}=await f;if(F)throw F;return I||[]},m=async n=>{const{data:f,error:I}=await g.from("billing_faxes").insert({fax_number:n.faxNumber,direction:"outbound",status:"sending",pdf_url:n.pdfUrl,purpose:n.purpose,linked_agency_id:n.linkedAgencyId,linked_claim_id:n.linkedClaimId,linked_encounter_id:n.linkedEncounterId}).select().single();if(I)throw I;return await r({activityType:"fax_sent",entityType:"fax",entityId:f.id,description:`Sent fax to ${n.faxNumber}`,metadata:{purpose:n.purpose}}),f},O=async n=>{let f=g.from("workspace_documents").select("*").order("updated_at",{ascending:!1});n?.documentType&&(f=f.eq("document_type",n.documentType)),n?.organizationType&&(f=f.eq("organization_type",n.organizationType)),n?.isFinalized!==void 0&&(f=f.eq("is_finalized",n.isFinalized));const{data:I,error:F}=await f;if(F)throw F;return I||[]},D=async n=>{const{data:f,error:I}=await g.from("workspace_documents").insert({document_name:n.documentName,document_type:n.documentType,mime_type:n.mimeType,storage_path:n.storagePath,organization_type:n.organizationType,linked_agency_id:n.linkedAgencyId,linked_claim_id:n.linkedClaimId,linked_encounter_id:n.linkedEncounterId,billing_period:n.billingPeriod,tags:n.tags||[]}).select().single();if(I)throw I;return await _(f.id,1,n.storagePath,"Initial version"),await r({activityType:"document_created",entityType:"document",entityId:f.id,description:`Created document: ${n.documentName}`,metadata:{type:n.documentType}}),f},y=async(n,f,I)=>{const{data:F}=await g.from("workspace_documents").select("current_version").eq("id",n).maybeSingle();if(!F)throw new Error("Document not found");const z=F.current_version+1;await g.from("workspace_documents").update({storage_path:f,current_version:z,updated_at:new Date().toISOString()}).eq("id",n),await _(n,z,f,I||"Updated"),await r({activityType:"document_edited",entityType:"document",entityId:n,description:`Updated document to version ${z}`,metadata:{version:z}})},p=async n=>{const{error:f}=await g.from("workspace_documents").update({is_finalized:!0,finalized_at:new Date().toISOString()}).eq("id",n);if(f)throw f;await r({activityType:"document_finalized",entityType:"document",entityId:n,description:"Document finalized (immutable)",metadata:{}})},_=async(n,f,I,F)=>{const{error:z}=await g.from("document_versions").insert({document_id:n,version_number:f,storage_path:I,change_summary:F});if(z)throw z},o=async n=>{const{data:f,error:I}=await g.from("document_versions").select("*").eq("document_id",n).order("version_number",{ascending:!1});if(I)throw I;return f||[]},s=async n=>{const{data:f,error:I}=await g.from("pdf_annotations").insert({document_id:n.documentId,page_number:n.pageNumber,annotation_type:n.annotationType,annotation_data:n.annotationData,annotation_text:n.annotationText}).select().single();if(I)throw I;return await r({activityType:"pdf_annotated",entityType:"document",entityId:n.documentId,description:`Added ${n.annotationType} annotation to page ${n.pageNumber}`,metadata:{page:n.pageNumber,type:n.annotationType}}),f},i=async n=>{const{data:f,error:I}=await g.from("pdf_annotations").select("*").eq("document_id",n).order("page_number");if(I)throw I;return f||[]},a=async(n=50)=>{const{data:f,error:I}=await g.from("workspace_activity_log").select("*").order("created_at",{ascending:!1}).limit(n);if(I)throw I;return f||[]},r=async n=>{await g.from("workspace_activity_log").insert({activity_type:n.activityType,entity_type:n.entityType,entity_id:n.entityId,activity_description:n.description,metadata:n.metadata})};return{getEmailThreads:M,sendEmail:C,archiveEmail:N,updateEmailNotes:h,getAICalls:w,initiateAICall:x,updateCallStatus:E,markCallReviewed:S,getFaxes:b,sendFax:m,getDocuments:O,createDocument:D,updateDocument:y,finalizeDocument:p,getDocumentVersions:o,addPDFAnnotation:s,getPDFAnnotations:i,getActivityLog:a,getWorkspaceDashboard:async()=>{const{data:n}=await g.from("billing_emails").select("id, status"),{data:f}=await g.from("ai_phone_calls").select("id, call_status, escalation_required"),{data:I}=await g.from("billing_faxes").select("id, status"),{data:F}=await g.from("workspace_documents").select("id, is_finalized"),z=n?.filter(v=>v.status==="received").length||0,P=f?.filter(v=>v.call_status==="requires_review").length||0,R=f?.filter(v=>v.escalation_required&&!v.founder_reviewed).length||0,$=I?.filter(v=>v.status==="sending").length||0,j=F?.filter(v=>!v.is_finalized).length||0;return{totalEmails:n?.length||0,unreadEmails:z,totalCalls:f?.length||0,pendingCalls:P,escalatedCalls:R,totalFaxes:I?.length||0,pendingFaxes:$,totalDocuments:F?.length||0,draftDocuments:j}}}},tt={class:"email-center"},st={class:"email-header"},nt={class:"email-filters"},ot=["onClick"],at={key:0,class:"loading"},it={key:1,class:"empty-state"},lt={key:2,class:"email-list"},rt=["onClick"],dt={class:"email-meta"},ct={class:"email-from"},ut={class:"email-date"},pt={class:"email-subject"},_t={key:0,class:"email-tags"},mt={key:3,class:"email-viewer"},vt={class:"viewer-header"},gt={class:"email-details"},ft={class:"detail-row"},yt={class:"detail-row"},bt={key:0,class:"detail-row"},wt={class:"detail-row"},ht=["innerHTML"],$t={class:"email-notes"},kt={class:"email-actions"},Ct={key:4,class:"compose-modal"},St={class:"modal-content"},It={class:"compose-form"},qt={class:"form-field"},xt={class:"form-field"},Tt={class:"form-field"},Nt={class:"form-field"},Dt=K({__name:"BillingEmailCenter",setup(g){const{getEmailThreads:M,sendEmail:C,archiveEmail:N,updateEmailNotes:h}=ie(),w=q([]),x=q(null),E=q(!1),S=q(""),b=q(!0),m=q({to:"",cc:"",subject:"",body:""}),O=r=>new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric"}),D=r=>new Date(r).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}),y=async()=>{b.value=!0;const r={};S.value&&(r.status=S.value),w.value=await M(r),b.value=!1},p=r=>{x.value=r},_=async(r,u)=>{await h(r,u)},o=async r=>{await N(r),x.value=null,await y()},s=r=>{m.value={to:r.from_address,cc:"",subject:`Re: ${r.subject}`,body:""},E.value=!0},i=async()=>{const r=m.value.to.split(",").map(n=>n.trim()),u=m.value.cc?m.value.cc.split(",").map(n=>n.trim()):[];await C({subject:m.value.subject,toAddresses:r,ccAddresses:u,bodyText:m.value.body}),a(),await y()},a=()=>{E.value=!1,m.value={to:"",cc:"",subject:"",body:""}};return le(S,()=>{y()}),J(()=>{y()}),(r,u)=>(d(),c("div",tt,[e("div",st,[u[10]||(u[10]=e("h3",null,"Billing Email (Malibu)",-1)),e("button",{onClick:u[0]||(u[0]=n=>E.value=!0),class:"compose-btn"},"Compose Email")]),e("div",nt,[(d(),c(B,null,L(["all","sent","received","archived"],n=>e("button",{key:n,onClick:f=>S.value=n==="all"?"":n,class:U(["filter-btn",{active:t(S)===(n==="all"?"":n)}])},l(n.charAt(0).toUpperCase()+n.slice(1)),11,ot)),64))]),t(b)?(d(),c("div",at,"Loading emails...")):t(w).length===0?(d(),c("div",it," No emails found ")):(d(),c("div",lt,[(d(!0),c(B,null,L(t(w),n=>(d(),c("div",{key:n.id,class:U(["email-item",{selected:t(x)?.id===n.id}]),onClick:f=>p(n)},[e("div",dt,[e("span",{class:U(["email-direction",n.direction])},l(n.direction==="inbound"?"â†":"â†’"),3),e("span",ct,l(n.from_address),1),e("span",ut,l(O(n.created_at)),1)]),e("div",pt,l(n.subject||"(No Subject)"),1),n.tags&&n.tags.length>0?(d(),c("div",_t,[(d(!0),c(B,null,L(n.tags,f=>(d(),c("span",{key:f,class:"tag"},l(f),1))),128))])):k("",!0)],10,rt))),128))])),t(x)?(d(),c("div",mt,[e("div",vt,[e("h4",null,l(t(x).subject||"(No Subject)"),1),e("button",{onClick:u[1]||(u[1]=n=>x.value=null),class:"close-btn"},"Ã—")]),e("div",gt,[e("div",ft,[u[11]||(u[11]=e("span",{class:"label"},"From:",-1)),e("span",null,l(t(x).from_address),1)]),e("div",yt,[u[12]||(u[12]=e("span",{class:"label"},"To:",-1)),e("span",null,l(t(x).to_addresses.join(", ")),1)]),t(x).cc_addresses.length>0?(d(),c("div",bt,[u[13]||(u[13]=e("span",{class:"label"},"CC:",-1)),e("span",null,l(t(x).cc_addresses.join(", ")),1)])):k("",!0),e("div",wt,[u[14]||(u[14]=e("span",{class:"label"},"Date:",-1)),e("span",null,l(D(t(x).created_at)),1)])]),e("div",{class:"email-body",innerHTML:t(x).body_html||t(x).body_text},null,8,ht),e("div",$t,[u[15]||(u[15]=e("h5",null,"Internal Notes",-1)),V(e("textarea",{"onUpdate:modelValue":u[2]||(u[2]=n=>t(x).internal_notes=n),onBlur:u[3]||(u[3]=n=>_(t(x).id,t(x).internal_notes)),placeholder:"Add internal notes..."},null,544),[[Q,t(x).internal_notes]])]),e("div",kt,[e("button",{onClick:u[4]||(u[4]=n=>o(t(x).id)),class:"action-btn"},"Archive"),e("button",{onClick:u[5]||(u[5]=n=>s(t(x))),class:"action-btn primary"},"Reply")])])):k("",!0),t(E)?(d(),c("div",Ct,[e("div",St,[e("div",{class:"modal-header"},[u[16]||(u[16]=e("h4",null,"Compose Email",-1)),e("button",{onClick:a,class:"close-btn"},"Ã—")]),e("div",It,[e("div",qt,[u[17]||(u[17]=e("label",null,"To:",-1)),V(e("input",{"onUpdate:modelValue":u[6]||(u[6]=n=>t(m).to=n),type:"email",placeholder:"recipient@example.com"},null,512),[[Q,t(m).to]])]),e("div",xt,[u[18]||(u[18]=e("label",null,"CC:",-1)),V(e("input",{"onUpdate:modelValue":u[7]||(u[7]=n=>t(m).cc=n),type:"email",placeholder:"cc@example.com (optional)"},null,512),[[Q,t(m).cc]])]),e("div",Tt,[u[19]||(u[19]=e("label",null,"Subject:",-1)),V(e("input",{"onUpdate:modelValue":u[8]||(u[8]=n=>t(m).subject=n),type:"text",placeholder:"Email subject"},null,512),[[Q,t(m).subject]])]),e("div",Nt,[u[20]||(u[20]=e("label",null,"Message:",-1)),V(e("textarea",{"onUpdate:modelValue":u[9]||(u[9]=n=>t(m).body=n),rows:"10",placeholder:"Email body..."},null,512),[[Q,t(m).body]])]),e("div",{class:"form-actions"},[e("button",{onClick:a,class:"cancel-btn"},"Cancel"),e("button",{onClick:i,class:"send-btn"},"Send Email")])])])])):k("",!0)]))}}),Et=Y(Dt,[["__scopeId","data-v-d7bc254f"]]),At={class:"phone-assistant"},Ot={class:"assistant-header"},Vt={class:"call-filters"},Mt=["onClick"],Ft={key:0,class:"loading"},Rt={key:1,class:"empty-state"},Ut={key:2,class:"call-list"},Pt=["onClick"],zt={class:"call-header"},Bt={class:"call-org"},Lt={class:"call-details"},Qt={class:"call-purpose"},jt={class:"call-phone"},Wt={class:"call-date"},Ht={key:0,class:"escalation-badge"},Gt={key:3,class:"call-viewer"},Kt={class:"viewer-header"},Jt={class:"call-info"},Yt={class:"info-row"},Xt={class:"info-row"},Zt={class:"info-row"},es={class:"info-row"},ts={key:0,class:"call-summary"},ss={key:1,class:"call-outcome"},ns={key:2,class:"call-transcript"},os={key:3,class:"escalation-section"},as={class:"call-actions"},is={key:1,class:"action-btn"},ls={key:4,class:"initiate-modal"},rs={class:"modal-content"},ds={class:"initiate-form"},cs={class:"form-field"},us={class:"form-field"},ps={class:"form-field"},_s=K({__name:"AIPhoneAssistant",setup(g){const{getAICalls:M,initiateAICall:C,markCallReviewed:N}=ie(),h=q([]),w=q(null),x=q(!1),E=q("all"),S=q(!0),b=q({organizationName:"",phoneNumber:"",purpose:"eligibility"}),m=s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),O=s=>new Date(s).toLocaleString("en-US"),D=async()=>{S.value=!0;const s={};E.value==="requires_review"?s.status="requires_review":E.value==="escalated"&&(s.escalationRequired=!0),h.value=await M(s),S.value=!1},y=s=>{w.value=s},p=async s=>{await N(s),w.value=null,await D()},_=async()=>{await C({phoneNumber:b.value.phoneNumber,purpose:b.value.purpose,organizationName:b.value.organizationName}),o(),await D()},o=()=>{x.value=!1,b.value={organizationName:"",phoneNumber:"",purpose:"eligibility"}};return le(E,()=>{D()}),J(()=>{D()}),(s,i)=>(d(),c("div",At,[e("div",Ot,[i[6]||(i[6]=e("h3",null,"AI Phone Assistant",-1)),e("button",{onClick:i[0]||(i[0]=a=>x.value=!0),class:"initiate-btn"},"New Call")]),e("div",Vt,[(d(),c(B,null,L(["all","requires_review","escalated"],a=>e("button",{key:a,onClick:r=>E.value=a,class:U(["filter-btn",{active:t(E)===a}])},l(a==="all"?"All Calls":a==="requires_review"?"Needs Review":"Escalated"),11,Mt)),64))]),t(S)?(d(),c("div",Ft,"Loading calls...")):t(h).length===0?(d(),c("div",Rt," No calls found ")):(d(),c("div",Ut,[(d(!0),c(B,null,L(t(h),a=>(d(),c("div",{key:a.id,class:U(["call-item",{escalated:a.escalation_required}]),onClick:r=>y(a)},[e("div",zt,[e("span",Bt,l(a.organization_name),1),e("span",{class:U(["call-status",a.call_status])},l(a.call_status),3)]),e("div",Lt,[e("span",Qt,l(a.call_purpose),1),e("span",jt,l(a.phone_number),1),e("span",Wt,l(m(a.created_at)),1)]),a.escalation_required?(d(),c("div",Ht," âš  Escalation Required ")):k("",!0)],10,Pt))),128))])),t(w)?(d(),c("div",Gt,[e("div",Kt,[e("h4",null,l(t(w).organization_name),1),e("button",{onClick:i[1]||(i[1]=a=>w.value=null),class:"close-btn"},"Ã—")]),e("div",Jt,[e("div",Yt,[i[7]||(i[7]=e("span",{class:"label"},"Purpose:",-1)),e("span",null,l(t(w).call_purpose),1)]),e("div",Xt,[i[8]||(i[8]=e("span",{class:"label"},"Status:",-1)),e("span",null,l(t(w).call_status),1)]),e("div",Zt,[i[9]||(i[9]=e("span",{class:"label"},"Duration:",-1)),e("span",null,l(t(w).duration_seconds)+"s",1)]),e("div",es,[i[10]||(i[10]=e("span",{class:"label"},"Started:",-1)),e("span",null,l(O(t(w).started_at)),1)])]),t(w).summary?(d(),c("div",ts,[i[11]||(i[11]=e("h5",null,"Summary",-1)),e("p",null,l(t(w).summary),1)])):k("",!0),t(w).outcome?(d(),c("div",ss,[i[12]||(i[12]=e("h5",null,"Outcome",-1)),e("p",null,l(t(w).outcome),1)])):k("",!0),t(w).transcript?(d(),c("div",ns,[i[13]||(i[13]=e("h5",null,"Transcript",-1)),e("pre",null,l(t(w).transcript),1)])):k("",!0),t(w).escalation_required?(d(),c("div",os,[i[14]||(i[14]=e("h5",null,"Escalation Required",-1)),e("p",null,l(t(w).escalation_reason),1)])):k("",!0),e("div",as,[t(w).founder_reviewed?k("",!0):(d(),c("button",{key:0,onClick:i[2]||(i[2]=a=>p(t(w).id)),class:"action-btn primary"}," Mark as Reviewed ")),t(w).recording_url?(d(),c("button",is,"Listen to Recording")):k("",!0)])])):k("",!0),t(x)?(d(),c("div",ls,[e("div",rs,[e("div",{class:"modal-header"},[i[15]||(i[15]=e("h4",null,"Initiate AI Call",-1)),e("button",{onClick:o,class:"close-btn"},"Ã—")]),e("div",ds,[e("div",cs,[i[16]||(i[16]=e("label",null,"Organization Name:",-1)),V(e("input",{"onUpdate:modelValue":i[3]||(i[3]=a=>t(b).organizationName=a),type:"text",placeholder:"Insurance Company Name"},null,512),[[Q,t(b).organizationName]])]),e("div",us,[i[17]||(i[17]=e("label",null,"Phone Number:",-1)),V(e("input",{"onUpdate:modelValue":i[4]||(i[4]=a=>t(b).phoneNumber=a),type:"tel",placeholder:"(555) 123-4567"},null,512),[[Q,t(b).phoneNumber]])]),e("div",ps,[i[19]||(i[19]=e("label",null,"Purpose:",-1)),V(e("select",{"onUpdate:modelValue":i[5]||(i[5]=a=>t(b).purpose=a)},[...i[18]||(i[18]=[ne('<option value="eligibility" data-v-ede29ec5>Eligibility Verification</option><option value="claim_status" data-v-ede29ec5>Claim Status</option><option value="follow_up" data-v-ede29ec5>Follow Up</option><option value="escalation" data-v-ede29ec5>Escalation</option><option value="other" data-v-ede29ec5>Other</option>',5)])],512),[[se,t(b).purpose]])]),e("div",{class:"form-actions"},[e("button",{onClick:o,class:"cancel-btn"},"Cancel"),e("button",{onClick:_,class:"initiate-btn-submit"},"Initiate Call")])])])])):k("",!0)]))}}),ms=Y(_s,[["__scopeId","data-v-ede29ec5"]]),vs={class:"fax-center"},gs={class:"fax-header"},fs={key:0,class:"loading"},ys={key:1,class:"empty-state"},bs={key:2,class:"fax-list"},ws=["onClick"],hs={class:"fax-header-item"},$s={class:"fax-number"},ks={class:"fax-details"},Cs={class:"fax-purpose"},Ss={class:"fax-pages"},Is={class:"fax-date"},qs={key:3,class:"fax-viewer"},xs={class:"viewer-content"},Ts={class:"viewer-header"},Ns={class:"fax-info"},Ds={class:"info-row"},Es={class:"info-row"},As={class:"info-row"},Os={class:"info-row"},Vs={class:"info-row"},Ms={class:"info-row"},Fs={key:0,class:"fax-ocr"},Rs={class:"fax-actions"},Us={key:0,class:"action-btn"},Ps={key:1,class:"action-btn"},zs={key:4,class:"send-modal"},Bs={class:"modal-content"},Ls={class:"send-form"},Qs={class:"form-field"},js={class:"form-field"},Ws={class:"form-field"},Hs=K({__name:"BillingFaxCenter",setup(g){const{getFaxes:M,sendFax:C}=ie(),N=q([]),h=q(null),w=q(!1),x=q(!0),E=q({faxNumber:"",purpose:"claim_submission",pdfFile:null}),S=_=>new Date(_).toLocaleDateString("en-US",{month:"short",day:"numeric"}),b=_=>new Date(_).toLocaleString("en-US"),m=async()=>{x.value=!0,N.value=await M(),x.value=!1},O=_=>{h.value=_},D=_=>{const o=_.target;o.files&&o.files.length>0&&(E.value.pdfFile=o.files[0])},y=async()=>{if(!E.value.pdfFile){alert("Please select a PDF file");return}await C({faxNumber:E.value.faxNumber,pdfUrl:"uploaded-pdf-url",purpose:E.value.purpose}),p(),await m()},p=()=>{w.value=!1,E.value={faxNumber:"",purpose:"claim_submission",pdfFile:null}};return J(()=>{m()}),(_,o)=>(d(),c("div",vs,[e("div",gs,[o[4]||(o[4]=e("h3",null,"Billing Fax",-1)),e("button",{onClick:o[0]||(o[0]=s=>w.value=!0),class:"send-btn"},"Send Fax")]),t(x)?(d(),c("div",fs,"Loading faxes...")):t(N).length===0?(d(),c("div",ys," No faxes found ")):(d(),c("div",bs,[(d(!0),c(B,null,L(t(N),s=>(d(),c("div",{key:s.id,class:"fax-item",onClick:i=>O(s)},[e("div",hs,[e("span",{class:U(["fax-direction",s.direction])},l(s.direction==="inbound"?"ðŸ“¥":"ðŸ“¤"),3),e("span",$s,l(s.fax_number),1),e("span",{class:U(["fax-status",s.status])},l(s.status),3)]),e("div",ks,[e("span",Cs,l(s.purpose||"General"),1),e("span",Ss,l(s.page_count)+" "+l(s.page_count===1?"page":"pages"),1),e("span",Is,l(S(s.created_at)),1)])],8,ws))),128))])),t(h)?(d(),c("div",qs,[e("div",xs,[e("div",Ts,[o[5]||(o[5]=e("h4",null,"Fax Details",-1)),e("button",{onClick:o[1]||(o[1]=s=>h.value=null),class:"close-btn"},"Ã—")]),e("div",Ns,[e("div",Ds,[o[6]||(o[6]=e("span",{class:"label"},"Number:",-1)),e("span",null,l(t(h).fax_number),1)]),e("div",Es,[o[7]||(o[7]=e("span",{class:"label"},"Direction:",-1)),e("span",null,l(t(h).direction),1)]),e("div",As,[o[8]||(o[8]=e("span",{class:"label"},"Status:",-1)),e("span",null,l(t(h).status),1)]),e("div",Os,[o[9]||(o[9]=e("span",{class:"label"},"Pages:",-1)),e("span",null,l(t(h).page_count),1)]),e("div",Vs,[o[10]||(o[10]=e("span",{class:"label"},"Purpose:",-1)),e("span",null,l(t(h).purpose||"General"),1)]),e("div",Ms,[o[11]||(o[11]=e("span",{class:"label"},"Date:",-1)),e("span",null,l(b(t(h).created_at)),1)])]),t(h).ocr_text?(d(),c("div",Fs,[o[12]||(o[12]=e("h5",null,"Extracted Text (OCR)",-1)),e("pre",null,l(t(h).ocr_text),1)])):k("",!0),e("div",Rs,[t(h).pdf_url?(d(),c("button",Us,"View PDF")):k("",!0),t(h).fax_image_url?(d(),c("button",Ps,"View Original")):k("",!0)])])])):k("",!0),t(w)?(d(),c("div",zs,[e("div",Bs,[e("div",{class:"modal-header"},[o[13]||(o[13]=e("h4",null,"Send Fax",-1)),e("button",{onClick:p,class:"close-btn"},"Ã—")]),e("div",Ls,[e("div",Qs,[o[14]||(o[14]=e("label",null,"Fax Number:",-1)),V(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>t(E).faxNumber=s),type:"tel",placeholder:"+1 (555) 123-4567"},null,512),[[Q,t(E).faxNumber]])]),e("div",js,[o[16]||(o[16]=e("label",null,"Purpose:",-1)),V(e("select",{"onUpdate:modelValue":o[3]||(o[3]=s=>t(E).purpose=s)},[...o[15]||(o[15]=[ne('<option value="eob" data-v-613b6b93>EOB</option><option value="prior_auth" data-v-613b6b93>Prior Authorization</option><option value="claim_submission" data-v-613b6b93>Claim Submission</option><option value="payer_correspondence" data-v-613b6b93>Payer Correspondence</option><option value="other" data-v-613b6b93>Other</option>',5)])],512),[[se,t(E).purpose]])]),e("div",Ws,[o[17]||(o[17]=e("label",null,"PDF Document:",-1)),e("input",{type:"file",accept:".pdf",onChange:D},null,32)]),e("div",{class:"form-actions"},[e("button",{onClick:p,class:"cancel-btn"},"Cancel"),e("button",{onClick:y,class:"send-btn-submit"},"Send Fax")])])])])):k("",!0)]))}}),Gs=Y(Hs,[["__scopeId","data-v-613b6b93"]]),Ks={class:"document-workspace"},Js={class:"workspace-header"},Ys={class:"document-filters"},Xs=["onClick"],Zs={key:0,class:"loading"},en={key:1,class:"empty-state"},tn={key:2,class:"document-grid"},sn=["onClick"],nn={class:"doc-icon"},on={class:"doc-info"},an={class:"doc-name"},ln={class:"doc-meta"},rn={class:"doc-type"},dn={class:"doc-version"},cn={key:0,class:"doc-finalized"},un={class:"doc-date"},pn={key:3,class:"document-viewer"},_n={class:"viewer-content"},mn={class:"viewer-header"},vn={class:"doc-details"},gn={class:"detail-row"},fn={class:"detail-row"},yn={class:"detail-row"},bn={class:"detail-row"},wn={class:"detail-row"},hn={class:"doc-actions"},$n={key:1,class:"action-btn primary"},kn={key:4,class:"create-modal"},Cn={class:"modal-content"},Sn={class:"create-form"},In={class:"form-field"},qn={class:"form-field"},xn={class:"form-field"},Tn=K({__name:"DocumentWorkspace",setup(g){const{getDocuments:M,createDocument:C,finalizeDocument:N}=ie(),h=q([]),w=q(null),x=q(!1),E=q(""),S=q(!0),b=q({documentName:"",documentType:"word",organizationType:"general"}),m=a=>({word:"ðŸ“",excel:"ðŸ“Š",powerpoint:"ðŸ“½ï¸",pdf:"ðŸ“„",text:"ðŸ“ƒ"})[a]||"ðŸ“„",O=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"}),D=a=>new Date(a).toLocaleString("en-US"),y=async()=>{S.value=!0;const a={};E.value&&(a.documentType=E.value),h.value=await M(a),S.value=!1},p=a=>{w.value=a},_=async a=>{await N(a),w.value=null,await y()},o=a=>{console.log("View versions for:",a)},s=async()=>{await C({documentName:b.value.documentName,documentType:b.value.documentType,mimeType:"application/octet-stream",storagePath:`/documents/${Date.now()}`,organizationType:b.value.organizationType}),i(),await y()},i=()=>{x.value=!1,b.value={documentName:"",documentType:"word",organizationType:"general"}};return le(E,()=>{y()}),J(()=>{y()}),(a,r)=>(d(),c("div",Ks,[e("div",Js,[r[7]||(r[7]=e("h3",null,"Document Workspace",-1)),e("button",{onClick:r[0]||(r[0]=u=>x.value=!0),class:"create-btn"},"New Document")]),e("div",Ys,[(d(),c(B,null,L(["all","word","excel","powerpoint","pdf"],u=>e("button",{key:u,onClick:n=>E.value=u==="all"?"":u,class:U(["filter-btn",{active:t(E)===(u==="all"?"":u)}])},l(u.charAt(0).toUpperCase()+u.slice(1)),11,Xs)),64))]),t(S)?(d(),c("div",Zs,"Loading documents...")):t(h).length===0?(d(),c("div",en," No documents found ")):(d(),c("div",tn,[(d(!0),c(B,null,L(t(h),u=>(d(),c("div",{key:u.id,class:"document-card",onClick:n=>p(u)},[e("div",nn,l(m(u.document_type)),1),e("div",on,[e("div",an,l(u.document_name),1),e("div",ln,[e("span",rn,l(u.document_type),1),e("span",dn,"v"+l(u.current_version),1),u.is_finalized?(d(),c("span",cn,"ðŸ”’ Finalized")):k("",!0)]),e("div",un,"Updated "+l(O(u.updated_at)),1)])],8,sn))),128))])),t(w)?(d(),c("div",pn,[e("div",_n,[e("div",mn,[e("h4",null,l(t(w).document_name),1),e("button",{onClick:r[1]||(r[1]=u=>w.value=null),class:"close-btn"},"Ã—")]),e("div",vn,[e("div",gn,[r[8]||(r[8]=e("span",{class:"label"},"Type:",-1)),e("span",null,l(t(w).document_type),1)]),e("div",fn,[r[9]||(r[9]=e("span",{class:"label"},"Version:",-1)),e("span",null,l(t(w).current_version),1)]),e("div",yn,[r[10]||(r[10]=e("span",{class:"label"},"Status:",-1)),e("span",null,l(t(w).is_finalized?"Finalized (Immutable)":"Draft (Editable)"),1)]),e("div",bn,[r[11]||(r[11]=e("span",{class:"label"},"Created:",-1)),e("span",null,l(D(t(w).created_at)),1)]),e("div",wn,[r[12]||(r[12]=e("span",{class:"label"},"Updated:",-1)),e("span",null,l(D(t(w).updated_at)),1)])]),r[13]||(r[13]=e("div",{class:"doc-editor"},[e("div",{class:"editor-placeholder"},[e("p",null,"Document editor interface"),e("p",{class:"editor-note"},"Cloud-based editing with automatic version control")])],-1)),e("div",hn,[e("button",{onClick:r[2]||(r[2]=u=>o(t(w).id)),class:"action-btn"},"View Versions"),t(w).is_finalized?k("",!0):(d(),c("button",{key:0,onClick:r[3]||(r[3]=u=>_(t(w).id)),class:"action-btn"}," Finalize Document ")),t(w).is_finalized?k("",!0):(d(),c("button",$n,"Save Changes"))])])])):k("",!0),t(x)?(d(),c("div",kn,[e("div",Cn,[e("div",{class:"modal-header"},[r[14]||(r[14]=e("h4",null,"Create New Document",-1)),e("button",{onClick:i,class:"close-btn"},"Ã—")]),e("div",Sn,[e("div",In,[r[15]||(r[15]=e("label",null,"Document Name:",-1)),V(e("input",{"onUpdate:modelValue":r[4]||(r[4]=u=>t(b).documentName=u),type:"text",placeholder:"My Document"},null,512),[[Q,t(b).documentName]])]),e("div",qn,[r[17]||(r[17]=e("label",null,"Document Type:",-1)),V(e("select",{"onUpdate:modelValue":r[5]||(r[5]=u=>t(b).documentType=u)},[...r[16]||(r[16]=[ne('<option value="word" data-v-fce11ada>Word Document</option><option value="excel" data-v-fce11ada>Spreadsheet</option><option value="powerpoint" data-v-fce11ada>Presentation</option><option value="pdf" data-v-fce11ada>PDF</option><option value="text" data-v-fce11ada>Text Document</option>',5)])],512),[[se,t(b).documentType]])]),e("div",xn,[r[19]||(r[19]=e("label",null,"Organization:",-1)),V(e("select",{"onUpdate:modelValue":r[6]||(r[6]=u=>t(b).organizationType=u)},[...r[18]||(r[18]=[e("option",{value:"general"},"General",-1),e("option",{value:"agency"},"Agency",-1),e("option",{value:"claim"},"Claim",-1),e("option",{value:"billing_period"},"Billing Period",-1)])],512),[[se,t(b).organizationType]])]),e("div",{class:"form-actions"},[e("button",{onClick:i,class:"cancel-btn"},"Cancel"),e("button",{onClick:s,class:"create-btn-submit"},"Create Document")])])])])):k("",!0)]))}}),Nn=Y(Tn,[["__scopeId","data-v-fce11ada"]]),Dn=()=>{const g=useSupabaseClient(),M=async _=>{let o=g.from("queue_calls").select("*").order("priority",{ascending:!1}).order("entered_queue_at",{ascending:!0});_&&(o=o.eq("queue_state",_));const{data:s,error:i}=await o;if(i)throw i;return s||[]},C=async _=>{const{data:o,error:s}=await g.from("queue_calls").insert({call_id:_.callId,queue_state:"active",call_direction:_.callDirection,call_status:_.callStatus,caller_identity:_.callerIdentity,handled_by:_.handledBy,priority:_.priority||50}).select().single();if(s)throw s;return o},N=async(_,o)=>{const{error:s}=await g.from("queue_calls").update(o).eq("id",_);if(s)throw s},h=async _=>{const{error:o}=await g.from("queue_calls").update({queue_state:"completed",completed_at:new Date().toISOString()}).eq("id",_);if(o)throw o},w=async _=>{let o=g.from("queue_voicemails").select(`
        *,
        voicemail_records (*)
      `).order("priority",{ascending:!1}).order("entered_queue_at",{ascending:!0});_&&(o=o.eq("queue_state",_));const{data:s,error:i}=await o;if(i)throw i;return s||[]},x=async _=>{const{data:o,error:s}=await g.from("queue_voicemails").insert({voicemail_id:_.voicemailId,queue_state:"new",caller_identity:_.callerIdentity,suggested_action:_.suggestedAction,priority:_.priority||50}).select().single();if(s)throw s;return o},E=async(_,o)=>{const s={queue_state:o};o==="resolved"&&(s.resolved_at=new Date().toISOString());const{error:i}=await g.from("queue_voicemails").update(s).eq("id",_);if(i)throw i},S=async(_,o)=>{let s=g.from("queue_documents").select(`
        *,
        workspace_documents (*)
      `).order("priority",{ascending:!1}).order("entered_queue_at",{ascending:!0});_&&(s=s.eq("queue_state",_)),o&&(s=s.eq("blocking_workflow",!0));const{data:i,error:a}=await s;if(a)throw a;return i||[]},b=async _=>{const{data:o,error:s}=await g.from("queue_documents").insert({document_id:_.documentId,queue_state:"draft",document_purpose:_.documentPurpose,blocking_workflow:_.blockingWorkflow||!1,workflow_reference:_.workflowReference,required_by:_.requiredBy,priority:_.priority||50}).select().single();if(s)throw s;return o},m=async(_,o)=>{const s={queue_state:o};o==="ready_to_finalize"&&(s.completed_at=new Date().toISOString());const{error:i}=await g.from("queue_documents").update(s).eq("id",_);if(i)throw i},O=async _=>{let o=g.from("queue_billing").select("*").order("priority",{ascending:!1}).order("entered_queue_at",{ascending:!0});_&&(o=o.eq("queue_state",_));const{data:s,error:i}=await o;if(i)throw i;return s||[]};return{getCallsQueue:M,addToCallsQueue:C,updateCallsQueueItem:N,completeCallsQueueItem:h,getVoicemailsQueue:w,addToVoicemailsQueue:x,updateVoicemailsQueueItem:E,getDocumentsQueue:S,addToDocumentsQueue:b,updateDocumentsQueueItem:m,getBillingQueue:O,addToBillingQueue:async _=>{const{data:o,error:s}=await g.from("queue_billing").insert({billing_reference:_.billingReference,billing_type:_.billingType,queue_state:"ready",encounter_id:_.encounterId,claim_id:_.claimId,agency_id:_.agencyId,billing_stage:_.billingStage,next_action:_.nextAction,action_deadline:_.actionDeadline,priority:_.priority||50,metadata:_.metadata||{}}).select().single();if(s)throw s;return o},updateBillingQueueItem:async(_,o,s)=>{const i={queue_state:o};o==="resolved"&&(i.resolved_at=new Date().toISOString()),s&&(i.metadata=s);const{error:a}=await g.from("queue_billing").update(i).eq("id",_);if(a)throw a},getQueueCounts:async()=>{const[_,o,s,i]=await Promise.all([M("active"),w("new"),S(void 0,!0),O("action_required")]);return{activeCalls:_.length,newVoicemails:o.length,blockingDocuments:s.length,actionRequiredBilling:i.length}}}},En={class:"queue-management"},An={class:"queue-tabs"},On=["onClick"],Vn={class:"queue-icon"},Mn={class:"queue-name"},Fn={key:0,class:"queue-badge"},Rn={class:"queue-content"},Un={key:0,class:"queue-section"},Pn={key:0,class:"empty-state"},zn={key:1,class:"queue-list"},Bn={class:"item-header"},Ln={class:"item-direction"},Qn={class:"item-details"},jn={class:"item-title"},Wn={class:"item-meta"},Hn={class:"item-actions"},Gn=["onClick"],Kn={key:1,class:"queue-section"},Jn={key:0,class:"empty-state"},Yn={key:1,class:"queue-list"},Xn={class:"item-header"},Zn={class:"item-details"},eo={class:"item-title"},to={class:"item-meta"},so={class:"item-actions"},no=["onClick"],oo=["onClick"],ao={key:2,class:"queue-section"},io={key:0,class:"empty-state"},lo={key:1,class:"queue-list"},ro={class:"item-header"},co={key:0,class:"blocking-badge"},uo={class:"item-details"},po={class:"item-title"},_o={class:"item-meta"},mo={class:"item-actions"},vo=["onClick"],go=["onClick"],fo={key:3,class:"queue-section"},yo={key:0,class:"empty-state"},bo={key:1,class:"queue-list"},wo={class:"item-header"},ho={class:"item-details"},$o={class:"item-title"},ko={class:"item-meta"},Co={key:0,class:"item-deadline"},So={class:"item-actions"},Io=["onClick"],qo=["onClick"],xo=K({__name:"QueueManagement",setup(g){const{getCallsQueue:M,completeCallsQueueItem:C,getVoicemailsQueue:N,updateVoicemailsQueueItem:h,getDocumentsQueue:w,updateDocumentsQueueItem:x,getBillingQueue:E,updateBillingQueueItem:S,getQueueCounts:b}=Dn(),m=q("billing"),O=q([]),D=q([]),y=q([]),p=q([]),_=q({activeCalls:0,newVoicemails:0,blockingDocuments:0,actionRequiredBilling:0}),o=te(()=>[{id:"calls",name:"Calls",icon:"ðŸ“ž",count:_.value.activeCalls},{id:"voicemails",name:"Voicemails",icon:"ðŸ“¨",count:_.value.newVoicemails},{id:"documents",name:"Documents",icon:"ðŸ“„",count:_.value.blockingDocuments},{id:"billing",name:"Billing",icon:"ðŸ’¼",count:_.value.actionRequiredBilling}]),s=P=>{const R=new Date(P),j=new Date().getTime()-R.getTime(),v=Math.floor(j/6e4);return v<60?`${v}m ago`:v<1440?`${Math.floor(v/60)}h ago`:R.toLocaleDateString()},i=P=>new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric"}),a=async()=>{O.value=await M(),D.value=await N(),y.value=await w(),p.value=await E(),_.value=await b()},r=async P=>{await C(P),await a()},u=async P=>{await h(P,"reviewed"),await a()},n=async P=>{await h(P,"resolved"),await a()},f=P=>{console.log("Open document:",P)},I=async P=>{await x(P,"ready_to_finalize"),await a()},F=async P=>{await S(P,"in_progress"),await a()},z=async P=>{await S(P,"resolved"),await a()};return J(()=>{a(),ae(()=>{a()},3e4)}),(P,R)=>(d(),c("div",En,[e("div",An,[(d(!0),c(B,null,L(t(o),$=>(d(),c("button",{key:$.id,onClick:j=>m.value=$.id,class:U(["queue-tab",{active:t(m)===$.id}])},[e("span",Vn,l($.icon),1),e("span",Mn,l($.name),1),$.count>0?(d(),c("span",Fn,l($.count),1)):k("",!0)],10,On))),128))]),e("div",Rn,[t(m)==="calls"?(d(),c("div",Un,[R[0]||(R[0]=e("h3",null,"Calls Queue",-1)),R[1]||(R[1]=e("p",{class:"queue-description"},"Real-time and historical call control",-1)),t(O).length===0?(d(),c("div",Pn,"No active calls")):(d(),c("div",zn,[(d(!0),c(B,null,L(t(O),$=>(d(),c("div",{key:$.id,class:"queue-item"},[e("div",Bn,[e("span",Ln,l($.call_direction==="inbound"?"ðŸ“ž Inbound":"ðŸ“± Outbound"),1),e("span",{class:U(["item-state",$.queue_state])},l($.queue_state),3)]),e("div",Qn,[e("p",jn,l($.caller_identity||"Unknown Caller"),1),e("p",Wn,l($.call_status)+" â€¢ Handled by "+l($.handled_by),1)]),e("div",Hn,[$.queue_state==="active"?(d(),c("button",{key:0,onClick:j=>r($.id),class:"complete-btn"}," Complete ",8,Gn)):k("",!0)])]))),128))]))])):k("",!0),t(m)==="voicemails"?(d(),c("div",Kn,[R[3]||(R[3]=e("h3",null,"Voicemails Queue",-1)),R[4]||(R[4]=e("p",{class:"queue-description"},"Unattended call triage",-1)),t(D).length===0?(d(),c("div",Jn,"No voicemails")):(d(),c("div",Yn,[(d(!0),c(B,null,L(t(D),$=>(d(),c("div",{key:$.id,class:"queue-item"},[e("div",Xn,[R[2]||(R[2]=e("span",{class:"item-icon"},"ðŸ“¨",-1)),e("span",{class:U(["item-state",$.queue_state])},l($.queue_state),3)]),e("div",Zn,[e("p",eo,l($.caller_identity||$.voicemail_records?.caller_number),1),e("p",to,l($.voicemail_records?.duration_seconds)+"s â€¢ "+l(s($.entered_queue_at)),1)]),e("div",so,[$.queue_state==="new"?(d(),c("button",{key:0,onClick:j=>u($.id),class:"review-btn"}," Review ",8,no)):k("",!0),$.queue_state!=="resolved"?(d(),c("button",{key:1,onClick:j=>n($.id),class:"resolve-btn"}," Resolve ",8,oo)):k("",!0)])]))),128))]))])):k("",!0),t(m)==="documents"?(d(),c("div",ao,[R[6]||(R[6]=e("h3",null,"Documents Queue",-1)),R[7]||(R[7]=e("p",{class:"queue-description"},"Work-in-progress and compliance checkpoint",-1)),t(y).length===0?(d(),c("div",io,"No pending documents")):(d(),c("div",lo,[(d(!0),c(B,null,L(t(y),$=>(d(),c("div",{key:$.id,class:U(["queue-item",{blocking:$.blocking_workflow}])},[e("div",ro,[R[5]||(R[5]=e("span",{class:"item-icon"},"ðŸ“„",-1)),e("span",{class:U(["item-state",$.queue_state])},l($.queue_state),3),$.blocking_workflow?(d(),c("span",co,"Blocking")):k("",!0)]),e("div",uo,[e("p",po,l($.workspace_documents?.document_name),1),e("p",_o,l($.document_purpose||"General")+" â€¢ "+l(s($.entered_queue_at)),1)]),e("div",mo,[e("button",{onClick:j=>f($.document_id),class:"open-btn"},"Open",8,vo),$.queue_state==="draft"?(d(),c("button",{key:0,onClick:j=>I($.id),class:"finalize-btn"}," Ready to Finalize ",8,go)):k("",!0)])],2))),128))]))])):k("",!0),t(m)==="billing"?(d(),c("div",fo,[R[9]||(R[9]=e("h3",null,"Billing Queue",-1)),R[10]||(R[10]=e("p",{class:"queue-description"},"Primary billing execution queue",-1)),t(p).length===0?(d(),c("div",yo,"No billing items")):(d(),c("div",bo,[(d(!0),c(B,null,L(t(p),$=>(d(),c("div",{key:$.id,class:"queue-item"},[e("div",wo,[R[8]||(R[8]=e("span",{class:"item-icon"},"ðŸ’¼",-1)),e("span",{class:U(["item-state",$.queue_state])},l($.queue_state),3)]),e("div",ho,[e("p",$o,l($.billing_reference),1),e("p",ko,l($.billing_type)+" â€¢ "+l($.next_action),1),$.action_deadline?(d(),c("p",Co,"Due: "+l(i($.action_deadline)),1)):k("",!0)]),e("div",So,[$.queue_state==="ready"?(d(),c("button",{key:0,onClick:j=>F($.id),class:"start-btn"}," Start ",8,Io)):k("",!0),$.queue_state!=="resolved"?(d(),c("button",{key:1,onClick:j=>z($.id),class:"resolve-btn"}," Resolve ",8,qo)):k("",!0)])]))),128))]))])):k("",!0)])]))}}),To=Y(xo,[["__scopeId","data-v-cfc73b57"]]),No=()=>{const g=useSupabaseClient(),M=async s=>{const{data:i,error:a}=await g.from("invoices").insert({invoice_number:s.invoiceNumber,invoice_type:s.invoiceType,invoice_state:"draft",encounter_id:s.encounterId,agency_id:s.agencyId,billable_call_id:s.billableCallId,payer_type:s.payerType,payer_name:s.payerName,payer_contact:s.payerContact,due_date:s.dueDate}).select().single();if(a)throw a;return i},C=async s=>{const i=Math.round(s.quantity*s.unitPriceCents),{data:a,error:r}=await g.from("invoice_line_items").insert({invoice_id:s.invoiceId,line_number:s.lineNumber,item_type:s.itemType,description:s.description,quantity:s.quantity,unit_price_cents:s.unitPriceCents,line_total_cents:i,metadata:s.metadata||{}}).select().single();if(r)throw r;return a},N=async s=>{const{data:i}=await g.from("invoice_line_items").select("line_total_cents").eq("invoice_id",s),a=i?.reduce((n,f)=>n+f.line_total_cents,0)||0,r=a,{error:u}=await g.from("invoices").update({subtotal_cents:a,total_cents:r,balance_cents:r,updated_at:new Date().toISOString()}).eq("id",s);if(u)throw u;return{subtotalCents:a,totalCents:r}};return{createInvoice:M,addInvoiceLineItem:C,calculateInvoiceTotals:N,finalizeInvoice:async s=>{await N(s);const{error:i}=await g.from("invoices").update({invoice_state:"final",updated_at:new Date().toISOString()}).eq("id",s);if(i)throw i},sendInvoice:async s=>{const{error:i}=await g.from("invoices").update({invoice_state:"sent",sent_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",s);if(i)throw i},getInvoice:async s=>{const{data:i,error:a}=await g.from("invoices").select(`
        *,
        invoice_line_items (*)
      `).eq("id",s).maybeSingle();if(a)throw a;return i},getInvoices:async s=>{let i=g.from("invoices").select("*").order("created_at",{ascending:!1});s?.state&&(i=i.eq("invoice_state",s.state)),s?.agencyId&&(i=i.eq("agency_id",s.agencyId)),s?.invoiceType&&(i=i.eq("invoice_type",s.invoiceType));const{data:a,error:r}=await i;if(r)throw r;return a||[]},createNEMSISValidation:async s=>{const i=s.requiredFieldsComplete===s.requiredFieldsTotal&&(!s.validationErrors||s.validationErrors.length===0),a=i?"valid":s.requiredFieldsComplete<s.requiredFieldsTotal?"incomplete":"invalid",{data:r,error:u}=await g.from("nemsis_validations").insert({epcr_id:s.epcrId,validation_version:s.validationVersion,validation_status:a,required_fields_complete:s.requiredFieldsComplete,required_fields_total:s.requiredFieldsTotal,validation_errors:s.validationErrors||[],validation_warnings:s.validationWarnings||[],export_ready:i}).select().single();if(u)throw u;return r},getNEMSISValidation:async s=>{const{data:i,error:a}=await g.from("nemsis_validations").select("*").eq("epcr_id",s).order("validated_at",{ascending:!1}).limit(1).maybeSingle();if(a)throw a;return i},markNEMSISExported:async(s,i)=>{const{error:a}=await g.from("nemsis_validations").update({exported_at:new Date().toISOString(),export_format:i}).eq("id",s);if(a)throw a},mapRxNorm:async s=>{const{data:i,error:a}=await g.from("rxnorm_mappings").insert({medication_entry:s.medicationEntry,rxnorm_concept_id:s.rxnormConceptId,rxnorm_name:s.rxnormName,dose:s.dose,dose_unit:s.doseUnit,route:s.route,mapping_status:s.mappingStatus,mapping_confidence:s.mappingConfidence,mapped_by:s.mappedBy,mapped_at:s.mappingStatus==="confirmed"?new Date().toISOString():null}).select().single();if(a)throw a;return i},confirmRxNormMapping:async(s,i)=>{const{error:a}=await g.from("rxnorm_mappings").update({mapping_status:"confirmed",mapped_by:i,mapped_at:new Date().toISOString()}).eq("id",s);if(a)throw a},getRxNormMappings:async s=>{let i=g.from("rxnorm_mappings").select("*").order("created_at",{ascending:!1});s&&(i=i.eq("mapping_status",s));const{data:a,error:r}=await i;if(r)throw r;return a||[]},mapSNOMED:async s=>{const{data:i,error:a}=await g.from("snomed_mappings").insert({clinical_term:s.clinicalTerm,snomed_concept_id:s.snomedConceptId,snomed_description:s.snomedDescription,term_type:s.termType,mapping_status:s.mappingStatus,mapping_confidence:s.mappingConfidence,mapped_by:s.mappedBy,mapped_at:s.mappingStatus==="confirmed"?new Date().toISOString():null}).select().single();if(a)throw a;return i},confirmSNOMEDMapping:async(s,i)=>{const{error:a}=await g.from("snomed_mappings").update({mapping_status:"confirmed",mapped_by:i,mapped_at:new Date().toISOString()}).eq("id",s);if(a)throw a},getSNOMEDMappings:async s=>{let i=g.from("snomed_mappings").select("*").order("created_at",{ascending:!1});s&&(i=i.eq("mapping_status",s));const{data:a,error:r}=await i;if(r)throw r;return a||[]}}},Do={class:"workspace-builders"},Eo={class:"builders-tabs"},Ao=["onClick"],Oo={class:"builder-content"},Vo={key:0,class:"builder-section"},Mo={class:"builder-form"},Fo={class:"form-row"},Ro={class:"form-field"},Uo={class:"form-field"},Po={class:"form-row"},zo={class:"form-field"},Bo={class:"form-field"},Lo={class:"line-items-section"},Qo=["onUpdate:modelValue"],jo=["onUpdate:modelValue"],Wo=["onUpdate:modelValue"],Ho=["onUpdate:modelValue"],Go=["onClick"],Ko={class:"invoice-total"},Jo={class:"total"},Yo={key:1,class:"builder-section"},Xo={class:"validation-status"},Zo={class:"status-header"},ea={class:"progress-bar"},ta={class:"progress-text"},sa={class:"form-actions"},na=["disabled"],oa={key:2,class:"builder-section"},aa={class:"mapping-section"},ia={class:"mapping-input"},la={key:0,class:"mapping-result"},ra={class:"mapping-card"},da={class:"mapping-details"},ca={class:"mapping-list"},ua={key:3,class:"builder-section"},pa={class:"mapping-section"},_a={class:"mapping-input"},ma={key:0,class:"mapping-result"},va={class:"mapping-card"},ga={class:"mapping-list"},fa={class:"term-type"},ya=K({__name:"WorkspaceBuilders",setup(g){const{createInvoice:M,addInvoiceLineItem:C,calculateInvoiceTotals:N,getRxNormMappings:h,mapRxNorm:w,getSNOMEDMappings:x,mapSNOMED:E}=No(),S=q("invoice"),b=[{id:"invoice",name:"Invoice",icon:"ðŸ’µ"},{id:"nemsis",name:"NEMSIS",icon:"ðŸš‘"},{id:"rxnorm",name:"RxNorm",icon:"ðŸ’Š"},{id:"snomed",name:"SNOMED",icon:"ðŸ©º"}],m=q({invoiceNumber:"",invoiceType:"patient_pay",payerName:"",dueDate:"",lineItems:[{itemType:"transport",description:"",quantity:1,unitPrice:0}]}),O=q({status:"incomplete",requiredComplete:3,requiredTotal:4,exportReady:!1}),D=te(()=>O.value.requiredComplete/O.value.requiredTotal*100),y=q({medicationEntry:"",suggested:!1,rxnormConceptId:"",rxnormName:"",dose:"",doseUnit:"",route:"",confidence:0}),p=q({clinicalTerm:"",termType:"symptom",suggested:!1,snomedConceptId:"",snomedDescription:"",confidence:0}),_=q([]),o=q([]),s=()=>{m.value.lineItems.push({itemType:"transport",description:"",quantity:1,unitPrice:0})},i=j=>{m.value.lineItems.splice(j,1)},a=()=>(m.value.lineItems.reduce((v,T)=>v+T.quantity*T.unitPrice,0)/100).toFixed(2),r=async()=>{const j=await M({invoiceNumber:m.value.invoiceNumber,invoiceType:m.value.invoiceType,payerName:m.value.payerName,dueDate:m.value.dueDate});for(let v=0;v<m.value.lineItems.length;v++){const T=m.value.lineItems[v];await C({invoiceId:j.id,lineNumber:v+1,itemType:T.itemType,description:T.description,quantity:T.quantity,unitPriceCents:Math.round(T.unitPrice*100)})}await N(j.id),alert("Invoice draft saved!")},u=async()=>{await r(),alert("Invoice finalized!")},n=()=>{y.value.suggested=!0,y.value.rxnormConceptId="RXCUI:1191",y.value.rxnormName="Aspirin 81 MG Oral Tablet",y.value.dose="81",y.value.doseUnit="mg",y.value.route="PO",y.value.confidence=95},f=async()=>{await w({medicationEntry:y.value.medicationEntry,rxnormConceptId:y.value.rxnormConceptId,rxnormName:y.value.rxnormName,dose:y.value.dose,doseUnit:y.value.doseUnit,route:y.value.route,mappingStatus:"confirmed",mappingConfidence:y.value.confidence,mappedBy:"founder"}),y.value.suggested=!1,y.value.medicationEntry="",await R()},I=()=>{y.value.suggested=!1},F=()=>{p.value.suggested=!0,p.value.snomedConceptId="SCT:29857009",p.value.snomedDescription="Chest pain (finding)",p.value.confidence=92},z=async()=>{await E({clinicalTerm:p.value.clinicalTerm,snomedConceptId:p.value.snomedConceptId,snomedDescription:p.value.snomedDescription,termType:p.value.termType,mappingStatus:"confirmed",mappingConfidence:p.value.confidence,mappedBy:"founder"}),p.value.suggested=!1,p.value.clinicalTerm="",await $()},P=()=>{p.value.suggested=!1},R=async()=>{_.value=await h()},$=async()=>{o.value=await x()};return J(()=>{R(),$()}),(j,v)=>(d(),c("div",Do,[e("div",Eo,[(d(),c(B,null,L(b,T=>e("button",{key:T.id,onClick:oe=>S.value=T.id,class:U(["builder-tab",{active:t(S)===T.id}])},l(T.icon)+" "+l(T.name),11,Ao)),64))]),e("div",Oo,[t(S)==="invoice"?(d(),c("div",Vo,[v[17]||(v[17]=e("h3",null,"Invoice Builder",-1)),v[18]||(v[18]=e("p",{class:"builder-description"},"Create patient-pay and private-party invoices",-1)),e("div",Mo,[e("div",Fo,[e("div",Ro,[v[10]||(v[10]=e("label",null,"Invoice Number:",-1)),V(e("input",{"onUpdate:modelValue":v[0]||(v[0]=T=>t(m).invoiceNumber=T),type:"text",placeholder:"INV-2024-001"},null,512),[[Q,t(m).invoiceNumber]])]),e("div",Uo,[v[12]||(v[12]=e("label",null,"Invoice Type:",-1)),V(e("select",{"onUpdate:modelValue":v[1]||(v[1]=T=>t(m).invoiceType=T)},[...v[11]||(v[11]=[e("option",{value:"patient_pay"},"Patient Pay",-1),e("option",{value:"private_party"},"Private Party",-1),e("option",{value:"agency_billing"},"Agency Billing",-1)])],512),[[se,t(m).invoiceType]])])]),e("div",Po,[e("div",zo,[v[13]||(v[13]=e("label",null,"Payer Name:",-1)),V(e("input",{"onUpdate:modelValue":v[2]||(v[2]=T=>t(m).payerName=T),type:"text",placeholder:"John Doe"},null,512),[[Q,t(m).payerName]])]),e("div",Bo,[v[14]||(v[14]=e("label",null,"Due Date:",-1)),V(e("input",{"onUpdate:modelValue":v[3]||(v[3]=T=>t(m).dueDate=T),type:"date"},null,512),[[Q,t(m).dueDate]])])]),e("div",Lo,[v[16]||(v[16]=e("h4",null,"Line Items",-1)),(d(!0),c(B,null,L(t(m).lineItems,(T,oe)=>(d(),c("div",{key:oe,class:"line-item"},[V(e("select",{"onUpdate:modelValue":X=>T.itemType=X},[...v[15]||(v[15]=[e("option",{value:"transport"},"Transport",-1),e("option",{value:"mileage"},"Mileage",-1),e("option",{value:"service_level"},"Service Level",-1),e("option",{value:"telehealth"},"Telehealth",-1)])],8,Qo),[[se,T.itemType]]),V(e("input",{"onUpdate:modelValue":X=>T.description=X,type:"text",placeholder:"Description"},null,8,jo),[[Q,T.description]]),V(e("input",{"onUpdate:modelValue":X=>T.quantity=X,type:"number",placeholder:"Qty",style:{width:"80px"}},null,8,Wo),[[Q,T.quantity,void 0,{number:!0}]]),V(e("input",{"onUpdate:modelValue":X=>T.unitPrice=X,type:"number",placeholder:"Price",style:{width:"100px"}},null,8,Ho),[[Q,T.unitPrice,void 0,{number:!0}]]),e("button",{onClick:X=>i(oe),class:"remove-btn"},"Ã—",8,Go)]))),128)),e("button",{onClick:s,class:"add-line-btn"},"+ Add Line Item")]),e("div",Ko,[e("p",null,"Subtotal: $"+l(a()),1),e("p",Jo,"Total: $"+l(a()),1)]),e("div",{class:"form-actions"},[e("button",{onClick:r,class:"save-btn"},"Save Draft"),e("button",{onClick:u,class:"finalize-btn"},"Finalize Invoice")])])])):k("",!0),t(S)==="nemsis"?(d(),c("div",Yo,[v[20]||(v[20]=e("h3",null,"NEMSIS Builder",-1)),v[21]||(v[21]=e("p",{class:"builder-description"},"Validate and export ePCR data to NEMSIS format",-1)),e("div",Xo,[e("div",Zo,[v[19]||(v[19]=e("h4",null,"NEMSIS Readiness",-1)),e("span",{class:U(["status-badge",t(O).status])},l(t(O).status),3)]),e("div",ea,[e("div",{class:"progress-fill",style:ce({width:t(D)+"%"})},null,4)]),e("p",ta,l(t(O).requiredComplete)+"/"+l(t(O).requiredTotal)+" required fields complete ",1)]),v[22]||(v[22]=ne('<div class="validation-sections" data-v-2c7fd8af><div class="validation-item" data-v-2c7fd8af><span class="validation-icon" data-v-2c7fd8af>âœ“</span><span class="validation-label" data-v-2c7fd8af>Patient Demographics</span><span class="validation-status complete" data-v-2c7fd8af>Complete</span></div><div class="validation-item" data-v-2c7fd8af><span class="validation-icon" data-v-2c7fd8af>âœ“</span><span class="validation-label" data-v-2c7fd8af>Incident Information</span><span class="validation-status complete" data-v-2c7fd8af>Complete</span></div><div class="validation-item" data-v-2c7fd8af><span class="validation-icon" data-v-2c7fd8af>âš </span><span class="validation-label" data-v-2c7fd8af>Vital Signs</span><span class="validation-status incomplete" data-v-2c7fd8af>Incomplete</span></div><div class="validation-item" data-v-2c7fd8af><span class="validation-icon" data-v-2c7fd8af>âœ“</span><span class="validation-label" data-v-2c7fd8af>Medications Administered</span><span class="validation-status complete" data-v-2c7fd8af>Complete</span></div></div>',1)),e("div",sa,[e("button",{disabled:!t(O).exportReady,class:"export-btn"},"Export NEMSIS",8,na)])])):k("",!0),t(S)==="rxnorm"?(d(),c("div",oa,[v[29]||(v[29]=e("h3",null,"RxNorm Builder",-1)),v[30]||(v[30]=e("p",{class:"builder-description"},"Standardize medication documentation",-1)),e("div",aa,[e("div",ia,[v[23]||(v[23]=e("label",null,"Medication Entry:",-1)),V(e("input",{"onUpdate:modelValue":v[4]||(v[4]=T=>t(y).medicationEntry=T),type:"text",placeholder:"Aspirin 81mg PO"},null,512),[[Q,t(y).medicationEntry]]),e("button",{onClick:n,class:"suggest-btn"},"Suggest Mapping")]),t(y).suggested?(d(),c("div",la,[v[27]||(v[27]=e("h4",null,"Suggested Mapping",-1)),e("div",ra,[e("p",null,[v[24]||(v[24]=e("strong",null,"RxNorm Concept:",-1)),ee(" "+l(t(y).rxnormName),1)]),e("p",null,[v[25]||(v[25]=e("strong",null,"Concept ID:",-1)),ee(" "+l(t(y).rxnormConceptId),1)]),e("p",null,[v[26]||(v[26]=e("strong",null,"Confidence:",-1)),ee(" "+l(t(y).confidence)+"%",1)]),e("div",da,[V(e("input",{"onUpdate:modelValue":v[5]||(v[5]=T=>t(y).dose=T),type:"text",placeholder:"Dose (81)"},null,512),[[Q,t(y).dose]]),V(e("input",{"onUpdate:modelValue":v[6]||(v[6]=T=>t(y).doseUnit=T),type:"text",placeholder:"Unit (mg)"},null,512),[[Q,t(y).doseUnit]]),V(e("input",{"onUpdate:modelValue":v[7]||(v[7]=T=>t(y).route=T),type:"text",placeholder:"Route (PO)"},null,512),[[Q,t(y).route]])]),e("div",{class:"mapping-actions"},[e("button",{onClick:f,class:"confirm-btn"},"Confirm Mapping"),e("button",{onClick:I,class:"reject-btn"},"Reject")])])])):k("",!0),e("div",ca,[v[28]||(v[28]=e("h4",null,"Recent Mappings",-1)),(d(!0),c(B,null,L(t(_),T=>(d(),c("div",{class:"mapping-list-item",key:T.id},[e("span",null,l(T.medication_entry),1),e("span",{class:U(["mapping-status",T.mapping_status])},l(T.mapping_status),3)]))),128))])])])):k("",!0),t(S)==="snomed"?(d(),c("div",ua,[v[38]||(v[38]=e("h3",null,"SNOMED Builder",-1)),v[39]||(v[39]=e("p",{class:"builder-description"},"Standardize clinical concepts",-1)),e("div",pa,[e("div",_a,[v[32]||(v[32]=e("label",null,"Clinical Term:",-1)),V(e("input",{"onUpdate:modelValue":v[8]||(v[8]=T=>t(p).clinicalTerm=T),type:"text",placeholder:"Chest pain"},null,512),[[Q,t(p).clinicalTerm]]),V(e("select",{"onUpdate:modelValue":v[9]||(v[9]=T=>t(p).termType=T)},[...v[31]||(v[31]=[e("option",{value:"symptom"},"Symptom",-1),e("option",{value:"finding"},"Finding",-1),e("option",{value:"impression"},"Impression",-1),e("option",{value:"procedure"},"Procedure",-1)])],512),[[se,t(p).termType]]),e("button",{onClick:F,class:"suggest-btn"},"Suggest Mapping")]),t(p).suggested?(d(),c("div",ma,[v[36]||(v[36]=e("h4",null,"Suggested Mapping",-1)),e("div",va,[e("p",null,[v[33]||(v[33]=e("strong",null,"SNOMED Concept:",-1)),ee(" "+l(t(p).snomedDescription),1)]),e("p",null,[v[34]||(v[34]=e("strong",null,"Concept ID:",-1)),ee(" "+l(t(p).snomedConceptId),1)]),e("p",null,[v[35]||(v[35]=e("strong",null,"Confidence:",-1)),ee(" "+l(t(p).confidence)+"%",1)]),e("div",{class:"mapping-actions"},[e("button",{onClick:z,class:"confirm-btn"},"Confirm Mapping"),e("button",{onClick:P,class:"reject-btn"},"Reject")])])])):k("",!0),e("div",ga,[v[37]||(v[37]=e("h4",null,"Recent Mappings",-1)),(d(!0),c(B,null,L(t(o),T=>(d(),c("div",{class:"mapping-list-item",key:T.id},[e("span",null,l(T.clinical_term),1),e("span",fa,l(T.term_type),1),e("span",{class:U(["mapping-status",T.mapping_status])},l(T.mapping_status),3)]))),128))])])])):k("",!0)])]))}}),ba=Y(ya,[["__scopeId","data-v-2c7fd8af"]]),wa={class:"face-sheet-reviewer"},ha={class:"reviewer-header"},$a={class:"subtitle"},ka={key:0,class:"no-pending"},Ca={key:1,class:"face-sheets-list"},Sa=["onClick"],Ia={class:"patient-info"},qa={class:"patient-name"},xa={class:"patient-dob"},Ta={class:"confidence-section"},Na={class:"chevron"},Da={key:0,class:"card-expanded"},Ea={class:"field-grid"},Aa={class:"field-row"},Oa={class:"field-row"},Va={class:"field-row"},Ma={class:"mono"},Fa={class:"field-row"},Ra={class:"mono"},Ua={key:0,class:"field-row"},Pa={key:1,class:"field-row"},za={key:0,class:"field-confidence"},Ba={class:"field-name"},La={key:0,class:"uncertain-badge"},Qa={class:"source-info"},ja={class:"extraction-method"},Wa={class:"card-actions"},Ha=["onClick"],Ga=["onClick"],Ka=["onClick"],Ja={key:2,class:"approvals-summary"},Ya={class:"approval-items"},Xa={class:"approval-text"},Za={class:"approval-time"},ei=K({__name:"AIFaceSheetReviewer",setup(g){const M=useSupabaseClient(),{useFaceSheet:C}=useCurrentInstance()?.appContext?.config?.globalProperties||{},N=q([]),h=q([]),w=q(null),x=o=>new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),E=o=>{const s=new Date,i=new Date(o),a=s.getTime()-i.getTime(),r=Math.floor(a/6e4);return r<60?`${r}m ago`:r<1440?`${Math.floor(r/60)}h ago`:i.toLocaleDateString()},S=o=>o.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "),b=o=>o>=90?"high":o>=70?"medium":"low",m=o=>{w.value=w.value===o?null:o},O=async()=>{const{data:o,error:s}=await M.from("face_sheets").select(`
      *,
      face_sheet_fields (*)
    `).eq("is_approved",!1).order("overall_confidence_score",{ascending:!0}).limit(10);if(s){console.error("Error loading face sheets:",s);return}N.value=o||[]},D=async()=>{const{data:o,error:s}=await M.from("face_sheets").select("id, patient_first_name, patient_last_name, approved_by, approved_at").eq("is_approved",!0).order("approved_at",{ascending:!1}).limit(5);if(s){console.error("Error loading approvals:",s);return}h.value=(o||[]).map(i=>({id:i.id,patient_name:`${i.patient_first_name} ${i.patient_last_name}`,approved_by:i.approved_by,approved_at:i.approved_at}))},y=async o=>{const{error:s}=await M.from("face_sheets").update({is_approved:!0,approved_at:new Date().toISOString(),approved_by:"founder"}).eq("id",o);if(s){console.error("Error approving face sheet:",s);return}await O(),await D(),w.value=null},p=o=>{console.log("Request corrections for:",o)},_=o=>{console.log("Send to AI recovery:",o)};return J(()=>{O(),D(),ae(()=>{O()},3e4)}),(o,s)=>(d(),c("div",wa,[e("div",ha,[s[0]||(s[0]=e("h2",null,"Face Sheet Review & Approval",-1)),e("p",$a,l(t(N).length)+" pending face sheets requiring your attention",1)]),t(N).length===0?(d(),c("div",ka,[...s[1]||(s[1]=[e("span",{class:"check-icon"},"âœ…",-1),e("p",null,"No face sheets pending review",-1)])])):(d(),c("div",Ca,[(d(!0),c(B,null,L(t(N),i=>(d(),c("div",{key:i.id,class:U(["face-sheet-card",{expanded:t(w)===i.id}])},[e("div",{class:"card-header",onClick:a=>m(i.id)},[e("div",Ia,[e("div",qa,l(i.patient_first_name)+" "+l(i.patient_last_name),1),e("div",xa,"DOB: "+l(x(i.patient_dob)),1)]),e("div",Ta,[e("span",{class:U(["confidence-score",b(i.overall_confidence_score)])},l(i.overall_confidence_score)+"% ",3),e("span",Na,l(t(w)===i.id?"â–¼":"â–¶"),1)])],8,Sa),t(w)===i.id?(d(),c("div",Da,[e("div",Ea,[e("div",Aa,[s[2]||(s[2]=e("label",null,"Payer:",-1)),e("span",null,l(i.primary_payer_name),1)]),e("div",Oa,[s[3]||(s[3]=e("label",null,"Plan Type:",-1)),e("span",null,l(i.plan_type),1)]),e("div",Va,[s[4]||(s[4]=e("label",null,"Member ID:",-1)),e("span",Ma,l(i.member_id),1)]),e("div",Fa,[s[5]||(s[5]=e("label",null,"Group Number:",-1)),e("span",Ra,l(i.group_number||"â€”"),1)]),i.subscriber_name?(d(),c("div",Ua,[s[6]||(s[6]=e("label",null,"Subscriber:",-1)),e("span",null,l(i.subscriber_name),1)])):k("",!0),i.subscriber_relationship?(d(),c("div",Pa,[s[7]||(s[7]=e("label",null,"Relationship:",-1)),e("span",null,l(i.subscriber_relationship),1)])):k("",!0)]),i.face_sheet_fields?(d(),c("div",za,[s[8]||(s[8]=e("h4",null,"Field Confidence Scores:",-1)),(d(!0),c(B,null,L(i.face_sheet_fields,a=>(d(),c("div",{key:a.id,class:U(["field-confidence-item",{uncertain:a.is_uncertain}])},[e("span",Ba,l(S(a.field_name)),1),e("span",{class:U(["field-score",b(a.field_confidence)])},l(a.field_confidence)+"% ",3),a.is_uncertain?(d(),c("span",La,"Uncertain")):k("",!0)],2))),128))])):k("",!0),e("div",Qa,[e("h4",null,"Source: "+l(i.source_type),1),e("p",ja,l(i.extraction_method),1)]),e("div",Wa,[e("button",{onClick:a=>y(i.id),class:"approve-btn"},"Approve",8,Ha),e("button",{onClick:a=>p(i.id),class:"correct-btn"},"Request Corrections",8,Ga),e("button",{onClick:a=>_(i.id),class:"recovery-btn"},"Send to AI for Recovery",8,Ka)])])):k("",!0)],2))),128))])),t(h).length>0?(d(),c("div",Ja,[s[10]||(s[10]=e("h3",null,"Recent Approvals",-1)),e("div",Ya,[(d(!0),c(B,null,L(t(h),i=>(d(),c("div",{key:i.id,class:"approval-item"},[s[9]||(s[9]=e("span",{class:"check-mark"},"âœ“",-1)),e("span",Xa,l(i.patient_name)+" approved by "+l(i.approved_by),1),e("span",Za,l(E(i.approved_at)),1)]))),128))])])):k("",!0)]))}}),ti=Y(ei,[["__scopeId","data-v-cf007d68"]]),si=()=>{const g=useSupabaseClient(),M=async(p=new Date)=>{const _=p.toISOString().split("T")[0],o=new Date(p);o.setHours(0,0,0,0);const s=new Date(p);s.setHours(23,59,59,999);const[i,a,r,u,n,f,I,F,z]=await Promise.all([C(o,s),N(o,s),h(o,s),w(o,s),x(),E(),S(),b(o,s),m()]),P=f===0&&I===0&&F===0&&z===0,{data:R,error:$}=await g.from("end_of_day_reconciliation").insert({reconciliation_date:_,total_billable_encounters:i,total_face_sheets_created:a,total_face_sheets_approved:r,total_face_sheets_pending:a-r,total_claims_submitted:u,total_claims_in_progress:n,missed_deadlines:f,unresolved_critical_items:I,unlinked_calls:F,blocking_documents:z,all_clear:P,reconciliation_status:"pending"}).select().single();if($)throw $;return{reconciliationId:R.id,summary:{allClear:P,billableEncounters:i,faceSheetStats:{created:a,approved:r,pending:a-r},claimStats:{submitted:u,inProgress:n},issues:{hardBreaches:f,criticalItems:I,unlinkedCalls:F,blockingDocuments:z}},recommendation:P?"All clear. You can close the day.":"Review flagged items before closing."}},C=async(p,_)=>{const{count:o,error:s}=await g.from("queue_billing").select("*",{count:"exact"}).eq("billing_type","epcr_complete").gte("entered_queue_at",p.toISOString()).lte("entered_queue_at",_.toISOString());if(s)throw s;return o||0},N=async(p,_)=>{const{count:o,error:s}=await g.from("face_sheets").select("*",{count:"exact"}).gte("created_at",p.toISOString()).lte("created_at",_.toISOString());if(s)throw s;return o||0},h=async(p,_)=>{const{count:o,error:s}=await g.from("face_sheets").select("*",{count:"exact"}).eq("is_approved",!0).gte("approved_at",p.toISOString()).lte("approved_at",_.toISOString());if(s)throw s;return o||0},w=async(p,_)=>{const{count:o,error:s}=await g.from("queue_billing").select("*",{count:"exact"}).eq("queue_state","submitted").gte("entered_queue_at",p.toISOString()).lte("entered_queue_at",_.toISOString());if(s)throw s;return o||0},x=async()=>{const{count:p,error:_}=await g.from("queue_billing").select("*",{count:"exact"}).eq("queue_state","in_progress");if(_)throw _;return p||0},E=async()=>{const{count:p,error:_}=await g.from("queue_item_sla_tracking").select("*",{count:"exact"}).eq("hard_breach_triggered",!0).eq("hard_breach_acknowledged",!1);if(_)throw _;return p||0},S=async()=>{const{count:p,error:_}=await g.from("priority_scores").select("*",{count:"exact"}).eq("is_critical",!0);if(_)throw _;return p||0},b=async(p,_)=>{const{count:o,error:s}=await g.from("active_calls").select("*",{count:"exact"}).is("linked_claim_id",null).is("linked_invoice_id",null).gte("created_at",p.toISOString()).lte("created_at",_.toISOString());if(s)throw s;return o||0},m=async()=>{const{count:p,error:_}=await g.from("queue_documents").select("*",{count:"exact"}).eq("blocking_workflow",!0);if(_)throw _;return p||0};return{generateEndOfDayReport:M,reviewReconciliation:async(p,_,o="")=>{const{error:s}=await g.from("end_of_day_reconciliation").update({reconciliation_status:"reviewed",reviewed_by:_,reviewed_at:new Date().toISOString(),notes:o}).eq("id",p);if(s)throw s},closeDay:async(p,_)=>{const{error:o}=await g.from("end_of_day_reconciliation").update({reconciliation_status:"closed",reviewed_by:_,reviewed_at:new Date().toISOString()}).eq("id",p);if(o)throw o},getTodaysReconciliation:async()=>{const _=new Date().toISOString().split("T")[0],{data:o,error:s}=await g.from("end_of_day_reconciliation").select("*").eq("reconciliation_date",_).maybeSingle();if(s)throw s;return o},countBillableEncounters:C,countFaceSheets:N,countApprovedFaceSheets:h,countSubmittedClaims:w,countInProgressClaims:x,countHardSLABreaches:E,countUnresolvedCriticalItems:S,countUnlinkedCalls:b,countBlockingDocuments:m}},ni={class:"reconciliation-container"},oi={class:"reconciliation-header"},ai={class:"timestamp"},ii={key:0,class:"loading"},li={key:1,class:"reconciliation-content"},ri={key:0,class:"reconciliation-summary"},di={key:0,class:"check-icon"},ci={key:1,class:"warning-icon"},ui={class:"banner-text"},pi={class:"metrics-grid"},_i={class:"metric-card"},mi={class:"metric-value"},vi={class:"metric-card"},gi={class:"metric-value"},fi={class:"metric-card"},yi={class:"metric-value"},bi={class:"metric-card"},wi={class:"metric-value"},hi={class:"metric-card"},$i={class:"metric-value"},ki={class:"metric-card"},Ci={class:"metric-value"},Si={class:"issues-section"},Ii={key:0,class:"issue-item critical"},qi={class:"issue-content"},xi={key:1,class:"issue-item warning"},Ti={class:"issue-content"},Ni={key:2,class:"issue-item"},Di={class:"issue-content"},Ei={key:3,class:"issue-item"},Ai={class:"issue-content"},Oi={key:4,class:"no-issues"},Vi={class:"action-buttons"},Mi=["disabled"],Fi=K({__name:"EndOfDayReconciliation",setup(g){const{generateEndOfDayReport:M}=si(),C=q(null),N=q(!0),h=y=>y.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),w=te(()=>C.value?C.value.missed_deadlines===0&&C.value.unresolved_critical_items===0&&C.value.unlinked_calls===0&&C.value.blocking_documents===0:!1),x=async()=>{try{N.value=!0;const y=await M();C.value=y.summary}catch(y){console.error("Error generating reconciliation:",y)}finally{N.value=!1}},E=()=>{console.log("View hard breaches")},S=()=>{console.log("View critical items")},b=()=>{console.log("View unlinked calls")},m=()=>{console.log("View blocking documents")},O=()=>{x()},D=async()=>{console.log("Closing day")};return J(()=>{x()}),(y,p)=>(d(),c("div",ni,[e("div",oi,[p[0]||(p[0]=e("h2",null,"End of Day Reconciliation",-1)),e("p",ai,l(h(new Date)),1)]),t(N)?(d(),c("div",ii,"Generating reconciliation...")):(d(),c("div",li,[t(C)?(d(),c("div",ri,[e("div",{class:U(["all-clear-banner",{cleared:t(C).all_clear}])},[t(C).all_clear?(d(),c("span",di,"âœ…")):(d(),c("span",ci,"âš ï¸")),e("div",ui,[e("h3",null,l(t(C).all_clear?"All Clear!":"Items Requiring Attention"),1),e("p",null,l(t(C).all_clear?"You can safely close the day.":`${t(C).missed_deadlines+t(C).unresolved_critical_items} items need review.`),1)])],2),e("div",pi,[e("div",_i,[p[1]||(p[1]=e("span",{class:"metric-icon"},"ðŸ“‹",-1)),p[2]||(p[2]=e("span",{class:"metric-label"},"Billable Encounters",-1)),e("span",mi,l(t(C).total_billable_encounters),1)]),e("div",vi,[p[3]||(p[3]=e("span",{class:"metric-icon"},"ðŸ‘¤",-1)),p[4]||(p[4]=e("span",{class:"metric-label"},"Face Sheets Created",-1)),e("span",gi,l(t(C).total_face_sheets_created),1)]),e("div",fi,[p[5]||(p[5]=e("span",{class:"metric-icon"},"âœ“",-1)),p[6]||(p[6]=e("span",{class:"metric-label"},"Face Sheets Approved",-1)),e("span",yi,l(t(C).total_face_sheets_approved),1)]),e("div",bi,[p[7]||(p[7]=e("span",{class:"metric-icon"},"â³",-1)),p[8]||(p[8]=e("span",{class:"metric-label"},"Face Sheets Pending",-1)),e("span",wi,l(t(C).total_face_sheets_pending),1)]),e("div",hi,[p[9]||(p[9]=e("span",{class:"metric-icon"},"ðŸ“¤",-1)),p[10]||(p[10]=e("span",{class:"metric-label"},"Claims Submitted",-1)),e("span",$i,l(t(C).total_claims_submitted),1)]),e("div",ki,[p[11]||(p[11]=e("span",{class:"metric-icon"},"âŒ›",-1)),p[12]||(p[12]=e("span",{class:"metric-label"},"Claims In Progress",-1)),e("span",Ci,l(t(C).total_claims_in_progress),1)])]),e("div",Si,[p[22]||(p[22]=e("h3",null,"Issues Requiring Attention",-1)),t(C).missed_deadlines>0?(d(),c("div",Ii,[p[14]||(p[14]=e("span",{class:"issue-icon"},"ðŸš¨",-1)),e("div",qi,[p[13]||(p[13]=e("h4",null,"Hard SLA Breaches",-1)),e("p",null,l(t(C).missed_deadlines)+" items have missed hard deadlines",1)]),e("button",{onClick:E,class:"view-btn"},"View")])):k("",!0),t(C).unresolved_critical_items>0?(d(),c("div",xi,[p[16]||(p[16]=e("span",{class:"issue-icon"},"âš ï¸",-1)),e("div",Ti,[p[15]||(p[15]=e("h4",null,"Unresolved Critical Items",-1)),e("p",null,l(t(C).unresolved_critical_items)+" critical items need resolution",1)]),e("button",{onClick:S,class:"view-btn"},"View")])):k("",!0),t(C).unlinked_calls>0?(d(),c("div",Ni,[p[18]||(p[18]=e("span",{class:"issue-icon"},"ðŸ“ž",-1)),e("div",Di,[p[17]||(p[17]=e("h4",null,"Unlinked Calls",-1)),e("p",null,l(t(C).unlinked_calls)+" calls not linked to billing records",1)]),e("button",{onClick:b,class:"view-btn"},"View")])):k("",!0),t(C).blocking_documents>0?(d(),c("div",Ei,[p[20]||(p[20]=e("span",{class:"issue-icon"},"ðŸ“„",-1)),e("div",Ai,[p[19]||(p[19]=e("h4",null,"Blocking Documents",-1)),e("p",null,l(t(C).blocking_documents)+" documents are blocking billing",1)]),e("button",{onClick:m,class:"view-btn"},"View")])):k("",!0),t(w)?(d(),c("div",Oi,[...p[21]||(p[21]=[e("span",null,"âœ… All issues resolved",-1)])])):k("",!0)]),e("div",Vi,[t(C).all_clear?k("",!0):(d(),c("button",{key:0,onClick:O,class:"review-btn"}," Review Issues ")),e("button",{onClick:D,class:"close-btn",disabled:!t(C).all_clear},l(t(C).all_clear?"Close Day":"Cannot close yet"),9,Mi)])])):k("",!0)]))]))}}),Ri=Y(Fi,[["__scopeId","data-v-f6d8b7da"]]),Ui={class:"billing-workspace"},Pi={class:"workspace-header"},zi={class:"workspace-stats"},Bi={class:"stat-box"},Li={class:"stat-value"},Qi={class:"stat-box"},ji={class:"stat-value"},Wi={class:"stat-box"},Hi={class:"stat-value"},Gi={class:"stat-box"},Ki={class:"stat-value"},Ji={class:"workspace-tabs"},Yi=["onClick"],Xi={class:"tab-icon"},Zi={class:"tab-name"},el={key:0,class:"tab-badge"},tl={class:"workspace-content"},sl={class:"tab-content"},nl={class:"overview-section"},ol={class:"overview-grid"},al={class:"overview-card"},il={class:"card-content"},ll={class:"overview-card"},rl={class:"card-content"},dl={class:"overview-card"},cl={class:"card-content"},ul={class:"overview-card"},pl={class:"card-content"},_l={class:"recent-activity"},ml={key:0,class:"no-activity"},vl={key:1,class:"activity-list"},gl={class:"activity-icon"},fl={class:"activity-details"},yl={class:"activity-description"},bl={class:"activity-time"},wl={class:"tab-content"},hl={class:"tab-content"},$l={class:"tab-content"},kl={class:"tab-content"},Cl={class:"tab-content"},Sl={class:"tab-content"},Il={class:"tab-content"},ql={class:"tab-content"},xl={class:"tab-content"},Tl={class:"tab-content"},Nl=K({__name:"billing-workspace",setup(g){const{getWorkspaceDashboard:M,getActivityLog:C}=ie(),N=q("overview"),h=q({totalEmails:0,unreadEmails:0,totalCalls:0,pendingCalls:0,escalatedCalls:0,totalFaxes:0,pendingFaxes:0,totalDocuments:0,draftDocuments:0}),w=q([]),x=te(()=>[{id:"overview",name:"Overview",icon:"ðŸ ",badge:0},{id:"sla",name:"SLA & Priority",icon:"â±ï¸",badge:0},{id:"facesheet",name:"Face Sheets",icon:"ðŸ‘¤",badge:0},{id:"approval",name:"Approvals",icon:"âœ“",badge:0},{id:"queues",name:"Queues",icon:"ðŸ“‹",badge:0},{id:"eod",name:"End of Day",icon:"ðŸŒ™",badge:0},{id:"email",name:"Email",icon:"ðŸ“§",badge:h.value.unreadEmails},{id:"phone",name:"Phone",icon:"ðŸ“ž",badge:h.value.escalatedCalls},{id:"fax",name:"Fax",icon:"ðŸ“ ",badge:h.value.pendingFaxes},{id:"documents",name:"Documents",icon:"ðŸ“„",badge:0},{id:"builders",name:"Builders",icon:"ðŸ”¨",badge:0}]),E=b=>({email_sent:"ðŸ“§",email_received:"ðŸ“¨",call_made:"ðŸ“ž",fax_sent:"ðŸ“ ",document_created:"ðŸ“„",document_edited:"âœï¸",document_finalized:"ðŸ”’"})[b]||"ðŸ“‹",S=b=>{const m=new Date(b),D=new Date().getTime()-m.getTime(),y=Math.floor(D/6e4);return y<1?"Just now":y<60?`${y}m ago`:y<1440?`${Math.floor(y/60)}h ago`:m.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return J(async()=>{h.value=await M(),w.value=await C(10)}),(b,m)=>{const O=Ce,D=et,y=Et,p=ms,_=Gs,o=Nn,s=To,i=ba,a=ti,r=Ri;return d(),c("div",Ui,[e("div",Pi,[m[4]||(m[4]=e("div",{class:"header-content"},[e("h1",null,"Founder Billing Workspace"),e("p",{class:"workspace-subtitle"},"Private billing command center for communications and documents")],-1)),e("div",zi,[e("div",Bi,[e("span",Li,l(t(h).unreadEmails),1),m[0]||(m[0]=e("span",{class:"stat-label"},"Unread Emails",-1))]),e("div",Qi,[e("span",ji,l(t(h).escalatedCalls),1),m[1]||(m[1]=e("span",{class:"stat-label"},"Escalated Calls",-1))]),e("div",Wi,[e("span",Hi,l(t(h).pendingFaxes),1),m[2]||(m[2]=e("span",{class:"stat-label"},"Pending Faxes",-1))]),e("div",Gi,[e("span",Ki,l(t(h).draftDocuments),1),m[3]||(m[3]=e("span",{class:"stat-label"},"Draft Documents",-1))])])]),e("div",Ji,[(d(!0),c(B,null,L(t(x),u=>(d(),c("button",{key:u.id,onClick:n=>N.value=u.id,class:U(["tab-button",{active:t(N)===u.id}])},[e("span",Xi,l(u.icon),1),e("span",Zi,l(u.name),1),u.badge>0?(d(),c("span",el,l(u.badge),1)):k("",!0)],10,Yi))),128))]),Z(O),Z(D),e("div",tl,[V(e("div",sl,[e("div",nl,[m[14]||(m[14]=e("h2",null,"Workspace Overview",-1)),e("div",ol,[e("div",al,[m[6]||(m[6]=e("div",{class:"card-icon"},"ðŸ“§",-1)),e("div",il,[m[5]||(m[5]=e("h3",null,"Email Communications",-1)),e("p",null,l(t(h).totalEmails)+" total emails",1),e("p",null,l(t(h).unreadEmails)+" unread",1)])]),e("div",ll,[m[8]||(m[8]=e("div",{class:"card-icon"},"ðŸ“ž",-1)),e("div",rl,[m[7]||(m[7]=e("h3",null,"AI Phone Calls",-1)),e("p",null,l(t(h).totalCalls)+" total calls",1),e("p",null,l(t(h).pendingCalls)+" pending review",1),e("p",null,l(t(h).escalatedCalls)+" escalated",1)])]),e("div",dl,[m[10]||(m[10]=e("div",{class:"card-icon"},"ðŸ“ ",-1)),e("div",cl,[m[9]||(m[9]=e("h3",null,"Fax Communications",-1)),e("p",null,l(t(h).totalFaxes)+" total faxes",1),e("p",null,l(t(h).pendingFaxes)+" pending",1)])]),e("div",ul,[m[12]||(m[12]=e("div",{class:"card-icon"},"ðŸ“„",-1)),e("div",pl,[m[11]||(m[11]=e("h3",null,"Documents",-1)),e("p",null,l(t(h).totalDocuments)+" total documents",1),e("p",null,l(t(h).draftDocuments)+" drafts",1)])])]),e("div",_l,[m[13]||(m[13]=e("h3",null,"Recent Activity",-1)),t(w).length===0?(d(),c("div",ml," No recent activity ")):(d(),c("div",vl,[(d(!0),c(B,null,L(t(w),u=>(d(),c("div",{key:u.id,class:"activity-item"},[e("span",gl,l(E(u.activity_type)),1),e("div",fl,[e("span",yl,l(u.activity_description),1),e("span",bl,l(S(u.created_at)),1)])]))),128))]))]),m[15]||(m[15]=ne('<div class="workspace-info" data-v-9d657fdd><h3 data-v-9d657fdd>About This Workspace</h3><div class="info-content" data-v-9d657fdd><p data-v-9d657fdd>This is a private, founder-only workspace for billing operations.</p><ul data-v-9d657fdd><li data-v-9d657fdd><strong data-v-9d657fdd>Email:</strong> Internal billing communications via Malibu</li><li data-v-9d657fdd><strong data-v-9d657fdd>AI Phone:</strong> Human-quality voice assistant for insurance calls</li><li data-v-9d657fdd><strong data-v-9d657fdd>Fax:</strong> Compliance and legacy payer requirements</li><li data-v-9d657fdd><strong data-v-9d657fdd>Documents:</strong> Cloud-based office suite with version control</li></ul><p class="security-note" data-v-9d657fdd>ðŸ”’ All content is encrypted, audited, and immutable when finalized</p></div></div>',1))])],512),[[G,t(N)==="overview"]]),V(e("div",wl,[Z(y)],512),[[G,t(N)==="email"]]),V(e("div",hl,[Z(p)],512),[[G,t(N)==="phone"]]),V(e("div",$l,[Z(_)],512),[[G,t(N)==="fax"]]),V(e("div",kl,[Z(o)],512),[[G,t(N)==="documents"]]),V(e("div",Cl,[Z(s)],512),[[G,t(N)==="queues"]]),V(e("div",Sl,[Z(i)],512),[[G,t(N)==="builders"]]),V(e("div",Il,[...m[16]||(m[16]=[e("div",{class:"sla-dashboard"},[e("h2",null,"SLA Timers & Priority Scoring"),e("p",{class:"subtitle"},"Real-time SLA tracking across all queues with priority escalation"),e("div",{class:"sla-info"},[e("p",null,"SLA timers and priority scores are automatically calculated and updated in real-time."),e("p",null,"Each queue item has a target response time, soft breach threshold, and hard breach threshold."),e("p",null,"Hard SLA breaches require immediate acknowledgment and appear at the top of all queues.")])],-1)])],512),[[G,t(N)==="sla"]]),V(e("div",ql,[Z(a)],512),[[G,t(N)==="facesheet"]]),V(e("div",xl,[...m[17]||(m[17]=[ne('<div class="approval-dashboard" data-v-9d657fdd><h2 data-v-9d657fdd>One-Click Approvals</h2><p class="subtitle" data-v-9d657fdd>Review and approve AI decisions with minimal friction</p><div class="approval-info" data-v-9d657fdd><p data-v-9d657fdd>Confidence scoring determines approval workflow:</p><ul data-v-9d657fdd><li data-v-9d657fdd><strong data-v-9d657fdd>High (90-100%):</strong> Auto-approved, no action needed</li><li data-v-9d657fdd><strong data-v-9d657fdd>Medium (70-89%):</strong> One-click approval with uncertainty highlighted</li><li data-v-9d657fdd><strong data-v-9d657fdd>Low (&lt;70%):</strong> Blocked for AI recovery or human correction</li></ul></div></div>',1)])],512),[[G,t(N)==="approval"]]),V(e("div",Tl,[Z(r)],512),[[G,t(N)==="eod"]])])])}}}),Al=Y(Nl,[["__scopeId","data-v-9d657fdd"]]);export{Al as default};

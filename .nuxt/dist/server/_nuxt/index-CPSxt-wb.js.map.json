{"file":"index-CPSxt-wb.js","mappings":";;;;;;;;;;;;;;;;AAAO,MAAM,SAAS,MAAM;AAC1B,QAAM,EAAE,UAAA,IAAc,WAAA;AACtB,QAAM,OAAO,QAAA;AAEb,QAAM,gBAAgB,IAA0B,IAAI;AACpD,QAAM,cAAc,IAAwB,IAAI;AAChD,QAAM,iBAAiB,IAAI,KAAK;AAChC,QAAM,iBAAiB,IAAS,IAAI;AAEpC,QAAM,oBAAoB,OACxB,WACA,UAKI,CAAA,MACD;AACH,UAAM,OAAO,MAAM,KAAK,QAAA;AACxB,QAAI,CAAC,MAAM;AACT,aAAO,EAAE,SAAS,OAAO,OAAO,oBAAA;AAAA,IAClC;AAEA,UAAM,EAAE,MAAM,SAAA,IAAa,MAAM,UAC9B,KAAK,aAAa,EAClB,OAAO,IAAI,EACX,GAAG,WAAW,KAAK,EAAE,EACrB,YAAA;AAEH,UAAM,EAAE,MAAM,QAAA,IAAY,MAAM,UAC7B,KAAK,cAAc,EACnB,OAAO,GAAG,EACV,GAAG,MAAM,SAAS,EAClB,OAAA;AAEH,QAAI,CAAC,SAAS;AACZ,aAAO,EAAE,SAAS,OAAO,OAAO,oBAAA;AAAA,IAClC;AAEA,QAAI,QAAQ,sBAAsB,CAAC,QAAQ,aAAa;AACtD,aAAO,EAAE,SAAS,OAAO,OAAO,kBAAA;AAAA,IAClC;AAEA,QAAI,QAAQ,sBAAsB,QAAQ,aAAa;AACrD,YAAM,UACH,KAAK,cAAc,EACnB,OAAO;AAAA,QACN,WAAU,oBAAI,KAAA,GAAO,YAAA;AAAA,QACrB,gBAAgB,KAAK;AAAA,MAAA,CACtB,EACA,GAAG,cAAc,SAAS,EAC1B,GAAG,YAAY,IAAI;AAAA,IACxB;AAEA,UAAM,EAAE,MAAM,SAAS,MAAA,IAAU,MAAM,UACpC,KAAK,cAAc,EACnB,OAAO;AAAA,MACN,YAAY;AAAA,MACZ,eAAe,QAAQ,eAAe;AAAA,MACtC,YAAY,KAAK;AAAA,MACjB,iBAAiB,UAAU,MAAM;AAAA,MACjC,UAAU,QAAQ,YAAY;AAAA,MAC9B,cAAc,QAAQ,eAAe;AAAA,MACrC,cAAc,QAAQ,UAAU,OAAO;AAAA,MACvC,cAAc,QAAQ,UAAU,OAAO;AAAA,MACvC,kBAAkB,QAAQ,UAAU,WAAW;AAAA,IAAA,CAChD,EACA,OAAA,EACA,OAAA;AAEH,QAAI,OAAO;AACT,cAAQ,MAAM,gCAAgC,KAAK;AACnD,aAAO,EAAE,SAAS,OAAO,OAAO,MAAM,QAAA;AAAA,IACxC;AAEA,UAAM,UACH,KAAK,cAAc,EACnB,OAAO;AAAA,MACN,oBAAoB,KAAK;AAAA,MACzB,sBAAqB,oBAAI,KAAA,GAAO,YAAA;AAAA,IAAY,CAC7C,EACA,GAAG,MAAM,SAAS;AAErB,mBAAe,QAAQ;AACvB,mBAAe,QAAQ;AAEvB,QAAI;AACF,kBAAY,QAAQ,MAAM,SAAU,aAAa,aAAa,EAAE,OAAO,MAAM;AAC7E,qBAAe,QAAQ,EAAE;AAAA,IAC3B,SAAS,KAAK;AACZ,cAAQ,MAAM,gCAAgC,GAAG;AAAA,IACnD;AAEA,WAAO,EAAE,SAAS,MAAM,QAAA;AAAA,EAC1B;AAEA,QAAM,kBAAkB,YAAY;AAClC,QAAI,CAAC,eAAe,OAAO;AACzB,aAAO,EAAE,SAAS,OAAO,OAAO,oBAAA;AAAA,IAClC;AAEA,UAAM,8BAAc,KAAA;AACpB,UAAM,YAAY,IAAI,KAAK,eAAe,MAAM,UAAU;AAC1D,UAAM,kBAAkB,KAAK,OAAO,QAAQ,YAAY,UAAU,QAAA,KAAa,GAAI;AAEnF,UAAM,UACH,KAAK,cAAc,EACnB,OAAO;AAAA,MACN,UAAU,QAAQ,YAAA;AAAA,MAClB,kBAAkB;AAAA,IAAA,CACnB,EACA,GAAG,MAAM,eAAe,MAAM,EAAE;AAEnC,UAAM,UACH,KAAK,cAAc,EACnB,OAAO;AAAA,MACN,oBAAoB;AAAA,MACpB,qBAAqB;AAAA,IAAA,CACtB,EACA,GAAG,MAAM,eAAe,MAAM,UAAU;AAE3C,kBAAA;AAEA,QAAI,YAAY,OAAO;AACrB,kBAAY,MAAM,YAAY,QAAQ,CAAA,UAAS,MAAM,MAAM;AAC3D,kBAAY,QAAQ;AAAA,IACtB;AAEA,mBAAe,QAAQ;AACvB,mBAAe,QAAQ;AAEvB,WAAO,EAAE,SAAS,KAAA;AAAA,EACpB;AAEA,QAAM,iBAAiB,CAAC,cAAsB;AAC5C,QAAI,CAAC,YAAY,MAAO;AAExB,UAAM,SAAiB,CAAA;AACvB,kBAAc,QAAQ,IAAI,cAAc,YAAY,KAAK;AAEzD,kBAAc,MAAM,kBAAkB,CAAC,UAAU;AAC/C,UAAI,MAAM,KAAK,OAAO,GAAG;AACvB,eAAO,KAAK,MAAM,IAAI;AAAA,MACxB;AAAA,IACF;AAEA,kBAAc,MAAM,SAAS,YAAY;AACvC,YAAM,OAAO,IAAI,KAAK,QAAQ,EAAE,MAAM,cAAc;AACpD,YAAM,cAAc,WAAW,IAAI;AAAA,IACrC;AAEA,kBAAc,MAAM,MAAM,GAAG;AAAA,EAC/B;AAEA,QAAM,gBAAgB,MAAM;AAC1B,QAAI,cAAc,SAAS,cAAc,MAAM,UAAU,YAAY;AACnE,oBAAc,MAAM,KAAA;AAAA,IACtB;AAAA,EACF;AAEA,QAAM,gBAAgB,OAAO,WAAmB,cAAoB;AAClE,UAAM,OAAO,MAAM,KAAK,QAAA;AACxB,QAAI,CAAC,KAAM;AAEX,UAAM,EAAE,MAAM,QAAA,IAAY,MAAM,UAC7B,KAAK,cAAc,EACnB,OAAO,0CAA0C,EACjD,GAAG,MAAM,SAAS,EAClB,OAAA;AAEH,QAAI,CAAC,QAAS;AAEd,UAAM,WAAW,OAAO,SAAS,IAAI,KAAK,KAAK;AAC/C,UAAM,gBAAgB,UAAU;AAChC,UAAM,kBAAkB,QAAQ,oBAAoB;AAEpD,UAAM,UACH,KAAK,gBAAgB,EACrB,OAAO;AAAA,MACN,YAAY;AAAA,MACZ,iBAAiB,QAAQ,QAAQ;AAAA,MACjC,cAAc;AAAA,MACd,iBAAiB;AAAA,MACjB,kBAAkB;AAAA,MAClB,QAAQ;AAAA,MACR,cAAc;AAAA,IAAA,CACf;AAAA,EACL;AAEA,QAAM,iBAAiB,OAAO,QAAgB,UAK1C,CAAA,MAAO;AACT,UAAM,OAAO,MAAM,KAAK,QAAA;AACxB,QAAI,CAAC,KAAM;AAEX,UAAM,EAAE,MAAM,SAAA,IAAa,MAAM,UAC9B,KAAK,aAAa,EAClB,OAAO,IAAI,EACX,GAAG,WAAW,KAAK,EAAE,EACrB,YAAA;AAEH,UAAM,EAAE,MAAM,SAAA,IAAa,MAAM,UAC9B,KAAK,cAAc,EACnB,OAAO,IAAI,EACX,GAAG,WAAW,KAAK,EAAE,EACrB,YAAA;AAEH,UAAM,eAAe;AAAA,MACnB,SAAS,KAAK;AAAA,MACd,SAAS,UAAU,MAAM;AAAA,MACzB;AAAA,MACA,gBAAgB,QAAQ,gBAAgB;AAAA,MACxC,oBAAoB,QAAQ,aAAa;AAAA,MACzC,uBAAuB,QAAQ,eAAe;AAAA,MAC9C,cAAc,QAAQ,UAAU,OAAO;AAAA,MACvC,cAAc,QAAQ,UAAU,OAAO;AAAA,MACvC,iBAAgB,oBAAI,KAAA,GAAO,YAAA;AAAA,MAC3B,aAAY,oBAAI,KAAA,GAAO,YAAA;AAAA,IAAY;AAGrC,QAAI,UAAU;AACZ,YAAM,UACH,KAAK,cAAc,EACnB,OAAO,YAAY,EACnB,GAAG,MAAM,SAAS,EAAE;AAAA,IACzB,OAAO;AACL,YAAM,UACH,KAAK,cAAc,EACnB,OAAO,YAAY;AAAA,IACxB;AAAA,EACF;AAEA,QAAM,oBAAoB,OAAO,mBAA2B;AAC1D,UAAM,EAAE,MAAM,UAAU,MAAM,UAC3B,KAAK,cAAc,EACnB,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMP,EACA,GAAG,UAAU,QAAQ,EACrB,IAAI,kBAAkB,IAAI,KAAK,KAAK,QAAQ,IAAI,KAAK,GAAI,EAAE,aAAa;AAE3E,QAAI,OAAO;AACT,cAAQ,MAAM,6BAA6B,KAAK;AAChD,aAAO,CAAA;AAAA,IACT;AAEA,WAAO,QAAQ,CAAA;AAAA,EACjB;AAEA,QAAM,6BAA6B,OAAO,cAQpC;AACJ,UAAM,OAAO,MAAM,KAAK,QAAA;AACxB,QAAI,CAAC,MAAM;AACT,aAAO,EAAE,SAAS,OAAO,OAAO,oBAAA;AAAA,IAClC;AAEA,UAAM,EAAE,MAAM,UAAU,MAAM,UAC3B,KAAK,sBAAsB,EAC3B,OAAO;AAAA,MACN,iBAAiB,UAAU;AAAA,MAC3B,cAAc,KAAK;AAAA,MACnB,gBAAgB,UAAU;AAAA,MAC1B,UAAU;AAAA,MACV,OAAO,UAAU;AAAA,MACjB,SAAS,UAAU;AAAA,MACnB,aAAa,UAAU,cAAc;AAAA,MACrC,cAAc,UAAU,eAAe;AAAA,MACvC,qBAAqB,UAAU,UAAU,OAAO;AAAA,MAChD,qBAAqB,UAAU,UAAU,OAAO;AAAA,MAChD,yBAAyB;AAAA,IAAA,CAC1B,EACA,OAAA,EACA,OAAA;AAEH,QAAI,OAAO;AACT,cAAQ,MAAM,2CAA2C,KAAK;AAC9D,aAAO,EAAE,SAAS,OAAO,OAAO,MAAM,QAAA;AAAA,IACxC;AAEA,WAAO,EAAE,SAAS,MAAM,KAAA;AAAA,EAC1B;AAEA,QAAM,gCAAgC,OACpC,aACA,UAGI,CAAA,MACD;AACH,UAAM,OAAO,MAAM,KAAK,QAAA;AACxB,QAAI,CAAC,MAAM;AACT,aAAO,EAAE,SAAS,OAAO,OAAO,oBAAA;AAAA,IAClC;AAEA,UAAM,EAAE,MAAM,SAAA,IAAa,MAAM,UAC9B,KAAK,aAAa,EAClB,OAAO,IAAI,EACX,GAAG,WAAW,KAAK,EAAE,EACrB,YAAA;AAEH,UAAM,EAAE,UAAU,MAAM,UACrB,KAAK,0BAA0B,EAC/B,OAAO;AAAA,MACN,cAAc;AAAA,MACd,SAAS,KAAK;AAAA,MACd,SAAS,UAAU,MAAM;AAAA,MACzB,cAAc,QAAQ,UAAU,OAAO;AAAA,MACvC,cAAc,QAAQ,UAAU,OAAO;AAAA,MACvC,OAAO,QAAQ,SAAS;AAAA,IAAA,CACzB;AAEH,QAAI,OAAO;AACT,cAAQ,MAAM,8CAA8C,KAAK;AACjE,aAAO,EAAE,SAAS,OAAO,OAAO,MAAM,QAAA;AAAA,IACxC;AAEA,UAAM,UAAU,IAAI,aAAa;AAAA,MAC/B,YAAY;AAAA,MACZ,QAAQ;AAAA,MACR,aAAa;AAAA,IAAA,CACd;AAED,WAAO,EAAE,SAAS,KAAA;AAAA,EACpB;AAEA,QAAM,oBAAoB,OAAO,WAAmB,QAAgB,OAAO;AACzE,UAAM,EAAE,MAAM,UAAU,MAAM,UAC3B,KAAK,cAAc,EACnB,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,OAKP,EACA,GAAG,cAAc,SAAS,EAC1B,MAAM,cAAc,EAAE,WAAW,MAAA,CAAO,EACxC,MAAM,KAAK;AAEd,QAAI,OAAO;AACT,cAAQ,MAAM,oCAAoC,KAAK;AACvD,aAAO,CAAA;AAAA,IACT;AAEA,WAAO,QAAQ,CAAA;AAAA,EACjB;AAEA,QAAM,qBAAqB,CACzB,WACA,cAIG;AACH,UAAM,UAAU,UACb,QAAQ,eAAe,SAAS,EAAE,EAClC;AAAA,MACC;AAAA,MACA;AAAA,QACE,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,QAAQ,iBAAiB,SAAS;AAAA,MAAA;AAAA,MAEpC,CAAC,YAAY;AACX,YAAI,UAAU,qBAAqB;AACjC,oBAAU,oBAAoB,QAAQ,GAAG;AAAA,QAC3C;AAAA,MACF;AAAA,IAAA,EAED;AAAA,MACC;AAAA,MACA;AAAA,QACE,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,QAAQ,iBAAiB,SAAS;AAAA,MAAA;AAAA,MAEpC,CAAC,YAAY;AACX,YAAI,QAAQ,IAAI,YAAY,UAAU,mBAAmB;AACvD,oBAAU,kBAAkB,QAAQ,GAAG;AAAA,QACzC;AAAA,MACF;AAAA,IAAA,EAED,UAAA;AAEH,WAAO,MAAM;AACX,gBAAU,cAAc,OAAO;AAAA,IACjC;AAAA,EACF;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;AChaO,MAAM,gBAAgB,MAAM;AACjC,QAAM,EAAE,UAAA,IAAc,WAAA;AACtB,QAAM,OAAO,QAAA;AAEb,QAAM,gBAAgB,OAAO,mBAA2B;AACtD,UAAM,EAAE,MAAM,UAAU,MAAM,UAC3B,KAAK,aAAa,EAClB,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQP,EACA,GAAG,mBAAmB,cAAc,EACpC,GAAG,aAAa,IAAI,EACpB,MAAM,kBAAkB,EAAE,WAAW,OAAO;AAE/C,QAAI,OAAO;AACT,cAAQ,MAAM,gCAAgC,KAAK;AACnD,aAAO,CAAA;AAAA,IACT;AAEA,WAAO,QAAQ,CAAA;AAAA,EACjB;AAEA,QAAM,eAAe,OAAO,YAAoB;AAC9C,UAAM,EAAE,MAAM,UAAU,MAAM,UAC3B,KAAK,aAAa,EAClB,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAWP,EACA,GAAG,MAAM,OAAO,EAChB,OAAA;AAEH,QAAI,OAAO;AACT,cAAQ,MAAM,+BAA+B,KAAK;AAClD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAEA,QAAM,kBAAkB,OAAO,UAWzB;AACJ,UAAM,OAAO,MAAM,KAAK,QAAA;AACxB,QAAI,CAAC,MAAM;AACT,aAAO,EAAE,SAAS,OAAO,OAAO,oBAAA;AAAA,IAClC;AAEA,UAAM,EAAE,MAAM,WAAW,OAAO,WAAA,IAAe,MAAM,UAClD,KAAK,aAAa,EAClB,OAAO;AAAA,MACN,iBAAiB,MAAM;AAAA,MACvB,YAAY,MAAM;AAAA,MAClB,YAAY,MAAM,aAAa;AAAA,MAC/B,aAAa,MAAM,eAAe;AAAA,MAClC,gBAAgB,MAAM,iBAAiB;AAAA,MACvC,cAAc,MAAM,eAAe;AAAA,MACnC,WAAW,MAAM,YAAY;AAAA,MAC7B,YAAY,KAAK;AAAA,MACjB,aAAa,MAAM,cAAc;AAAA,MACjC,SAAS,MAAM,WAAW;AAAA,MAC1B,aAAa,MAAM,cAAc;AAAA,IAAA,CAClC,EACA,OAAA,EACA,OAAA;AAEH,QAAI,YAAY;AACd,cAAQ,MAAM,gCAAgC,UAAU;AACxD,aAAO,EAAE,SAAS,OAAO,OAAO,WAAW,QAAA;AAAA,IAC7C;AAEA,UAAM,EAAE,MAAM,aAAa,OAAO,aAAA,IAAiB,MAAM,UACtD,KAAK,cAAc,EACnB,OAAO;AAAA,MACN,iBAAiB,MAAM;AAAA,MACvB,eAAe,UAAU;AAAA,MACzB,cAAc;AAAA,MACd,cAAc,MAAM;AAAA,MACpB,cAAc,MAAM,eAAe;AAAA,MACnC,gBAAgB,MAAM,iBAAiB;AAAA,IAAA,CACxC,EACA,OAAA,EACA,OAAA;AAEH,QAAI,cAAc;AAChB,cAAQ,MAAM,iCAAiC,YAAY;AAAA,IAC7D;AAEA,QAAI,MAAM,UAAU;AAClB,YAAM,cAAc,UAAU,EAAE;AAAA,IAClC;AAEA,WAAO,EAAE,SAAS,MAAM,MAAM,UAAA;AAAA,EAChC;AAEA,QAAM,gBAAgB,OAAO,SAAiB,OAAe,aAAa;AACxE,UAAM,OAAO,MAAM,KAAK,QAAA;AACxB,QAAI,CAAC,MAAM;AACT,aAAO,EAAE,SAAS,OAAO,OAAO,oBAAA;AAAA,IAClC;AAEA,UAAM,EAAE,MAAM,SAAA,IAAa,MAAM,UAC9B,KAAK,aAAa,EAClB,OAAO,IAAI,EACX,GAAG,WAAW,KAAK,EAAE,EACrB,YAAA;AAEH,UAAM,EAAE,MAAM,aAAa,MAAM,UAC9B,KAAK,oBAAoB,EACzB,OAAO,eAAe,EACtB,GAAG,iBAAiB,OAAO,EAC3B,GAAG,WAAW,KAAK,EAAE,EACrB,YAAA;AAEH,QAAI,UAAU;AACZ,UAAI,CAAC,SAAS,WAAW;AACvB,cAAM,UACH,KAAK,oBAAoB,EACzB,OAAO;AAAA,UACN,WAAW;AAAA,UACX,YAAW,oBAAI,KAAA,GAAO,YAAA;AAAA,UACtB,SAAS;AAAA,QAAA,CACV,EACA,GAAG,MAAM,SAAS,EAAE;AAAA,MACzB;AACA,aAAO,EAAE,SAAS,KAAA;AAAA,IACpB;AAEA,UAAM,EAAE,UAAU,MAAM,UACrB,KAAK,oBAAoB,EACzB,OAAO;AAAA,MACN,eAAe;AAAA,MACf,SAAS,KAAK;AAAA,MACd,SAAS,UAAU,MAAM;AAAA,MACzB;AAAA,IAAA,CACD;AAEH,QAAI,OAAO;AACT,cAAQ,MAAM,8BAA8B,KAAK;AACjD,aAAO,EAAE,SAAS,OAAO,OAAO,MAAM,QAAA;AAAA,IACxC;AAEA,WAAO,EAAE,SAAS,KAAA;AAAA,EACpB;AAEA,QAAM,iBAAiB,OAAO,YAAoB;AAChD,UAAM,OAAO,MAAM,KAAK,QAAA;AACxB,QAAI,CAAC,MAAM;AACT,aAAO,EAAE,SAAS,OAAO,OAAO,oBAAA;AAAA,IAClC;AAEA,UAAM,EAAE,UAAU,MAAM,UACrB,KAAK,oBAAoB,EACzB,OAAO;AAAA,MACN,WAAW;AAAA,MACX,UAAS,oBAAI,KAAA,GAAO,YAAA;AAAA,IAAY,CACjC,EACA,GAAG,iBAAiB,OAAO,EAC3B,GAAG,WAAW,KAAK,EAAE;AAExB,QAAI,OAAO;AACT,cAAQ,MAAM,+BAA+B,KAAK;AAClD,aAAO,EAAE,SAAS,OAAO,OAAO,MAAM,QAAA;AAAA,IACxC;AAEA,WAAO,EAAE,SAAS,KAAA;AAAA,EACpB;AAEA,QAAM,kBAAkB,YAAY;AAClC,UAAM,OAAO,MAAM,KAAK,QAAA;AACxB,QAAI,CAAC,KAAM,QAAO,CAAA;AAElB,UAAM,EAAE,MAAM,UAAU,MAAM,UAC3B,KAAK,oBAAoB,EACzB,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASP,EACA,GAAG,WAAW,KAAK,EAAE,EACrB,GAAG,aAAa,IAAI;AAEvB,QAAI,OAAO;AACT,cAAQ,MAAM,qCAAqC,KAAK;AACxD,aAAO,CAAA;AAAA,IACT;AAEA,WAAO,MAAM,IAAI,CAAA,MAAK,EAAE,UAAU,KAAK,CAAA;AAAA,EACzC;AAEA,QAAM,qBAAqB,OAAO,YAAoB;AACpD,UAAM,EAAE,MAAM,UAAU,MAAM,UAC3B,KAAK,cAAc,EACnB,OAAO;AAAA;AAAA;AAAA;AAAA,OAIP,EACA,GAAG,iBAAiB,OAAO,EAC3B,GAAG,aAAa,IAAI,EACpB,YAAA;AAEH,QAAI,OAAO;AACT,cAAQ,MAAM,sCAAsC,KAAK;AACzD,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAEA,QAAM,sBAAsB,OAAO,cAAsB,mBAA2B;AAClF,UAAM,OAAO,MAAM,KAAK,QAAA;AACxB,QAAI,CAAC,MAAM;AACT,aAAO,EAAE,SAAS,OAAO,OAAO,oBAAA;AAAA,IAClC;AAEA,UAAM,cAAc,WAAW,KAAK,EAAE,QAAQ,YAAY;AAE1D,UAAM,EAAE,MAAM,UAAU,MAAM,UAC3B,KAAK,cAAc,EACnB,OAAO;AAAA,MACN,iBAAiB;AAAA,MACjB,cAAc;AAAA,MACd,cAAc;AAAA,MACd,gBAAgB;AAAA,IAAA,CACjB,EACA,OAAA,EACA,OAAA;AAEH,QAAI,OAAO;AACT,cAAQ,MAAM,oCAAoC,KAAK;AACvD,aAAO,EAAE,SAAS,OAAO,OAAO,MAAM,QAAA;AAAA,IACxC;AAEA,WAAO,EAAE,SAAS,MAAM,KAAA;AAAA,EAC1B;AAEA,QAAM,sBAAsB,OAAO,mBAA2B;AAC5D,UAAM,EAAE,MAAM,UAAU,MAAM,UAC3B,KAAK,sBAAsB,EAC3B,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOP,EACA,GAAG,mBAAmB,cAAc,EACpC,GAAG,aAAa,IAAI,EACpB,MAAM,cAAc,EAAE,WAAW,OAAO;AAE3C,QAAI,OAAO;AACT,cAAQ,MAAM,sCAAsC,KAAK;AACzD,aAAO,CAAA;AAAA,IACT;AAEA,WAAO,QAAQ,CAAA;AAAA,EACjB;AAEA,QAAM,kBAAkB,OACtB,SACA,YAMG;AACH,UAAM,EAAE,UAAU,MAAM,UACrB,KAAK,aAAa,EAClB,OAAO;AAAA,MACN,YAAY,QAAQ;AAAA,MACpB,aAAa,QAAQ;AAAA,MACrB,gBAAgB,QAAQ;AAAA,MACxB,WAAW,QAAQ;AAAA,MACnB,aAAY,oBAAI,KAAA,GAAO,YAAA;AAAA,IAAY,CACpC,EACA,GAAG,MAAM,OAAO;AAEnB,QAAI,OAAO;AACT,cAAQ,MAAM,gCAAgC,KAAK;AACnD,aAAO,EAAE,SAAS,OAAO,OAAO,MAAM,QAAA;AAAA,IACxC;AAEA,WAAO,EAAE,SAAS,KAAA;AAAA,EACpB;AAEA,QAAM,kBAAkB,OAAO,YAAoB;AACjD,UAAM,EAAE,UAAU,MAAM,UACrB,KAAK,aAAa,EAClB,OAAO;AAAA,MACN,WAAW;AAAA,MACX,aAAY,oBAAI,KAAA,GAAO,YAAA;AAAA,IAAY,CACpC,EACA,GAAG,MAAM,OAAO;AAEnB,QAAI,OAAO;AACT,cAAQ,MAAM,gCAAgC,KAAK;AACnD,aAAO,EAAE,SAAS,OAAO,OAAO,MAAM,QAAA;AAAA,IACxC;AAEA,WAAO,EAAE,SAAS,KAAA;AAAA,EACpB;AAEA,QAAM,8BAA8B,CAClC,gBACA,aACG;AACH,UAAM,UAAU,UACb,QAAQ,aAAa,EACrB;AAAA,MACC;AAAA,MACA;AAAA,QACE,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,QAAQ,sBAAsB,cAAc;AAAA,MAAA;AAAA,MAE9C,CAAC,YAAY;AACX,iBAAS,QAAQ,GAAG;AAAA,MACtB;AAAA,IAAA,EAED,UAAA;AAEH,WAAO,MAAM;AACX,gBAAU,cAAc,OAAO;AAAA,IACjC;AAAA,EACF;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;;;;;;;;ACvGA,UAAM,MAAM,OAAA;AACO,kBAAA;AAEnB,UAAM,eAAe,IAAW,EAAE;AAClC,UAAM,gBAAgB,IAAW,EAAE;AACnC,UAAM,kBAAkB,IAAI,EAAE;AAC9B,UAAM,iBAAiB,IAAS,IAAI;AACpC,UAAM,cAAc,IAAW,EAAE;AACjC,UAAM,iBAAiB,IAAW,EAAE;AACpC,UAAM,mBAAmB,IAAW,EAAE;AACtC,UAAM,iBAAiB,IAAI,KAAK;AAChC,UAAM,cAAc,IAAI,KAAK;AAC7B,UAAM,qBAAqB,IAAI,KAAK;AACpC,UAAM,kBAAkB,IAAI,KAAK;AACjC,UAAM,yBAAyB,IAAiB,oBAAI,KAAK;AAEzD,UAAM,qBAAqB,IAAI;AAAA,MAC7B,MAAM;AAAA,MACN,OAAO;AAAA,MACP,SAAS;AAAA,MACT,OAAO;AAAA,IAAA,CACR;AAgGD,UAAM,kBAAkB,CAAC,gBAAwB;AAC/C,aAAO,uBAAuB,MAAM,IAAI,WAAW;AAAA,IACrD;AAYA,UAAM,WAAW,CAAC,YAAoB;AACpC,aAAO,aAAa,MAAM,KAAK,CAAA,MAAK,EAAE,OAAO,OAAO;AAAA,IACtD;AAEA,UAAM,aAAa,CAAC,cAAsB;AACxC,aAAO,IAAI,KAAK,SAAS,EAAE,mBAAA;AAAA,IAC7B;AAEA,UAAM,MAAM,eAAe,OAAO,oBAAoB,CAAC,eAAe;AACpE,kBAAY,QAAQ,CAAC,CAAC,cAAc,eAAe,IAAI,eAAe,OAAO;AAAA,IAC/E,CAAC;;mBAzZMA,eAAAC,WAAA,EAAA,OAAM,eAAA,GAAc,MAAA,CAAA,4kBAiBAC,MAAA,eAAA,CAAe,oBAAfA,MAAA,eAAA,GAAe,EAAA,kBAAfA,MAAA,eAAA,GAAe,EAAA,CAAA,IAAA,cAAA;AAENC,oBAAAD,MAAA,YAAA,IAAT,UAAK;sCAAmC,SAAO,MAAM,EAAE,wDAFvDA,MAAA,eAAA,CAAe,oBAAfA,MAAA,eAAA,GAE+C,MAAM,EAAE,kBAFvDA,MAAA,eAAA,GAE+C,MAAM,EAAE,CAAA,IAAA,cAAA,MACjEE,eAAA,MAAM,UAAU,KAChBA,eAAA,MAAM,iBAAc,IAAA,gBAAA,EAAA;;;UAKlBF,MAAA,cAAA,GAAc;AAES,cAAA,oIAAAE,eAAAF,MAAA,cAAA,EAAe,YAAY,CAAA,SAAA;AAC7C,YAAAA,MAAA,cAAA,EAAe,cAAY;;;;;AACJ,cAAA,mDAAAE,eAAAF,MAAA,WAAA,EAAY,MAAM,CAAA,sBAAA;AAG5C,YAAAA,MAAA,cAAA,EAAe,oBAAkB;iKAEjCA,MAAA,cAAA,EAAe,iBAAiB,aAAS,SAAA,CAAA,8BAAA;AAAA,oBAGnCA,MAAA,cAAA,GAAc;;;;;;;;;;UAOvBA,MAAA,cAAA,GAAc;wEAMaA,MAAA,cAAA,GAAc,UAAA,CAAaA,MAAA,cAAA,KAAkBA,MAAA,WAAA,EAAA,CAAW,CAAA,KAC7EG,sBAAA,CAAAH,MAAA,cAAA,KAAkBA,MAAA,WAAA,CAAW,IAAA,cAAA;aAG3BA,MAAA,cAAA,GAAc;;;;;6EAavBA,MAAA,cAAA,IAAc,iBAAA,cAAA,CAAA,8EAAA;AAAA;;;;AAUZ,UAAAA,MAAA,gBAAA,EAAiB,SAAM,GAAA;;AAEVC,sBAAAD,MAAA,gBAAA,IAAb,cAAS;2JAKcE,eAAA,UAAU,cAAc,mEACxB,WAAW,UAAU,UAAU,CAAA,0DAEjCA,eAAA,UAAU,KAAK,qDACbA,eAAA,UAAU,OAAO;eAEtC,gBAAgB,UAAU,EAAE,GAAA;mFAInBA,eAAA,UAAU,kBAAkB,KAAOA,eAAAF,MAAA,WAAA,EAAY,MAAM;;;;;;;;;;AAOpD,YAAA,+EAAAE,eAAAF,MAAA,WAAA,EAAY,MAAM,CAAA,wDAAA;AAGhBC,oBAAAD,MAAA,WAAA,IAAZ,aAAQ;6BAGKI,eAAA,CAAA,EAAA,UAAA,SAAS,YAAYJ,MAAA,cAAA,GAAgB,mBAAA,GAAkB,eAAA,CAAA,0KAI9C,SAAS,MAAM,SAAS,kEACxB,SAAS,MAAM,mBAAmB;AAEnD,YAAA,SAAS,gBAAc;;;;;;;;AAWnBC,oBAAAD,MAAA,YAAA,IAAT,UAAK;6BAGMI,eAAA,CAAA,EAAA,QAAA,MAAM,OAAOJ,wBAAe,WAAa,MAAM,gBAAY,YAAA,CAAA,8DAGlDE,eAAA,MAAM,UAAU,2FAEbA,eAAA,MAAM,UAAU;YAChC,MAAM,SAAS,oBAAkB;;;;;;;;AAY7BD,oBAAAD,MAAA,cAAA,IAAX,YAAO;uHAIkB,QAAQ,SAAS,SAAS,8GAE1B,WAAW,QAAQ,UAAU,CAAA,0DACzBE,eAAA,QAAQ,gBAAgB;;;UAQ3DF,MAAA,kBAAA,GAAkB;sdASJG,sBAAA,MAAA,QAAAH,MAAA,kBAAA,EAAmB,IAAI,IAAvBK,gBAAAL,MAAA,kBAAA,EAAmB,MAAI,QAAA,IAAvBM,cAAAN,MAAA,kBAAA,EAAmB,MAAI,QAAA,CAAA,IAAA,cAAA,iEAAvBG,sBAAA,MAAA,QAAAH,MAAA,kBAAA,EAAmB,IAAI,IAAvBK,gBAAAL,MAAA,kBAAA,EAAmB,MAAI,cAAA,IAAvBM,cAAAN,MAAA,kBAAA,EAAmB,MAAI,cAAA,CAAA,IAAA,cAAA,wEAAvBG,sBAAA,MAAA,QAAAH,MAAA,kBAAA,EAAmB,IAAI,IAAvBK,gBAAAL,MAAA,kBAAA,EAAmB,MAAI,eAAA,IAAvBM,cAAAN,MAAA,kBAAA,EAAmB,MAAI,eAAA,CAAA,IAAA,cAAA,kEAAvBG,sBAAA,MAAA,QAAAH,MAAA,kBAAA,EAAmB,IAAI,IAAvBK,gBAAAL,MAAA,kBAAA,EAAmB,MAAI,QAAA,IAAvBM,cAAAN,MAAA,kBAAA,EAAmB,MAAI,QAAA,CAAA,IAAA,cAAA,+DAAvBG,sBAAA,MAAA,QAAAH,MAAA,kBAAA,EAAmB,IAAI,IAAvBK,gBAAAL,MAAA,kBAAA,EAAmB,MAAI,YAAA,IAAvBM,cAAAN,MAAA,kBAAA,EAAmB,MAAI,YAAA,CAAA,IAAA,cAAA,iEAAvBG,sBAAA,MAAA,QAAAH,MAAA,kBAAA,EAAmB,IAAI,IAAvBK,gBAAAL,MAAA,kBAAA,EAAmB,MAAI,UAAA,IAAvBM,cAAAN,MAAA,kBAAA,EAAmB,MAAI,UAAA,CAAA,IAAA,cAAA,wHAYxBO,cAAA,SAAAP,MAAA,kBAAA,EAAmB,KAAK,iMAM7BE,eAAAF,MAAA,kBAAA,EAAmB,OAAO,gMAQpBG,sBAAA,MAAA,QAAAH,MAAA,kBAAA,EAAmB,KAAK,IAAxBK,gBAAAL,MAAA,kBAAA,EAAmB,OAAK,cAAA,IAAxBM,cAAAN,MAAA,kBAAA,EAAmB,OAAK,cAAA,CAAA,IAAA,cAAA,yEAAxBG,sBAAA,MAAA,QAAAH,MAAA,kBAAA,EAAmB,KAAK,IAAxBK,gBAAAL,MAAA,kBAAA,EAAmB,OAAK,SAAA,IAAxBM,cAAAN,MAAA,kBAAA,EAAmB,OAAK,SAAA,CAAA,IAAA,cAAA,qEAAxBG,sBAAA,MAAA,QAAAH,MAAA,kBAAA,EAAmB,KAAK,IAAxBK,gBAAAL,MAAA,kBAAA,EAAmB,OAAK,QAAA,IAAxBM,cAAAN,MAAA,kBAAA,EAAmB,OAAK,QAAA,CAAA,IAAA,cAAA;;;;UAgBtCA,MAAA,eAAA,GAAe;;AASAC,sBAAAD,MAAA,aAAA,IAAT,UAAK;oMAMyBE,eAAA,MAAM,UAAU,yDAChBA,eAAA,MAAM,cAAc,8DAEvBA,eAAA,MAAM,WAAW,sFAEtC,MAAM,SAAS,UAAM,CAAA,yCACrBA,eAAA,MAAM,UAAU;eAKlB,SAAS,MAAM,EAAE,GAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/K1C,UAAM,QAAQ;AAEO,QAAwB,IAAI;AACjD,UAAM,MAAM,IAAkB,IAAI;AAClC,UAAM,QAAQ,IAAS,IAAI;AAC3B,UAAM,UAAU,IAAI,KAAK;AACzB,UAAM,QAAQ,IAAI,EAAE;AACpB,UAAM,iBAAiB,IAAI,KAAK;AAEhC,QAAI,aAAgC;AACpC,QAAI,eAAgC;AACpC,QAAI,oBAAqC;AAgBzC,UAAM,iBAAiB,OAAO,YAAkE;AAC9F,UAAI;AACF,cAAM,WAAW,MAAM;AAAA,UACrB,4DAA4D,mBAAmB,OAAO,CAAC;AAAA,QAAA;AAEzF,cAAM,OAAO,MAAM,SAAS,KAAA;AAE5B,YAAI,QAAQ,KAAK,SAAS,GAAG;AAC3B,iBAAO;AAAA,YACL,KAAK,WAAW,KAAK,CAAC,EAAE,GAAG;AAAA,YAC3B,KAAK,WAAW,KAAK,CAAC,EAAE,GAAG;AAAA,UAAA;AAAA,QAE/B;AACA,eAAO;AAAA,MACT,SAAS,KAAK;AACZ,gBAAQ,MAAM,oBAAoB,GAAG;AACrC,eAAO;AAAA,MACT;AAAA,IACF;AAEA,UAAM,iBAAiB,OAAO,OAAqC,QAAsC;AACvG,UAAI;AACF,gBAAQ,QAAQ;AAChB,cAAM,QAAQ;AAEd,cAAM,WAAW,MAAM;AAAA,UACrB,oDAAoD,MAAM,GAAG,IAAI,MAAM,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG;AAAA,QAAA;AAGlG,cAAM,OAAO,MAAM,SAAS,KAAA;AAE5B,YAAI,KAAK,SAAS,QAAQ,CAAC,KAAK,UAAU,KAAK,OAAO,WAAW,GAAG;AAClE,gBAAM,IAAI,MAAM,gBAAgB;AAAA,QAClC;AAEA,cAAM,YAAY,KAAK,OAAO,CAAC;AAE/B,cAAM,QAAQ;AAAA,UACZ,UAAU,UAAU;AAAA,UACpB,UAAU,UAAU;AAAA,UACpB,UAAU,UAAU,SAAS;AAAA,UAC7B,OAAO,UAAU,KAAK,CAAC,EAAE,MAAM,IAAI,CAAC,UAAe;AAAA,YACjD,aAAa,KAAK,SAAS,SAAS,WAChC,QAAQ,KAAK,SAAS,YAAY,SAAS,OAAO,KAAK,QAAQ,MAAM,KACrE,KAAK,SAAS,SAAS,WACvB,0BACA,GAAG,KAAK,SAAS,KAAK,QAAQ,MAAM,GAAG,CAAC,IAAI,KAAK,SAAS,YAAY,EAAE,SAAS,KAAK,QAAQ,MAAM,GAAG,KAAA;AAAA,YAC3G,UAAU,KAAK;AAAA,UAAA,EACf;AAAA,QAAA;AAGJ,kBAAU,UAAU,SAAS,aAAa,OAAO,GAAG;AAAA,MACtD,SAAS,KAAK;AACZ,cAAM,QAAQ;AACd,gBAAQ,MAAM,kBAAkB,GAAG;AAAA,MACrC,UAAA;AACE,gBAAQ,QAAQ;AAAA,MAClB;AAAA,IACF;AAEA,UAAM,YAAY,CAAC,aAAyB,OAAqC,QAAsC;AACrH,UAAI,CAAC,IAAI,MAAO;AAEhB,UAAI,YAAY;AACd,YAAI,MAAM,YAAY,UAAU;AAAA,MAClC;AACA,UAAI,cAAc;AAChB,YAAI,MAAM,YAAY,YAAY;AAAA,MACpC;AACA,UAAI,mBAAmB;AACrB,YAAI,MAAM,YAAY,iBAAiB;AAAA,MACzC;AAEA,YAAM,UAAU,YAAY,IAAI,CAAA,UAAS,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,CAAC,CAAqB;AAEjF,mBAAa,EAAE,SAAS,SAAS;AAAA,QAC/B,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,SAAS;AAAA,MAAA,CACV,EAAE,MAAM,IAAI,KAAK;AAElB,YAAM,aAAa,EAAE,QAAQ;AAAA,QAC3B,MAAM;AAAA,QACN,WAAW;AAAA,QACX,UAAU,CAAC,IAAI,EAAE;AAAA,QACjB,YAAY,CAAC,IAAI,EAAE;AAAA,MAAA,CACpB;AAED,YAAM,WAAW,EAAE,QAAQ;AAAA,QACzB,MAAM;AAAA,QACN,WAAW;AAAA,QACX,UAAU,CAAC,IAAI,EAAE;AAAA,QACjB,YAAY,CAAC,IAAI,EAAE;AAAA,MAAA,CACpB;AAED,qBAAe,EAAE,OAAO,CAAC,MAAM,KAAK,MAAM,GAAG,GAAG,EAAE,MAAM,WAAA,CAAY,EAAE,MAAM,IAAI,KAAK;AACrF,0BAAoB,EAAE,OAAO,CAAC,IAAI,KAAK,IAAI,GAAG,GAAG,EAAE,MAAM,SAAA,CAAU,EAAE,MAAM,IAAI,KAAK;AAEpF,UAAI,MAAM,UAAU,WAAW,UAAA,GAAa;AAAA,QAC1C,SAAS,CAAC,IAAI,EAAE;AAAA,MAAA,CACjB;AAAA,IACH;AAMA,UAAM,YAAY,YAAY;AAC5B,UAAI,CAAC,MAAM,YAAa;AAExB,UAAI,aAAa,MAAM,YAAY,OAAO,MAAM,YAAY,MACxD,EAAE,KAAK,MAAM,YAAY,KAAK,KAAK,MAAM,YAAY,QACrD,MAAM,eAAe,MAAM,YAAY,OAAO;AAElD,UAAI,CAAC,YAAY;AACf,cAAM,QAAQ;AACd;AAAA,MACF;AAEA,YAAM,cAAc,MAAM,UAAU,EAAE,KAAK,SAAS,KAAK,QAAA;AAEzD,YAAM,eAAe,aAAa,UAAU;AAAA,IAC9C;AAEA,UAAM,iBAAiB,CAAC,WAA2B;AACjD,YAAM,QAAQ,SAAS;AACvB,aAAO,QAAQ,MACX,GAAG,KAAK,MAAM,SAAS,OAAO,CAAC,QAC/B,GAAG,MAAM,QAAQ,CAAC,CAAC;AAAA,IACzB;AAEA,UAAM,iBAAiB,CAAC,YAA4B;AAClD,YAAM,UAAU,KAAK,MAAM,UAAU,EAAE;AACvC,UAAI,UAAU,IAAI;AAChB,eAAO,GAAG,OAAO;AAAA,MACnB;AACA,YAAM,QAAQ,KAAK,MAAM,UAAU,EAAE;AACrC,YAAM,mBAAmB,UAAU;AACnC,aAAO,GAAG,KAAK,KAAK,gBAAgB;AAAA,IACtC;AAcA,UAAM,MAAM,MAAM,aAAa,MAAM;AACnC,gBAAA;AAAA,IACF,GAAG,EAAE,MAAM,MAAM;;AAtPV,YAAA,OAAAJ,eAAAC,WAAA,EAAA,OAAM,oBAAgB,MAAA,CAAA,CAAA,oEAAA;UAGdC,MAAA,KAAA,GAAK;8RAKoB,eAAeA,MAAA,KAAA,EAAM,QAAQ,CAAA,8JAI7B,eAAeA,MAAA,KAAA,EAAM,QAAQ,CAAA,wEAGAA,MAAA,OAAA,CAAO,IAAA,cAAA,qCAC/DA,MAAA,OAAA,IAAO,gBAAA,eAAA;YAIsBA,MAAA,cAAA,GAAc;;AAIpBC,wBAAAD,MAAA,KAAA,EAAM,OAAK,CAA3B,MAAMQ,WAAK;yHAISA,SAAK,CAAA,kGAEEN,eAAA,KAAK,WAAW,oEACnB,eAAe,KAAK,QAAQ,CAAA;;;;;;sFAO7DF,MAAA,cAAA,IAAc,SAAA,MAAA,CAAA,6BAAA;AAAA;;;UAIVA,MAAA,KAAA,GAAK;2EACXA,MAAA,KAAA,CAAK,CAAA,QAAA;AAAA;;;;;;;;;;;;;;;;;;AC+Od,UAAM,EAAE,UAAA,IAAc,WAAA;AACtB,UAAM,MAAM,OAAA;AACC,YAAA;AAEb,UAAM,YAAY,IAAI,WAAW;AACjC,UAAM,iBAAiB,IAAI,EAAE;AAC7B,UAAM,YAAY,IAAW,EAAE;AAC/B,UAAM,mBAAmB,IAAS,IAAI;AACtC,UAAM,gBAAgB,IAAW,EAAE;AACnC,UAAM,iBAAiB,IAAW,EAAE;AACpC,UAAM,SAAS,IAAI,QAAQ;AAC3B,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,uBAAuB,IAAI,KAAK;AACtC,UAAM,oBAAoB,IAAI,KAAK;AACnC,UAAM,WAAW,IAAI,KAAK;AAC1B,UAAM,cAAc,IAAI,KAAK;AAE7B,UAAM,cAAc,IAAI;AAAA,MACtB,eAAe;AAAA,MACf,UAAU;AAAA,MACV,kBAAkB;AAAA,MAClB,kBAAkB;AAAA,MAClB,aAAa;AAAA,MACb,cAAc;AAAA,MACd,iBAAiB;AAAA,IAAA,CAClB;AAED,UAAM,eAAe,IAAI;AAAA,MACvB,SAAS;AAAA,IAAA,CACV;AAED,UAAM,eAAe,IAA8C,MAAS;AAE5E,UAAM,oBAAoB,SAAS,MAAM;AACvC,UAAI,OAAO,UAAU,MAAO,QAAO,UAAU;AAC7C,UAAI,OAAO,UAAU,UAAU;AAC7B,eAAO,UAAU,MAAM,OAAO,CAAA,MAAK,CAAC,WAAW,cAAc,QAAQ,EAAE,SAAS,EAAE,MAAM,CAAC;AAAA,MAC3F;AACA,aAAO,UAAU,MAAM,OAAO,OAAK,EAAE,WAAW,OAAO,KAAK;AAAA,IAC9D,CAAC;AAED,UAAM,gBAAgB,SAAS,MAAM;AACnC,aAAO,iBAAiB,SAAS,cAAc,MAAM,SAAS;AAAA,IAChE,CAAC;AAED,UAAM,iBAAiB,YAAY;AACjC,cAAQ,QAAQ;AAChB,YAAM,SAAS,MAAM,IAAI,UAAU,KAAA;AACnC,UAAI,OAAO,SAAS;AAClB,kBAAU,QAAQ,OAAO;AAAA,MAC3B;AACA,cAAQ,QAAQ;AAAA,IAClB;AAEA,UAAM,iBAAiB,OAAO,aAAkB;AAC9C,uBAAiB,QAAQ;AAEzB,YAAM,CAAC,aAAa,IAAI,MAAM,QAAQ,IAAI;AAAA,QACxC,UACG,KAAK,YAAY,EACjB,OAAO,2CAA2C,EAClD,GAAG,eAAe,SAAS,EAAE;AAAA,MAAA,CACjC;AAED,oBAAc,QAAQ,cAAc,QAAQ,CAAA;AAAA,IAC9C;AAEA,UAAM,iBAAiB,YAAY;AACjC,eAAS,QAAQ;AAEjB,YAAM,SAAS,MAAM,IAAI,UAAU,OAAO;AAAA,QACxC,GAAG,YAAY;AAAA,QACf,QAAQ;AAAA,MAAA,CACT;AAED,UAAI,OAAO,SAAS;AAClB,6BAAqB,QAAQ;AAC7B,oBAAY,QAAQ;AAAA,UAClB,eAAe;AAAA,UACf,UAAU;AAAA,UACV,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,UAClB,aAAa;AAAA,UACb,cAAc;AAAA,UACd,iBAAiB;AAAA,QAAA;AAEnB,cAAM,eAAA;AAAA,MACR;AAEA,eAAS,QAAQ;AAAA,IACnB;AAEA,UAAM,eAAe,YAAY;AAC/B,UAAI,CAAC,iBAAiB,SAAS,CAAC,aAAa,MAAM,QAAS;AAE5D,kBAAY,QAAQ;AAEpB,YAAM,SAAS,MAAM,IAAI,WAAW,OAAO,iBAAiB,MAAM,IAAI,aAAa,MAAM,OAAO;AAEhG,UAAI,OAAO,SAAS;AAClB,0BAAkB,QAAQ;AAC1B,qBAAa,MAAM,UAAU;AAC7B,cAAM,eAAe,iBAAiB,KAAK;AAC3C,cAAM,eAAA;AACN,cAAM,oBAAA;AAAA,MACR;AAEA,kBAAY,QAAQ;AAAA,IACtB;AAEA,UAAM,gBAAgB,YAAY;AAChC,UAAI,CAAC,iBAAiB,MAAO;AAE7B,UAAI,QAAQ,+CAA+C,GAAG;AAC5D,cAAM,IAAI,UAAU,OAAO,iBAAiB,MAAM,IAAI;AAAA,UACpD,QAAQ;AAAA,UACR,aAAY,oBAAI,KAAA,GAAO,YAAA;AAAA,QAAY,CACpC;AAED,yBAAiB,QAAQ;AACzB,cAAM,eAAA;AAAA,MACR;AAAA,IACF;AAEA,UAAM,sBAAsB,YAAY;AACtC,YAAM,SAAS,MAAM,IAAI,MAAM,KAAK,EAAE,WAAW,MAAM;AACvD,UAAI,OAAO,SAAS;AAClB,uBAAe,QAAQ,OAAO,KAAK;AAAA,UAAO,CAAC,MACzC,CAAC,aAAa,YAAY,EAAE,SAAS,EAAE,MAAM;AAAA,QAAA;AAAA,MAEjD;AAAA,IACF;AAEA,UAAM,aAAa,CAAC,cAAsB;AACxC,UAAI,CAAC,UAAW,QAAO;AACvB,YAAM,OAAO,IAAI,KAAK,SAAS;AAC/B,aAAO,KAAK,eAAA;AAAA,IACd;;;;;AAnac,YAAAS,mBAAA,uBAAAV,WAAA,EAAA,MAAK,UAAA,GAAS,MAAA,GAAA;AAAA,yBAA1B,CAkRa,GAAAW,QAAAC,UAAA,aAAA;;0UAzQiBX,MAAA,SAAA,MAAS,YAAA,GAAA,YAAA,CAAA,8FAOTA,MAAA,SAAA,MAAS,cAAA,YAAA,CAAA;gBAOzBA,MAAA,SAAA,MAAS,aAAA;;;;;;gBAQRA,MAAA,SAAA,MAAS,YAAA;;AACPU,qBAAAD,mBAAA,qBAAA,EAAA,mBAAiBT,MAAA,cAAA,KAAc,MAAAW,UAAA,QAAA,CAAA;;;2XAOrBX,MAAA,MAAA,CAAM,oBAANA,MAAA,MAAA,GAAM,QAAA,kBAANA,MAAA,MAAA,GAAM,QAAA,CAAA,IAAA,cAAA,2GAANA,MAAA,MAAA,CAAM,oBAANA,MAAA,MAAA,GAAM,SAAA,kBAANA,MAAA,MAAA,GAAM,SAAA,CAAA,IAAA,cAAA,+GAANA,MAAA,MAAA,CAAM,oBAANA,MAAA,MAAA,GAAM,YAAA,kBAANA,MAAA,MAAA,GAAM,YAAA,CAAA,IAAA,cAAA,2GAANA,MAAA,MAAA,CAAM,oBAANA,MAAA,MAAA,GAAM,KAAA,kBAANA,MAAA,MAAA,GAAM,KAAA,CAAA,IAAA,cAAA;kBAQdA,MAAA,OAAA,GAAO;;cACF,WAAAA,MAAA,iBAAA,EAAkB,WAAM,GAAA;;;;AAKjBC,8BAAAD,MAAA,iBAAA,IAAZ,aAAQ;wCAGKI,eAAA,CAAA,EAAA,UAAAJ,MAAA,gBAAA,GAAkB,OAAO,SAAS,GAAA,GAAE,eAAA,CAAA,sJAIrBE,eAAA,SAAS,eAAe,wBACXE,eAAA,CAAA,kBAAA,SAAS,QAAQ,IAAA,OAAA,CAAA,mCACzDF,eAAA,SAAS,QAAQ,uEAGKA,eAAA,SAAS,aAAa,uEACfA,eAAA,SAAS,gBAAgB,kFAC7B,WAAW,SAAS,UAAU,CAAA,+EAExBE,eAAA,CAAA,SAAA,SAAS,MAAM,IAAA,OAAA,CAAA,iCAC/CF,eAAA,SAAS,MAAM;;;;;kBAOKF,MAAA,gBAAA,GAAgB;;oBAahBA,MAAA,aAAA,GAAa;;;oBAEvC,aAAW;AAAA,sBAA6B,SAAAA,MAAA,gBAAA,EAAiB;AAAA,sBAAuC,KAAAA,MAAA,gBAAA,EAAiB;AAAA,sBAAmC,KAAAA,MAAA,gBAAA,EAAiB;AAAA,oBAAA;AAAA,oBAKrK,QAAQA,MAAA,YAAA;AAAA,kBAAA;;;;;kYAUGE,eAAAF,MAAA,gBAAA,EAAiB,eAAe,kJAIhCE,eAAAF,MAAA,gBAAA,EAAiB,aAAa,mKAKUI,eAAA,CAAA,kBAAAJ,MAAA,gBAAA,EAAiB,QAAQ,IAAA,OAAA,CAAA,2CACzDE,eAAAF,MAAA,gBAAA,EAAiB,QAAQ,wKAOFI,eAAA,CAAA,SAAAJ,MAAA,gBAAA,EAAiB,MAAM,IAAA,OAAA,CAAA,iCACvDE,eAAAF,MAAA,gBAAA,EAAiB,MAAM,0UAYtBE,eAAAF,MAAA,gBAAA,EAAiB,gBAAgB;AAED,oBAAAA,MAAA,gBAAA,EAAiB,kBAAgB;uLAEjEE,eAAAF,MAAA,gBAAA,EAAiB,gBAAgB;;;;;AAKb,oBAAAA,MAAA,gBAAA,EAAiB,iBAAe;6LAEjCE,eAAAF,MAAA,gBAAA,EAAiB,eAAe;;;;gIAIxCE,eAAAF,MAAA,aAAA,EAAc,MAAM;AAChC,oBAAAA,MAAA,aAAA,EAAc,WAAM,GAAA;;;;AAILC,gCAAAD,MAAA,aAAA,IAAZ,aAAQ;4MAEa,SAAS,MAAM,WAAW,qEACrBE,eAAA,SAAS,MAAM;AAGrC,wBAAA,SAAS,iBAAe;qFAAU,WAAW,SAAS,eAAe,CAAA;;;;AACrE,wBAAA,SAAS,YAAU;yFAAc,WAAW,SAAS,UAAU,CAAA;;;;AAC/D,wBAAA,SAAS,aAAW;0FAAe,WAAW,SAAS,WAAW,CAAA;;;;;;;;;;;;;;sCAe5F,CA4FWQ,WAAA;kBA3FEV,MAAA,oBAAA,GAAoB;6bAMNG,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,aAAa,IAAzBK,gBAAAL,MAAA,WAAA,EAAY,eAAa,EAAA,IAAzBM,cAAAN,MAAA,WAAA,EAAY,eAAa,EAAA,CAAA,IAAA,cAAA,sFAAzBG,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,aAAa,IAAzBK,gBAAAL,MAAA,WAAA,EAAY,eAAa,mBAAA,IAAzBM,cAAAN,MAAA,WAAA,EAAY,eAAa,mBAAA,CAAA,IAAA,cAAA,+EAAzBG,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,aAAa,IAAzBK,gBAAAL,MAAA,WAAA,EAAY,eAAa,MAAA,IAAzBM,cAAAN,MAAA,WAAA,EAAY,eAAa,MAAA,CAAA,IAAA,cAAA,8EAAzBG,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,aAAa,IAAzBK,gBAAAL,MAAA,WAAA,EAAY,eAAa,kBAAA,IAAzBM,cAAAN,MAAA,WAAA,EAAY,eAAa,kBAAA,CAAA,IAAA,cAAA,wFAAzBG,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,aAAa,IAAzBK,gBAAAL,MAAA,WAAA,EAAY,eAAa,gBAAA,IAAzBM,cAAAN,MAAA,WAAA,EAAY,eAAa,gBAAA,CAAA,IAAA,cAAA,8EAAzBG,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,aAAa,IAAzBK,gBAAAL,MAAA,WAAA,EAAY,eAAa,QAAA,IAAzBM,cAAAN,MAAA,WAAA,EAAY,eAAa,QAAA,CAAA,IAAA,cAAA,oFAAzBG,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,aAAa,IAAzBK,gBAAAL,MAAA,WAAA,EAAY,eAAa,sBAAA,IAAzBM,cAAAN,MAAA,WAAA,EAAY,eAAa,sBAAA,CAAA,IAAA,cAAA,mFAAzBG,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,aAAa,IAAzBK,gBAAAL,MAAA,WAAA,EAAY,eAAa,OAAA,IAAzBM,cAAAN,MAAA,WAAA,EAAY,eAAa,OAAA,CAAA,IAAA,cAAA,+OAe/BO,cAAA,SAAO,CAAC,oBADKJ,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,QAAQ,oBAApBA,MAAA,WAAA,EAAY,UAClB,CAAC,kBADKA,MAAA,WAAA,EAAY,UAClB,CAAC,CAAA,IAAA,cAAA,sDACRO,cAAA,SAAO,CAAC,oBAFKJ,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,QAAQ,oBAApBA,MAAA,WAAA,EAAY,UAElB,CAAC,kBAFKA,MAAA,WAAA,EAAY,UAElB,CAAC,CAAA,IAAA,cAAA,oDACRO,cAAA,SAAO,CAAC,oBAHKJ,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,QAAQ,oBAApBA,MAAA,WAAA,EAAY,UAGlB,CAAC,kBAHKA,MAAA,WAAA,EAAY,UAGlB,CAAC,CAAA,IAAA,cAAA,qDACRO,cAAA,SAAO,CAAC,oBAJKJ,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,QAAQ,oBAApBA,MAAA,WAAA,EAAY,UAIlB,CAAC,kBAJKA,MAAA,WAAA,EAAY,UAIlB,CAAC,CAAA,IAAA,cAAA,2DACRO,cAAA,SAAO,CAAC,oBALKJ,sBAAA,MAAA,QAAAH,MAAA,WAAA,EAAY,QAAQ,oBAApBA,MAAA,WAAA,EAAY,UAKlB,CAAC,kBALKA,MAAA,WAAA,EAAY,UAKlB,CAAC,CAAA,IAAA,cAAA,iMAMHO,cAAA,SAAAP,MAAA,WAAA,EAAY,gBAAgB,oNAK5BO,cAAA,SAAAP,MAAA,WAAA,EAAY,gBAAgB,oPAK5BO,cAAA,SAAAP,MAAA,WAAA,EAAY,WAAW,uMAKvBO,cAAA,SAAAP,MAAA,WAAA,EAAY,YAAY,8PAKrBE,eAAAF,MAAA,WAAA,EAAY,eAAe,0OAOWA,MAAA,QAAA,CAAQ,IAAA,cAAA,gDAC5DA,MAAA,QAAA,IAAQ,gBAAA,iBAAA;;;;kBAOVA,MAAA,iBAAA,GAAiB;mcAMHG,sBAAA,MAAA,QAAAH,MAAA,YAAA,EAAa,OAAO,IAApBK,gBAAAL,MAAA,YAAA,EAAa,SAAO,EAAA,IAApBM,cAAAN,MAAA,YAAA,EAAa,SAAO,EAAA,CAAA,IAAA,cAAA;AAEZC,8BAAAD,MAAA,cAAA,IAAR,SAAI;iDAAoC,SAAO,KAAK,EAAE,oBAFtDG,sBAAA,MAAA,QAAAH,MAAA,YAAA,EAAa,OAAO,IAApBK,gBAAAL,MAAA,YAAA,EAAa,SAEkC,KAAK,EAAE,IAFtDM,cAAAN,MAAA,YAAA,EAAa,SAEkC,KAAK,EAAE,CAAA,IAAA,cAAA,iBAChEE,eAAA,KAAK,WAAW,sBAAS,KAAK,WAAW,IAAI,MAAQA,eAAA,KAAK,MAAM;;sQASdF,MAAA,WAAA,CAAW,IAAA,cAAA,gDAC/DA,MAAA,WAAA,IAAW,mBAAA,eAAA;;;;;;;;cAzQ5BY,YAgRM,OAAA,EAhRD,OAAM,cAAU;AAAA,gBACnBA,YA2BM,OAAA,EA3BD,OAAM,iBAAa;AAAA,kBACtBA,YAkBM,OAAA,EAlBD,OAAM,iBAAa;AAAA,oBACtBA,YAAgC,YAA5B,yBAAuB;AAAA,oBAC3BA,YAeM,OAAA,EAfD,OAAM,oBAAgB;AAAA,sBACzBA,YAMS,UAAA;AAAA,wBALN,qBAAO,UAAA,QAAS;AAAA,wBACjB,OAAK,CAAC,cAAY,EAAA,QACAZ,MAAA,SAAA,MAAS,YAAA,CAAA;AAAA,sBAAA,GAC5B,eAED,IAAA,CAAA,SAAA,CAAA;AAAA,sBACAY,YAMS,UAAA;AAAA,wBALN,qBAAO,UAAA,QAAS;AAAA,wBACjB,OAAK,CAAC,cAAY,EAAA,QACAZ,MAAA,SAAA,MAAS,WAAA,CAAA;AAAA,sBAAA,GAC5B,cAED,IAAA,CAAA,SAAA,CAAA;AAAA,oBAAA;;kBAIIA,MAAA,SAAA,MAAS,4BADjBa,YAMS,UAAA;AAAA;oBAJN,qBAAO,qBAAA,QAAoB;AAAA,oBAC5B,OAAM;AAAA,kBAAA,GACP,oBAED,GAAA,CAAA,SAAA,CAAA;;gBAGSb,MAAA,SAAA,MAAS,2BAApBa,YAEM,OAAA;AAAA;kBAF+B,OAAM;AAAA,gBAAA;kBACzCD,YAA8C,qBAAA,EAAnC,mBAAiBZ,MAAA,cAAA,EAAA,GAAc,MAAA,GAAA,CAAA,iBAAA,CAAA;AAAA,gBAAA,oBAG5Ca,YA+IM,OAAA;AAAA;kBA/IM,OAAM;AAAA,gBAAA;kBAChBD,YAuCM,OAAA,EAvCD,OAAM,qBAAiB;AAAA,oBAC1BA,YAQM,OAAA,EARD,OAAM,kBAAc;AAAA,sBACvBA,YAAyB,YAArB,kBAAgB;AAAA,qCACpBA,YAKS,UAAA;AAAA,2EALQ,OAAM,QAAA,SAAA;AAAA,wBAAE,OAAM;AAAA,sBAAA;wBAC7BA,YAAsC,UAAA,EAA9B,OAAM,SAAA,GAAS,QAAM;AAAA,wBAC7BA,YAAwC,UAAA,EAAhC,OAAM,UAAA,GAAU,SAAO;AAAA,wBAC/BA,YAA8C,UAAA,EAAtC,OAAM,aAAA,GAAa,YAAU;AAAA,wBACrCA,YAAgC,UAAA,EAAxB,OAAM,MAAA,GAAM,KAAG;AAAA,sBAAA;uCAJRZ,MAAA,MAAA,CAAM;AAAA,sBAAA;;oBAQdA,MAAA,OAAA,kBAAXa,YAAoD,OAAA;AAAA;sBAAhC,OAAM;AAAA,oBAAA,GAAU,YAAU,KAC9Bb,MAAA,iBAAA,EAAkB,WAAM,kBAAxCa,YAEM,OAAA;AAAA;sBAF0C,OAAM;AAAA,oBAAA,GAAc,sBAEpE,mBACAA,YAuBM,OAAA;AAAA;sBAvBM,OAAM;AAAA,oBAAA;wCAChBA,YAqBMC,UAAA,MAAAC,WApBef,MAAA,iBAAA,GAAiB,CAA7B,aAAQ;4CADjBa,YAqBM,OAAA;AAAA,0BAnBH,KAAK,SAAS;AAAA,0BACf,OAAK,CAAC,iBAAe,EAAA,UACDb,MAAA,gBAAA,GAAkB,OAAO,SAAS,IAAE;AAAA,0BACvD,SAAK,CAAA,WAAE,eAAe,QAAQ;AAAA,wBAAA;0BAE/BY,YAKM,OAAA,EALD,OAAM,yBAAqB;AAAA,4BAC9BA,YAAmE,UAA7D,OAAM,kBAAA,GAAiBI,gBAAI,SAAS,eAAe,GAAA,CAAA;AAAA,4BACzDJ,YAEO,QAAA;AAAA,8BAFD,OAAK,CAAC,SAAO,kBAA2B,SAAS,QAAQ,EAAA;AAAA,4BAAA,GAAI,OAChEI,gBAAG,SAAS,QAAQ,GAAA,CAAA;AAAA,0BAAA;0BAGzBJ,YAA6D,SAAxD,OAAM,gBAAA,GAAeI,gBAAI,SAAS,aAAa,GAAA,CAAA;AAAA,0BACpDJ,YAAuE,OAAA,EAAlE,OAAM,oBAAA,GAAoB,QAAGI,gBAAG,SAAS,gBAAgB,GAAA,CAAA;AAAA,0BAC9DJ,YAAyE,OAAA,EAApE,OAAM,gBAAA,GAAgB,QAAGI,gBAAG,WAAW,SAAS,UAAU,CAAA,GAAA,CAAA;AAAA,0BAC/DJ,YAIM,OAAA,EAJD,OAAM,qBAAiB;AAAA,4BAC1BA,YAEO,QAAA;AAAA,8BAFD,OAAK,CAAC,SAAO,SAAkB,SAAS,MAAM,EAAA;AAAA,4BAAA,GAC/CI,gBAAA,SAAS,MAAM,GAAA,CAAA;AAAA,0BAAA;;;;;kBAOKhB,MAAA,gBAAA,kBAAjCa,YA8FM,OAAA;AAAA;oBA9FD,OAAM;AAAA,kBAAA;oBACTD,YAUM,OAAA,EAVD,OAAM,kBAAc;AAAA,sBACvBA,YAAyB,YAArB,kBAAgB;AAAA,sBACpBA,YAOM,OAAA,EAPD,OAAM,oBAAgB;AAAA,wBACzBA,YAES,UAAA;AAAA,0BAFA,qBAAO,kBAAA,QAAiB;AAAA,0BAAS,OAAM;AAAA,wBAAA,GAAyB,iBAEzE,GAAA,CAAA,SAAA,CAAA;AAAA,wBACAA,YAES,UAAA;AAAA,0BAFA,SAAO;AAAA,0BAAe,OAAM;AAAA,wBAAA,GAAyB,SAE9D;AAAA,sBAAA;;oBAI2BZ,MAAA,aAAA,kBAA/Ba,YASM,OAAA;AAAA;sBATD,OAAM;AAAA,oBAAA;sBACTD,YAOE,0BAAA;AAAA,wBANC,aAAW;AAAA,0BAA6B,SAAAZ,MAAA,gBAAA,EAAiB;AAAA,0BAAuC,KAAAA,MAAA,gBAAA,EAAiB;AAAA,0BAAmC,KAAAA,MAAA,gBAAA,EAAiB;AAAA,wBAAA;AAAA,wBAKrK,QAAQA,MAAA,YAAA;AAAA,sBAAA;;oBAIbY,YAqEM,OAAA,EArED,OAAM,qBAAiB;AAAA,sBAC1BA,YA4BM,OAAA,EA5BD,OAAM,oBAAgB;AAAA,wBACzBA,YAA6B,YAAzB,sBAAoB;AAAA,wBACxBA,YAyBM,OAAA,EAzBD,OAAM,iBAAa;AAAA,0BACtBA,YAGM,OAAA,EAHD,OAAM,iBAAa;AAAA,4BACtBA,YAA8B,eAAvB,iBAAe;AAAA,4BACtBA,YAAiD,OAAA,MAAAI,gBAAzChB,MAAA,gBAAA,EAAiB,eAAe,GAAA,CAAA;AAAA,0BAAA;0BAE1CY,YAGM,OAAA,EAHD,OAAM,iBAAa;AAAA,4BACtBA,YAAmB,eAAZ,MAAI;AAAA,4BACXA,YAA+C,OAAA,MAAAI,gBAAvChB,MAAA,gBAAA,EAAiB,aAAa,GAAA,CAAA;AAAA,0BAAA;0BAExCY,YAOM,OAAA,EAPD,OAAM,iBAAa;AAAA,4BACtBA,YAAuB,eAAhB,UAAQ;AAAA,4BACfA,YAIM,OAAA,MAAA;AAAA,8BAHJA,YAEO,QAAA;AAAA,gCAFD,OAAK,CAAC,SAAO,kBAA2BZ,MAAA,gBAAA,EAAiB,QAAQ,EAAA;AAAA,8BAAA,GAAI,eAChEgB,gBAAGhB,MAAA,gBAAA,EAAiB,QAAQ,GAAA,CAAA;AAAA,4BAAA;;0BAI3CY,YAOM,OAAA,EAPD,OAAM,iBAAa;AAAA,4BACtBA,YAAqB,eAAd,QAAM;AAAA,4BACbA,YAIM,OAAA,MAAA;AAAA,8BAHJA,YAEO,QAAA;AAAA,gCAFD,OAAK,CAAC,SAAO,SAAkBZ,MAAA,gBAAA,EAAiB,MAAM,EAAA;AAAA,8BAAA,GACvDgB,gBAAAhB,MAAA,gBAAA,EAAiB,MAAM,GAAA,CAAA;AAAA,4BAAA;;;;sBAOpCY,YAYM,OAAA,EAZD,OAAM,oBAAgB;AAAA,wBACzBA,YAAiB,YAAb,UAAQ;AAAA,wBACZA,YASM,OAAA,EATD,OAAM,iBAAa;AAAA,0BACtBA,YAGM,OAAA,EAHD,OAAM,4BAAwB;AAAA,4BACjCA,YAAsB,eAAf,SAAO;AAAA,4BACdA,YAAkD,OAAA,MAAAI,gBAA1ChB,MAAA,gBAAA,EAAiB,gBAAgB,GAAA,CAAA;AAAA,0BAAA;0BAEDA,MAAA,gBAAA,EAAiB,iCAA3Da,YAGM,OAAA;AAAA;4BAHD,OAAM;AAAA,0BAAA;4BACTD,YAAiC,eAA1B,oBAAkB;AAAA,4BACzBA,YAAkD,OAAA,MAAAI,gBAA1ChB,MAAA,gBAAA,EAAiB,gBAAgB,GAAA,CAAA;AAAA,0BAAA;;;sBAKbA,MAAA,gBAAA,EAAiB,gCAAnDa,YAGM,OAAA;AAAA;wBAHD,OAAM;AAAA,sBAAA;wBACTD,YAAwB,YAApB,iBAAe;AAAA,wBACnBA,YAAwE,SAAnE,OAAM,iBAAA,GAAgBI,gBAAIhB,MAAA,gBAAA,EAAiB,eAAe,GAAA,CAAA;AAAA,sBAAA;sBAGjEY,YAkBM,OAAA,EAlBD,OAAM,oBAAgB;AAAA,wBACzBA,YAAoD,YAAhD,qBAAgBI,gBAAGhB,qBAAc,MAAM,IAAG,KAAC,CAAA;AAAA,wBACpCA,MAAA,aAAA,EAAc,WAAM,kBAA/Ba,YAEM,OAAA;AAAA;0BAFiC,OAAM;AAAA,wBAAA,GAAoB,qBAEjE,mBACAA,YAYM,OAAA;AAAA;0BAZM,OAAM;AAAA,wBAAA;4CAChBA,YAUMC,UAAA,MAAAC,WAVkBf,MAAA,aAAA,GAAa,CAAzB,aAAQ;gDAApBa,YAUM,OAAA;AAAA,8BAVkC,KAAK,SAAS;AAAA,8BAAI,OAAM;AAAA,4BAAA;8BAC9DD,YAGM,OAAA,EAHD,OAAM,eAAW;AAAA,gCACpBA,YAAiE,QAAA,EAA3D,OAAM,cAAA,mBAAiB,SAAS,MAAM,WAAW,GAAA,CAAA;AAAA,gCACvDA,YAA2D,UAArD,OAAM,mBAAA,GAAkBI,gBAAI,SAAS,MAAM,GAAA,CAAA;AAAA,8BAAA;8BAEnDJ,YAIM,OAAA,EAJD,OAAM,gBAAY;AAAA,gCACT,SAAS,mBAArBK,aAAAJ,YAA4F,oBAAtD,UAAKG,gBAAG,WAAW,SAAS,eAAe,CAAA,GAAA,CAAA;gCACrE,SAAS,cAArBC,aAAAJ,YAAsF,oBAArD,cAASG,gBAAG,WAAW,SAAS,UAAU,CAAA,GAAA,CAAA;gCAC/D,SAAS,eAArBC,aAAAJ,YAAyF,oBAAvD,eAAUG,gBAAG,WAAW,SAAS,WAAW,CAAA,GAAA,CAAA;;;;;;;sCAQ1FH,YAIM,OAAA;AAAA;oBAJM,OAAM;AAAA,kBAAA;oBAChBD,YAEM,OAAA,EAFD,OAAM,cAAA,GAAc,sCAEzB;AAAA,kBAAA;;8BAIJC,YA4FWK,UAAA,EA5FD,IAAG,UAAM;AAAA,kBACNlB,MAAA,oBAAA,kBAAXa,YAgEM,OAAA;AAAA;oBAhE2B,OAAM;AAAA,oBAAiB,qBAAO,qBAAA,QAAoB;AAAA,kBAAA;oBACjFD,YA8DM,OAAA;AAAA,sBA9DD,OAAM;AAAA,sBAAiB,uBAAD,MAAA;AAAA,sBAAA,GAAW,CAAA,MAAA,CAAA;AAAA,oBAAA;sBACpCA,YAA4B,YAAxB,qBAAmB;AAAA,sBACvBA,YA2DO,QAAA;AAAA,wBA3DA,wBAAgB,gBAAc,CAAA,SAAA,CAAA;AAAA,sBAAA;wBACnCA,YAYM,OAAA,EAZD,OAAM,gBAAY;AAAA,0BACrBA,YAAiD,SAAA,EAA1C,OAAM,aAAA,GAAa,iBAAe;AAAA,yCACzCA,YASS,UAAA;AAAA,4BATQ,uBAAA,CAAA,WAAAZ,MAAA,WAAA,EAAY,gBAAa;AAAA,4BAAE,OAAM;AAAA,4BAAc,UAAA;AAAA,0BAAA;4BAC9DY,YAAqC,UAAA,EAA7B,OAAM,GAAA,GAAG,aAAW;AAAA,4BAC5BA,YAA4D,UAAA,EAApD,OAAM,oBAAA,GAAoB,mBAAiB;AAAA,4BACnDA,YAAkC,UAAA,EAA1B,OAAM,OAAA,GAAO,MAAI;AAAA,4BACzBA,YAA0D,UAAA,EAAlD,OAAM,mBAAA,GAAmB,kBAAgB;AAAA,4BACjDA,YAAsD,UAAA,EAA9C,OAAM,iBAAA,GAAiB,gBAAc;AAAA,4BAC7CA,YAAsC,UAAA,EAA9B,OAAM,SAAA,GAAS,QAAM;AAAA,4BAC7BA,YAAkE,UAAA,EAA1D,OAAM,uBAAA,GAAuB,sBAAoB;AAAA,4BACzDA,YAAoC,UAAA,EAA5B,OAAM,QAAA,GAAQ,OAAK;AAAA,0BAAA;4BARZ,CAAAO,cAAAnB,MAAA,WAAA,EAAY,aAAa;AAAA,0BAAA;;wBAY5CY,YASM,OAAA,EATD,OAAM,gBAAY;AAAA,0BACrBA,YAA4C,SAAA,EAArC,OAAM,aAAA,GAAa,YAAU;AAAA,yCACpCA,YAMS,UAAA;AAAA,4BANe,uBAAA,CAAA,WAAAZ,MAAA,WAAA,EAAY,WAAQ;AAAA,4BAAE,OAAM;AAAA,4BAAc,UAAA;AAAA,0BAAA;4BAChEY,YAAiD,UAAA,EAAxC,OAAO,EAAA,GAAG,uBAAqB;AAAA,4BACxCA,YAA+C,UAAA,EAAtC,OAAO,EAAA,GAAG,qBAAmB;AAAA,4BACtCA,YAAgD,UAAA,EAAvC,OAAO,EAAA,GAAG,sBAAoB;AAAA,4BACvCA,YAAsD,UAAA,EAA7C,OAAO,EAAA,GAAG,4BAA0B;AAAA,4BAC7CA,YAA4C,UAAA,EAAnC,OAAO,EAAA,GAAG,kBAAgB;AAAA,0BAAA;;;8BALbZ,MAAA,WAAA,EAAY;AAAA;8BAApB,EAAA,QAAR,KAAA;AAAA,4BAAqC;AAAA;;wBAS/CY,YAGM,OAAA,EAHD,OAAM,gBAAY;AAAA,0BACrBA,YAAoD,SAAA,EAA7C,OAAM,aAAA,GAAa,oBAAkB;AAAA,yCAC5CA,YAAwF,SAAA;AAAA,4BAAxE,uBAAA,CAAA,WAAAZ,MAAA,WAAA,EAAY,mBAAgB;AAAA,4BAAE,MAAK;AAAA,4BAAO,OAAM;AAAA,4BAAa,UAAA;AAAA,0BAAA;4BAA7D,CAAAoB,YAAApB,MAAA,WAAA,EAAY,gBAAgB;AAAA,0BAAA;;wBAG9CY,YAGM,OAAA,EAHD,OAAM,gBAAY;AAAA,0BACrBA,YAAkD,SAAA,EAA3C,OAAM,aAAA,GAAa,kBAAgB;AAAA,yCAC1CA,YAA6H,SAAA;AAAA,4BAA7G,uBAAA,CAAA,WAAAZ,MAAA,WAAA,EAAY,mBAAgB;AAAA,4BAAE,MAAK;AAAA,4BAAO,OAAM;AAAA,4BAAa,aAAY;AAAA,0BAAA;4BAAzE,CAAAoB,YAAApB,MAAA,WAAA,EAAY,gBAAgB;AAAA,0BAAA;;wBAG9CY,YAGM,OAAA,EAHD,OAAM,gBAAY;AAAA,0BACrBA,YAA6C,SAAA,EAAtC,OAAM,aAAA,GAAa,aAAW;AAAA,yCACrCA,YAA0E,SAAA;AAAA,4BAA1D,uBAAA,CAAA,WAAAZ,MAAA,WAAA,EAAY,cAAW;AAAA,4BAAE,MAAK;AAAA,4BAAO,OAAM;AAAA,0BAAA;4BAA3C,CAAAoB,YAAApB,MAAA,WAAA,EAAY,WAAW;AAAA,0BAAA;;wBAGzCY,YAGM,OAAA,EAHD,OAAM,gBAAY;AAAA,0BACrBA,YAA8C,SAAA,EAAvC,OAAM,aAAA,GAAa,cAAY;AAAA,yCACtCA,YAA0E,SAAA;AAAA,4BAA1D,uBAAA,CAAA,WAAAZ,MAAA,WAAA,EAAY,eAAY;AAAA,4BAAE,MAAK;AAAA,4BAAM,OAAM;AAAA,0BAAA;4BAA3C,CAAAoB,YAAApB,MAAA,WAAA,EAAY,YAAY;AAAA,0BAAA;;wBAG1CY,YAGM,OAAA,EAHD,OAAM,gBAAY;AAAA,0BACrBA,YAAiD,SAAA,EAA1C,OAAM,aAAA,GAAa,iBAAe;AAAA,yCACzCA,YAAiF,YAAA;AAAA,4BAA9D,uBAAA,CAAA,WAAAZ,MAAA,WAAA,EAAY,kBAAe;AAAA,4BAAE,OAAM;AAAA,0BAAA;4BAAnC,CAAAoB,YAAApB,MAAA,WAAA,EAAY,eAAe;AAAA,0BAAA;;wBAGhDY,YAOM,OAAA,EAPD,OAAM,mBAAe;AAAA,0BACxBA,YAES,UAAA;AAAA,4BAFD,MAAK;AAAA,4BAAU,qBAAO,qBAAA,QAAoB;AAAA,4BAAU,OAAM;AAAA,0BAAA,GAAoB,YAEtF,GAAA,CAAA,SAAA,CAAA;AAAA,0BACAA,YAES,UAAA;AAAA,4BAFD,MAAK;AAAA,4BAAS,OAAM;AAAA,4BAAmB,UAAUZ,MAAA,QAAA;AAAA,0BAAA,mBACpDA,MAAA,QAAA,IAAQ,gBAAA,iBAAA,GAAA,GAAA,CAAA,UAAA,CAAA;AAAA,wBAAA;;;;kBAOVA,MAAA,iBAAA,kBAAXa,YAwBM,OAAA;AAAA;oBAxBwB,OAAM;AAAA,oBAAiB,qBAAO,kBAAA,QAAiB;AAAA,kBAAA;oBAC3ED,YAsBM,OAAA;AAAA,sBAtBD,OAAM;AAAA,sBAAiB,uBAAD,MAAA;AAAA,sBAAA,GAAW,CAAA,MAAA,CAAA;AAAA,oBAAA;sBACpCA,YAAgC,YAA5B,yBAAuB;AAAA,sBAC3BA,YAmBO,QAAA;AAAA,wBAnBA,wBAAgB,cAAY,CAAA,SAAA,CAAA;AAAA,sBAAA;wBACjCA,YAQM,OAAA,EARD,OAAM,gBAAY;AAAA,0BACrBA,YAAmD,SAAA,EAA5C,OAAM,aAAA,GAAa,mBAAiB;AAAA,yCAC3CA,YAKS,UAAA;AAAA,4BALQ,uBAAA,CAAA,WAAAZ,MAAA,YAAA,EAAa,UAAO;AAAA,4BAAE,OAAM;AAAA,4BAAc,UAAA;AAAA,0BAAA;4BACzDY,YAAqC,UAAA,EAA7B,OAAM,GAAA,GAAG,aAAW;AAAA,8CAC5BC,YAESC,UAAA,MAAAC,WAFcf,MAAA,cAAA,GAAc,CAAtB,SAAI;kDAAnBa,YAES,UAAA;AAAA,gCAF+B,KAAK,KAAK;AAAA,gCAAK,OAAO,KAAK;AAAA,8BAAA,GAC9DG,gBAAA,KAAK,WAAW,IAAG,QAAGA,gBAAG,KAAK,WAAW,IAAI,IAAG,OAAEA,gBAAG,KAAK,MAAM,IAAG,MACxE,GAAA,CAAA,OAAA,CAAA;AAAA;;4BAJe,CAAAG,cAAAnB,MAAA,YAAA,EAAa,OAAO;AAAA,0BAAA;;wBAQvCY,YAOM,OAAA,EAPD,OAAM,mBAAe;AAAA,0BACxBA,YAES,UAAA;AAAA,4BAFD,MAAK;AAAA,4BAAU,qBAAO,kBAAA,QAAiB;AAAA,4BAAU,OAAM;AAAA,0BAAA,GAAoB,YAEnF,GAAA,CAAA,SAAA,CAAA;AAAA,0BACAA,YAES,UAAA;AAAA,4BAFD,MAAK;AAAA,4BAAS,OAAM;AAAA,4BAAmB,UAAUZ,MAAA,WAAA;AAAA,0BAAA,mBACpDA,MAAA,WAAA,IAAW,mBAAA,eAAA,GAAA,GAAA,CAAA,UAAA,CAAA;AAAA,wBAAA;;;;;;;;;;;;;;;;;;;;;","names":["_ssrRenderAttrs","_mergeProps","_unref","_ssrRenderList","_ssrInterpolate","_ssrIncludeBooleanAttr","_ssrRenderClass","_ssrLooseContain","_ssrLooseEqual","_ssrRenderAttr","index","_ssrRenderComponent","_push","_parent","_createVNode","_createBlock","_Fragment","_renderList","_toDisplayString","_openBlock","_Teleport","_vModelSelect","_vModelText"],"sources":["../../../../composables/usePTT.ts","../../../../composables/useTalkGroups.ts","../../../../components/CrewLink.vue","../../../../components/MapNavigation.vue","../../../../pages/cad/index.vue"],"sourcesContent":["export const usePTT = () => {\n  const { $supabase } = useNuxtApp()\n  const auth = useAuth()\n\n  const mediaRecorder = ref<MediaRecorder | null>(null)\n  const audioStream = ref<MediaStream | null>(null)\n  const isTransmitting = ref(false)\n  const currentSession = ref<any>(null)\n\n  const startTransmission = async (\n    channelId: string,\n    options: {\n      talkGroupId?: string\n      priority?: number\n      isEmergency?: boolean\n      location?: { lat: number; lng: number; address?: string }\n    } = {}\n  ) => {\n    const user = await auth.getUser()\n    if (!user) {\n      return { success: false, error: 'Not authenticated' }\n    }\n\n    const { data: crewData } = await $supabase\n      .from('crew_roster')\n      .select('id')\n      .eq('user_id', user.id)\n      .maybeSingle()\n\n    const { data: channel } = await $supabase\n      .from('ptt_channels')\n      .select('*')\n      .eq('id', channelId)\n      .single()\n\n    if (!channel) {\n      return { success: false, error: 'Channel not found' }\n    }\n\n    if (channel.current_speaker_id && !options.isEmergency) {\n      return { success: false, error: 'Channel is busy' }\n    }\n\n    if (channel.current_speaker_id && options.isEmergency) {\n      await $supabase\n        .from('ptt_sessions')\n        .update({\n          ended_at: new Date().toISOString(),\n          interrupted_by: user.id\n        })\n        .eq('channel_id', channelId)\n        .is('ended_at', null)\n    }\n\n    const { data: session, error } = await $supabase\n      .from('ptt_sessions')\n      .insert({\n        channel_id: channelId,\n        talk_group_id: options.talkGroupId || null,\n        speaker_id: user.id,\n        speaker_crew_id: crewData?.id || null,\n        priority: options.priority || 1,\n        is_emergency: options.isEmergency || false,\n        location_lat: options.location?.lat || null,\n        location_lng: options.location?.lng || null,\n        location_address: options.location?.address || null\n      })\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Failed to start PTT session:', error)\n      return { success: false, error: error.message }\n    }\n\n    await $supabase\n      .from('ptt_channels')\n      .update({\n        current_speaker_id: user.id,\n        speaking_started_at: new Date().toISOString()\n      })\n      .eq('id', channelId)\n\n    currentSession.value = session\n    isTransmitting.value = true\n\n    try {\n      audioStream.value = await navigator.mediaDevices.getUserMedia({ audio: true })\n      startRecording(session.id)\n    } catch (err) {\n      console.error('Failed to access microphone:', err)\n    }\n\n    return { success: true, session }\n  }\n\n  const endTransmission = async () => {\n    if (!currentSession.value) {\n      return { success: false, error: 'No active session' }\n    }\n\n    const endedAt = new Date()\n    const startedAt = new Date(currentSession.value.started_at)\n    const durationSeconds = Math.floor((endedAt.getTime() - startedAt.getTime()) / 1000)\n\n    await $supabase\n      .from('ptt_sessions')\n      .update({\n        ended_at: endedAt.toISOString(),\n        duration_seconds: durationSeconds\n      })\n      .eq('id', currentSession.value.id)\n\n    await $supabase\n      .from('ptt_channels')\n      .update({\n        current_speaker_id: null,\n        speaking_started_at: null\n      })\n      .eq('id', currentSession.value.channel_id)\n\n    stopRecording()\n\n    if (audioStream.value) {\n      audioStream.value.getTracks().forEach(track => track.stop())\n      audioStream.value = null\n    }\n\n    isTransmitting.value = false\n    currentSession.value = null\n\n    return { success: true }\n  }\n\n  const startRecording = (sessionId: string) => {\n    if (!audioStream.value) return\n\n    const chunks: Blob[] = []\n    mediaRecorder.value = new MediaRecorder(audioStream.value)\n\n    mediaRecorder.value.ondataavailable = (event) => {\n      if (event.data.size > 0) {\n        chunks.push(event.data)\n      }\n    }\n\n    mediaRecorder.value.onstop = async () => {\n      const blob = new Blob(chunks, { type: 'audio/webm' })\n      await saveRecording(sessionId, blob)\n    }\n\n    mediaRecorder.value.start(100)\n  }\n\n  const stopRecording = () => {\n    if (mediaRecorder.value && mediaRecorder.value.state !== 'inactive') {\n      mediaRecorder.value.stop()\n    }\n  }\n\n  const saveRecording = async (sessionId: string, audioBlob: Blob) => {\n    const user = await auth.getUser()\n    if (!user) return\n\n    const { data: session } = await $supabase\n      .from('ptt_sessions')\n      .select('*, channel:ptt_channels(organization_id)')\n      .eq('id', sessionId)\n      .single()\n\n    if (!session) return\n\n    const fileName = `ptt-${sessionId}-${Date.now()}.webm`\n    const fileSizeBytes = audioBlob.size\n    const durationSeconds = session.duration_seconds || 0\n\n    await $supabase\n      .from('ptt_recordings')\n      .insert({\n        session_id: sessionId,\n        organization_id: session.channel.organization_id,\n        storage_path: fileName,\n        file_size_bytes: fileSizeBytes,\n        duration_seconds: durationSeconds,\n        format: 'webm',\n        is_available: true\n      })\n  }\n\n  const updatePresence = async (status: string, options: {\n    doNotDisturb?: boolean\n    channelId?: string\n    talkGroupId?: string\n    location?: { lat: number; lng: number }\n  } = {}) => {\n    const user = await auth.getUser()\n    if (!user) return\n\n    const { data: crewData } = await $supabase\n      .from('crew_roster')\n      .select('id')\n      .eq('user_id', user.id)\n      .maybeSingle()\n\n    const { data: existing } = await $supabase\n      .from('ptt_presence')\n      .select('id')\n      .eq('user_id', user.id)\n      .maybeSingle()\n\n    const presenceData = {\n      user_id: user.id,\n      crew_id: crewData?.id || null,\n      status,\n      do_not_disturb: options.doNotDisturb || false,\n      current_channel_id: options.channelId || null,\n      current_talk_group_id: options.talkGroupId || null,\n      location_lat: options.location?.lat || null,\n      location_lng: options.location?.lng || null,\n      last_active_at: new Date().toISOString(),\n      updated_at: new Date().toISOString()\n    }\n\n    if (existing) {\n      await $supabase\n        .from('ptt_presence')\n        .update(presenceData)\n        .eq('id', existing.id)\n    } else {\n      await $supabase\n        .from('ptt_presence')\n        .insert(presenceData)\n    }\n  }\n\n  const getActivePresence = async (organizationId: string) => {\n    const { data, error } = await $supabase\n      .from('ptt_presence')\n      .select(`\n        *,\n        user:users(full_name, email),\n        crew:crew_roster(certification_level, employee_id),\n        channel:ptt_channels(channel_name),\n        talk_group:talk_groups(group_name)\n      `)\n      .eq('status', 'online')\n      .gte('last_active_at', new Date(Date.now() - 5 * 60 * 1000).toISOString())\n\n    if (error) {\n      console.error('Failed to fetch presence:', error)\n      return []\n    }\n\n    return data || []\n  }\n\n  const initiateEmergencyBroadcast = async (broadcast: {\n    organizationId: string\n    emergencyType: string\n    title: string\n    message: string\n    incidentId?: string\n    targetScope?: string\n    location?: { lat: number; lng: number }\n  }) => {\n    const user = await auth.getUser()\n    if (!user) {\n      return { success: false, error: 'Not authenticated' }\n    }\n\n    const { data, error } = await $supabase\n      .from('emergency_broadcasts')\n      .insert({\n        organization_id: broadcast.organizationId,\n        initiated_by: user.id,\n        emergency_type: broadcast.emergencyType,\n        priority: 10,\n        title: broadcast.title,\n        message: broadcast.message,\n        incident_id: broadcast.incidentId || null,\n        target_scope: broadcast.targetScope || 'organization',\n        target_location_lat: broadcast.location?.lat || null,\n        target_location_lng: broadcast.location?.lng || null,\n        requires_acknowledgment: true\n      })\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Failed to initiate emergency broadcast:', error)\n      return { success: false, error: error.message }\n    }\n\n    return { success: true, data }\n  }\n\n  const acknowledgeEmergencyBroadcast = async (\n    broadcastId: string,\n    options: {\n      location?: { lat: number; lng: number }\n      notes?: string\n    } = {}\n  ) => {\n    const user = await auth.getUser()\n    if (!user) {\n      return { success: false, error: 'Not authenticated' }\n    }\n\n    const { data: crewData } = await $supabase\n      .from('crew_roster')\n      .select('id')\n      .eq('user_id', user.id)\n      .maybeSingle()\n\n    const { error } = await $supabase\n      .from('emergency_broadcast_acks')\n      .insert({\n        broadcast_id: broadcastId,\n        user_id: user.id,\n        crew_id: crewData?.id || null,\n        location_lat: options.location?.lat || null,\n        location_lng: options.location?.lng || null,\n        notes: options.notes || null\n      })\n\n    if (error) {\n      console.error('Failed to acknowledge emergency broadcast:', error)\n      return { success: false, error: error.message }\n    }\n\n    await $supabase.rpc('increment', {\n      table_name: 'emergency_broadcasts',\n      row_id: broadcastId,\n      column_name: 'acknowledged_count'\n    })\n\n    return { success: true }\n  }\n\n  const getChannelHistory = async (channelId: string, limit: number = 50) => {\n    const { data, error } = await $supabase\n      .from('ptt_sessions')\n      .select(`\n        *,\n        speaker:users(full_name, email),\n        crew:crew_roster(certification_level, employee_id),\n        recording:ptt_recordings(*)\n      `)\n      .eq('channel_id', channelId)\n      .order('started_at', { ascending: false })\n      .limit(limit)\n\n    if (error) {\n      console.error('Failed to fetch channel history:', error)\n      return []\n    }\n\n    return data || []\n  }\n\n  const subscribeToChannel = (\n    channelId: string,\n    callbacks: {\n      onTransmissionStart?: (session: any) => void\n      onTransmissionEnd?: (session: any) => void\n    }\n  ) => {\n    const channel = $supabase\n      .channel(`ptt-channel-${channelId}`)\n      .on(\n        'postgres_changes',\n        {\n          event: 'INSERT',\n          schema: 'public',\n          table: 'ptt_sessions',\n          filter: `channel_id=eq.${channelId}`\n        },\n        (payload) => {\n          if (callbacks.onTransmissionStart) {\n            callbacks.onTransmissionStart(payload.new)\n          }\n        }\n      )\n      .on(\n        'postgres_changes',\n        {\n          event: 'UPDATE',\n          schema: 'public',\n          table: 'ptt_sessions',\n          filter: `channel_id=eq.${channelId}`\n        },\n        (payload) => {\n          if (payload.new.ended_at && callbacks.onTransmissionEnd) {\n            callbacks.onTransmissionEnd(payload.new)\n          }\n        }\n      )\n      .subscribe()\n\n    return () => {\n      $supabase.removeChannel(channel)\n    }\n  }\n\n  return {\n    isTransmitting,\n    currentSession,\n    startTransmission,\n    endTransmission,\n    updatePresence,\n    getActivePresence,\n    initiateEmergencyBroadcast,\n    acknowledgeEmergencyBroadcast,\n    getChannelHistory,\n    subscribeToChannel\n  }\n}\n","export const useTalkGroups = () => {\n  const { $supabase } = useNuxtApp()\n  const auth = useAuth()\n\n  const getTalkGroups = async (organizationId: string) => {\n    const { data, error } = await $supabase\n      .from('talk_groups')\n      .select(`\n        *,\n        members:talk_group_members(\n          *,\n          user:users(full_name, email),\n          crew:crew_roster(certification_level)\n        ),\n        channel:ptt_channels(*)\n      `)\n      .eq('organization_id', organizationId)\n      .eq('is_active', true)\n      .order('priority_level', { ascending: false })\n\n    if (error) {\n      console.error('Failed to fetch talk groups:', error)\n      return []\n    }\n\n    return data || []\n  }\n\n  const getTalkGroup = async (groupId: string) => {\n    const { data, error } = await $supabase\n      .from('talk_groups')\n      .select(`\n        *,\n        members:talk_group_members(\n          *,\n          user:users(full_name, email),\n          crew:crew_roster(certification_level, employee_id)\n        ),\n        channel:ptt_channels(\n          *,\n          current_speaker:users(full_name)\n        )\n      `)\n      .eq('id', groupId)\n      .single()\n\n    if (error) {\n      console.error('Failed to fetch talk group:', error)\n      return null\n    }\n\n    return data\n  }\n\n  const createTalkGroup = async (group: {\n    organizationId: string\n    groupName: string\n    groupType?: string\n    description?: string\n    priorityLevel?: number\n    isEmergency?: boolean\n    autoJoin?: boolean\n    incidentId?: string\n    station?: string\n    maxMembers?: number\n  }) => {\n    const user = await auth.getUser()\n    if (!user) {\n      return { success: false, error: 'Not authenticated' }\n    }\n\n    const { data: groupData, error: groupError } = await $supabase\n      .from('talk_groups')\n      .insert({\n        organization_id: group.organizationId,\n        group_name: group.groupName,\n        group_type: group.groupType || 'standard',\n        description: group.description || null,\n        priority_level: group.priorityLevel || 1,\n        is_emergency: group.isEmergency || false,\n        auto_join: group.autoJoin || false,\n        created_by: user.id,\n        incident_id: group.incidentId || null,\n        station: group.station || null,\n        max_members: group.maxMembers || null\n      })\n      .select()\n      .single()\n\n    if (groupError) {\n      console.error('Failed to create talk group:', groupError)\n      return { success: false, error: groupError.message }\n    }\n\n    const { data: channelData, error: channelError } = await $supabase\n      .from('ptt_channels')\n      .insert({\n        organization_id: group.organizationId,\n        talk_group_id: groupData.id,\n        channel_type: 'group',\n        channel_name: group.groupName,\n        is_emergency: group.isEmergency || false,\n        priority_level: group.priorityLevel || 1\n      })\n      .select()\n      .single()\n\n    if (channelError) {\n      console.error('Failed to create PTT channel:', channelError)\n    }\n\n    if (group.autoJoin) {\n      await joinTalkGroup(groupData.id)\n    }\n\n    return { success: true, data: groupData }\n  }\n\n  const joinTalkGroup = async (groupId: string, role: string = 'member') => {\n    const user = await auth.getUser()\n    if (!user) {\n      return { success: false, error: 'Not authenticated' }\n    }\n\n    const { data: crewData } = await $supabase\n      .from('crew_roster')\n      .select('id')\n      .eq('user_id', user.id)\n      .maybeSingle()\n\n    const { data: existing } = await $supabase\n      .from('talk_group_members')\n      .select('id, is_active')\n      .eq('talk_group_id', groupId)\n      .eq('user_id', user.id)\n      .maybeSingle()\n\n    if (existing) {\n      if (!existing.is_active) {\n        await $supabase\n          .from('talk_group_members')\n          .update({\n            is_active: true,\n            joined_at: new Date().toISOString(),\n            left_at: null\n          })\n          .eq('id', existing.id)\n      }\n      return { success: true }\n    }\n\n    const { error } = await $supabase\n      .from('talk_group_members')\n      .insert({\n        talk_group_id: groupId,\n        user_id: user.id,\n        crew_id: crewData?.id || null,\n        role\n      })\n\n    if (error) {\n      console.error('Failed to join talk group:', error)\n      return { success: false, error: error.message }\n    }\n\n    return { success: true }\n  }\n\n  const leaveTalkGroup = async (groupId: string) => {\n    const user = await auth.getUser()\n    if (!user) {\n      return { success: false, error: 'Not authenticated' }\n    }\n\n    const { error } = await $supabase\n      .from('talk_group_members')\n      .update({\n        is_active: false,\n        left_at: new Date().toISOString()\n      })\n      .eq('talk_group_id', groupId)\n      .eq('user_id', user.id)\n\n    if (error) {\n      console.error('Failed to leave talk group:', error)\n      return { success: false, error: error.message }\n    }\n\n    return { success: true }\n  }\n\n  const getMyTalkGroups = async () => {\n    const user = await auth.getUser()\n    if (!user) return []\n\n    const { data, error } = await $supabase\n      .from('talk_group_members')\n      .select(`\n        *,\n        talk_group:talk_groups(\n          *,\n          channel:ptt_channels(\n            *,\n            current_speaker:users(full_name)\n          )\n        )\n      `)\n      .eq('user_id', user.id)\n      .eq('is_active', true)\n\n    if (error) {\n      console.error('Failed to fetch user talk groups:', error)\n      return []\n    }\n\n    return data?.map(m => m.talk_group) || []\n  }\n\n  const getChannelForGroup = async (groupId: string) => {\n    const { data, error } = await $supabase\n      .from('ptt_channels')\n      .select(`\n        *,\n        talk_group:talk_groups(*),\n        current_speaker:users(full_name, email)\n      `)\n      .eq('talk_group_id', groupId)\n      .eq('is_active', true)\n      .maybeSingle()\n\n    if (error) {\n      console.error('Failed to fetch channel for group:', error)\n      return null\n    }\n\n    return data\n  }\n\n  const createDirectChannel = async (targetUserId: string, organizationId: string) => {\n    const user = await auth.getUser()\n    if (!user) {\n      return { success: false, error: 'Not authenticated' }\n    }\n\n    const channelName = `Direct: ${user.id} <-> ${targetUserId}`\n\n    const { data, error } = await $supabase\n      .from('ptt_channels')\n      .insert({\n        organization_id: organizationId,\n        channel_type: 'direct',\n        channel_name: channelName,\n        priority_level: 1\n      })\n      .select()\n      .single()\n\n    if (error) {\n      console.error('Failed to create direct channel:', error)\n      return { success: false, error: error.message }\n    }\n\n    return { success: true, data }\n  }\n\n  const getActiveBroadcasts = async (organizationId: string) => {\n    const { data, error } = await $supabase\n      .from('emergency_broadcasts')\n      .select(`\n        *,\n        initiator:users(full_name, email),\n        acknowledgments:emergency_broadcast_acks(\n          *,\n          user:users(full_name)\n        )\n      `)\n      .eq('organization_id', organizationId)\n      .eq('is_active', true)\n      .order('started_at', { ascending: false })\n\n    if (error) {\n      console.error('Failed to fetch active broadcasts:', error)\n      return []\n    }\n\n    return data || []\n  }\n\n  const updateTalkGroup = async (\n    groupId: string,\n    updates: {\n      groupName?: string\n      description?: string\n      priorityLevel?: number\n      isActive?: boolean\n    }\n  ) => {\n    const { error } = await $supabase\n      .from('talk_groups')\n      .update({\n        group_name: updates.groupName,\n        description: updates.description,\n        priority_level: updates.priorityLevel,\n        is_active: updates.isActive,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', groupId)\n\n    if (error) {\n      console.error('Failed to update talk group:', error)\n      return { success: false, error: error.message }\n    }\n\n    return { success: true }\n  }\n\n  const deleteTalkGroup = async (groupId: string) => {\n    const { error } = await $supabase\n      .from('talk_groups')\n      .update({\n        is_active: false,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', groupId)\n\n    if (error) {\n      console.error('Failed to delete talk group:', error)\n      return { success: false, error: error.message }\n    }\n\n    return { success: true }\n  }\n\n  const subscribeToTalkGroupUpdates = (\n    organizationId: string,\n    callback: (group: any) => void\n  ) => {\n    const channel = $supabase\n      .channel('talk-groups')\n      .on(\n        'postgres_changes',\n        {\n          event: '*',\n          schema: 'public',\n          table: 'talk_groups',\n          filter: `organization_id=eq.${organizationId}`\n        },\n        (payload) => {\n          callback(payload.new)\n        }\n      )\n      .subscribe()\n\n    return () => {\n      $supabase.removeChannel(channel)\n    }\n  }\n\n  return {\n    getTalkGroups,\n    getTalkGroup,\n    createTalkGroup,\n    joinTalkGroup,\n    leaveTalkGroup,\n    getMyTalkGroups,\n    getChannelForGroup,\n    createDirectChannel,\n    getActiveBroadcasts,\n    updateTalkGroup,\n    deleteTalkGroup,\n    subscribeToTalkGroupUpdates\n  }\n}\n","<template>\n  <div class=\"crewlink-ptt\">\n    <div class=\"ptt-header\">\n      <h1>CrewLink PTT</h1>\n      <div class=\"header-controls\">\n        <button @click=\"showEmergencyModal = true\" class=\"btn-emergency\">\n          Emergency Broadcast\n        </button>\n        <button @click=\"showGroupsModal = true\" class=\"btn-secondary\">\n          Manage Groups\n        </button>\n      </div>\n    </div>\n\n    <div class=\"ptt-layout\">\n      <div class=\"ptt-main\">\n        <div class=\"talk-group-selector\">\n          <label>Active Talk Group</label>\n          <select v-model=\"selectedGroupId\" class=\"form-select\" @change=\"switchTalkGroup\">\n            <option value=\"\">Select a group...</option>\n            <option v-for=\"group in myTalkGroups\" :key=\"group.id\" :value=\"group.id\">\n              {{ group.group_name }}\n              {{ group.priority_level > 5 ? ' [PRIORITY]' : '' }}\n            </option>\n          </select>\n        </div>\n\n        <div v-if=\"currentChannel\" class=\"channel-info\">\n          <div class=\"channel-status\">\n            <span class=\"channel-name\">{{ currentChannel.channel_name }}</span>\n            <span v-if=\"currentChannel.is_emergency\" class=\"badge-emergency\">EMERGENCY</span>\n            <span class=\"participant-count\">{{ onlineUsers.length }} online</span>\n          </div>\n\n          <div v-if=\"currentChannel.current_speaker_id\" class=\"active-speaker\">\n            <div class=\"speaker-indicator pulsing\"></div>\n            <span>{{ currentChannel.current_speaker?.full_name || 'Unknown' }} is speaking...</span>\n          </div>\n\n          <div v-else-if=\"!isTransmitting\" class=\"channel-idle\">\n            Channel clear - Press to talk\n          </div>\n        </div>\n\n        <div class=\"ptt-controls\">\n          <button\n            v-if=\"currentChannel\"\n            @mousedown=\"startTalking\"\n            @mouseup=\"stopTalking\"\n            @mouseleave=\"stopTalking\"\n            @touchstart=\"startTalking\"\n            @touchend=\"stopTalking\"\n            :class=\"['ptt-button', { active: isTransmitting, disabled: !currentChannel || channelBusy }]\"\n            :disabled=\"!currentChannel || channelBusy\"\n          >\n            <div class=\"ptt-icon\">\n              <svg v-if=\"!isTransmitting\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\"/>\n                <path d=\"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z\"/>\n              </svg>\n              <svg v-else viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\"/>\n                <circle cx=\"12\" cy=\"12\" r=\"8\" fill=\"currentColor\" opacity=\"0.3\">\n                  <animate attributeName=\"r\" from=\"8\" to=\"12\" dur=\"1s\" repeatCount=\"indefinite\"/>\n                  <animate attributeName=\"opacity\" from=\"0.3\" to=\"0\" dur=\"1s\" repeatCount=\"indefinite\"/>\n                </circle>\n              </svg>\n            </div>\n            <span class=\"ptt-text\">\n              {{ isTransmitting ? 'TRANSMITTING' : 'PUSH TO TALK' }}\n            </span>\n            <span class=\"ptt-hint\">Press and hold</span>\n          </button>\n\n          <div v-else class=\"no-channel-selected\">\n            <p>Select a talk group to start communicating</p>\n          </div>\n        </div>\n\n        <div v-if=\"activeBroadcasts.length > 0\" class=\"emergency-alerts\">\n          <div\n            v-for=\"broadcast in activeBroadcasts\"\n            :key=\"broadcast.id\"\n            class=\"emergency-alert pulsing\"\n          >\n            <div class=\"alert-header\">\n              <span class=\"alert-type\">{{ broadcast.emergency_type }}</span>\n              <span class=\"alert-time\">{{ formatTime(broadcast.started_at) }}</span>\n            </div>\n            <div class=\"alert-title\">{{ broadcast.title }}</div>\n            <div class=\"alert-message\">{{ broadcast.message }}</div>\n            <button\n              v-if=\"!hasAcknowledged(broadcast.id)\"\n              @click=\"acknowledgeBroadcast(broadcast.id)\"\n              class=\"btn-acknowledge\"\n            >\n              Acknowledge ({{ broadcast.acknowledged_count }}/{{ onlineUsers.length }})\n            </button>\n            <div v-else class=\"acknowledged\">Acknowledged</div>\n          </div>\n        </div>\n\n        <div class=\"online-users\">\n          <h3>Online Users ({{ onlineUsers.length }})</h3>\n          <div class=\"users-list\">\n            <div\n              v-for=\"presence in onlineUsers\"\n              :key=\"presence.id\"\n              class=\"user-presence\"\n              :class=\"{ speaking: presence.user_id === currentChannel?.current_speaker_id }\"\n            >\n              <div class=\"presence-indicator\"></div>\n              <div class=\"user-info\">\n                <span class=\"user-name\">{{ presence.user?.full_name }}</span>\n                <span class=\"user-cert\">{{ presence.crew?.certification_level }}</span>\n              </div>\n              <span v-if=\"presence.do_not_disturb\" class=\"dnd-badge\">DND</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"ptt-sidebar\">\n        <div class=\"sidebar-section\">\n          <h3>Talk Groups</h3>\n          <div class=\"groups-list\">\n            <div\n              v-for=\"group in myTalkGroups\"\n              :key=\"group.id\"\n              class=\"group-card\"\n              :class=\"{ active: group.id === selectedGroupId, emergency: group.is_emergency }\"\n              @click=\"selectGroup(group.id)\"\n            >\n              <div class=\"group-name\">{{ group.group_name }}</div>\n              <div class=\"group-meta\">\n                <span class=\"group-type\">{{ group.group_type }}</span>\n                <span v-if=\"group.channel?.current_speaker_id\" class=\"speaking-indicator\">\n                  Speaking\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"sidebar-section\">\n          <h3>Recent Transmissions</h3>\n          <div class=\"history-list\">\n            <div\n              v-for=\"session in recentSessions\"\n              :key=\"session.id\"\n              class=\"history-item\"\n            >\n              <div class=\"session-speaker\">{{ session.speaker?.full_name }}</div>\n              <div class=\"session-meta\">\n                <span class=\"session-time\">{{ formatTime(session.started_at) }}</span>\n                <span class=\"session-duration\">{{ session.duration_seconds }}s</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"showEmergencyModal\" class=\"modal-overlay\" @click=\"showEmergencyModal = false\">\n      <div class=\"modal-content emergency-modal\" @click.stop>\n        <div class=\"modal-header\">\n          <h2>Emergency Broadcast</h2>\n          <button @click=\"showEmergencyModal = false\" class=\"btn-close\">&times;</button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"form-group\">\n            <label>Emergency Type</label>\n            <select v-model=\"emergencyBroadcast.type\" class=\"form-select\">\n              <option value=\"mayday\">Mayday</option>\n              <option value=\"officer_down\">Officer Down</option>\n              <option value=\"mass_casualty\">Mass Casualty</option>\n              <option value=\"hazmat\">Hazmat</option>\n              <option value=\"evacuation\">Evacuation</option>\n              <option value=\"all_call\">All Call</option>\n            </select>\n          </div>\n\n          <div class=\"form-group\">\n            <label>Title</label>\n            <input v-model=\"emergencyBroadcast.title\" type=\"text\" class=\"form-input\" />\n          </div>\n\n          <div class=\"form-group\">\n            <label>Message</label>\n            <textarea\n              v-model=\"emergencyBroadcast.message\"\n              class=\"form-textarea\"\n              rows=\"4\"\n            ></textarea>\n          </div>\n\n          <div class=\"form-group\">\n            <label>Target Scope</label>\n            <select v-model=\"emergencyBroadcast.scope\" class=\"form-select\">\n              <option value=\"organization\">Entire Organization</option>\n              <option value=\"station\">Specific Station</option>\n              <option value=\"radius\">Geographic Radius</option>\n            </select>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button @click=\"showEmergencyModal = false\" class=\"btn-secondary\">Cancel</button>\n          <button @click=\"broadcastEmergency\" class=\"btn-emergency\">\n            Send Emergency Broadcast\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"showGroupsModal\" class=\"modal-overlay\" @click=\"showGroupsModal = false\">\n      <div class=\"modal-content\" @click.stop>\n        <div class=\"modal-header\">\n          <h2>Manage Talk Groups</h2>\n          <button @click=\"showGroupsModal = false\" class=\"btn-close\">&times;</button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"groups-management\">\n            <div\n              v-for=\"group in allTalkGroups\"\n              :key=\"group.id\"\n              class=\"group-item\"\n            >\n              <div class=\"group-info-full\">\n                <div class=\"group-header-row\">\n                  <span class=\"group-name-full\">{{ group.group_name }}</span>\n                  <span class=\"priority-badge\">P{{ group.priority_level }}</span>\n                </div>\n                <p class=\"group-description\">{{ group.description }}</p>\n                <div class=\"group-stats\">\n                  <span>{{ group.members?.length || 0 }} members</span>\n                  <span>{{ group.group_type }}</span>\n                </div>\n              </div>\n              <div class=\"group-actions\">\n                <button\n                  v-if=\"!isMember(group.id)\"\n                  @click=\"joinGroup(group.id)\"\n                  class=\"btn-join\"\n                >\n                  Join\n                </button>\n                <button\n                  v-else\n                  @click=\"leaveGroup(group.id)\"\n                  class=\"btn-leave\"\n                >\n                  Leave\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\ninterface Props {\n  organizationId: string\n}\n\nconst props = defineProps<Props>()\n\nconst ptt = usePTT()\nconst talkGroups = useTalkGroups()\n\nconst myTalkGroups = ref<any[]>([])\nconst allTalkGroups = ref<any[]>([])\nconst selectedGroupId = ref('')\nconst currentChannel = ref<any>(null)\nconst onlineUsers = ref<any[]>([])\nconst recentSessions = ref<any[]>([])\nconst activeBroadcasts = ref<any[]>([])\nconst isTransmitting = ref(false)\nconst channelBusy = ref(false)\nconst showEmergencyModal = ref(false)\nconst showGroupsModal = ref(false)\nconst acknowledgedBroadcasts = ref<Set<string>>(new Set())\n\nconst emergencyBroadcast = ref({\n  type: 'all_call',\n  title: '',\n  message: '',\n  scope: 'organization'\n})\n\nconst loadTalkGroups = async () => {\n  const [myGroups, allGroups] = await Promise.all([\n    talkGroups.getMyTalkGroups(),\n    talkGroups.getTalkGroups(props.organizationId)\n  ])\n  myTalkGroups.value = myGroups\n  allTalkGroups.value = allGroups\n}\n\nconst switchTalkGroup = async () => {\n  if (!selectedGroupId.value) {\n    currentChannel.value = null\n    return\n  }\n\n  const channel = await talkGroups.getChannelForGroup(selectedGroupId.value)\n  currentChannel.value = channel\n\n  if (channel) {\n    loadChannelHistory(channel.id)\n    ptt.updatePresence('online', {\n      channelId: channel.id,\n      talkGroupId: selectedGroupId.value\n    })\n  }\n}\n\nconst selectGroup = (groupId: string) => {\n  selectedGroupId.value = groupId\n  switchTalkGroup()\n}\n\nconst startTalking = async () => {\n  if (!currentChannel.value || channelBusy.value) return\n\n  const result = await ptt.startTransmission(currentChannel.value.id, {\n    talkGroupId: selectedGroupId.value,\n    priority: currentChannel.value.priority_level\n  })\n\n  if (result.success) {\n    isTransmitting.value = true\n  }\n}\n\nconst stopTalking = async () => {\n  if (!isTransmitting.value) return\n\n  await ptt.endTransmission()\n  isTransmitting.value = false\n  loadChannelHistory(currentChannel.value.id)\n}\n\nconst loadChannelHistory = async (channelId: string) => {\n  const sessions = await ptt.getChannelHistory(channelId, 20)\n  recentSessions.value = sessions\n}\n\nconst loadPresence = async () => {\n  const presence = await ptt.getActivePresence(props.organizationId)\n  onlineUsers.value = presence\n}\n\nconst loadBroadcasts = async () => {\n  const broadcasts = await talkGroups.getActiveBroadcasts(props.organizationId)\n  activeBroadcasts.value = broadcasts\n}\n\nconst broadcastEmergency = async () => {\n  await ptt.initiateEmergencyBroadcast({\n    organizationId: props.organizationId,\n    emergencyType: emergencyBroadcast.value.type,\n    title: emergencyBroadcast.value.title,\n    message: emergencyBroadcast.value.message,\n    targetScope: emergencyBroadcast.value.scope\n  })\n\n  showEmergencyModal.value = false\n  emergencyBroadcast.value = {\n    type: 'all_call',\n    title: '',\n    message: '',\n    scope: 'organization'\n  }\n\n  loadBroadcasts()\n}\n\nconst acknowledgeBroadcast = async (broadcastId: string) => {\n  await ptt.acknowledgeEmergencyBroadcast(broadcastId)\n  acknowledgedBroadcasts.value.add(broadcastId)\n  loadBroadcasts()\n}\n\nconst hasAcknowledged = (broadcastId: string) => {\n  return acknowledgedBroadcasts.value.has(broadcastId)\n}\n\nconst joinGroup = async (groupId: string) => {\n  await talkGroups.joinTalkGroup(groupId)\n  loadTalkGroups()\n}\n\nconst leaveGroup = async (groupId: string) => {\n  await talkGroups.leaveTalkGroup(groupId)\n  loadTalkGroups()\n}\n\nconst isMember = (groupId: string) => {\n  return myTalkGroups.value.some(g => g.id === groupId)\n}\n\nconst formatTime = (timestamp: string) => {\n  return new Date(timestamp).toLocaleTimeString()\n}\n\nwatch(() => currentChannel.value?.current_speaker_id, (newSpeaker) => {\n  channelBusy.value = !!newSpeaker && newSpeaker !== ptt.currentSession.value?.speaker_id\n})\n\nonMounted(() => {\n  loadTalkGroups()\n  loadPresence()\n  loadBroadcasts()\n\n  const presenceInterval = setInterval(loadPresence, 10000)\n  const broadcastInterval = setInterval(loadBroadcasts, 5000)\n\n  ptt.updatePresence('online')\n\n  onUnmounted(() => {\n    clearInterval(presenceInterval)\n    clearInterval(broadcastInterval)\n    ptt.updatePresence('offline')\n  })\n})\n</script>\n\n<style scoped>\n.crewlink-ptt {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: var(--color-dark-400);\n}\n\n.ptt-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: var(--spacing-6);\n  border-bottom: 2px solid var(--color-primary-500);\n  background: var(--color-dark-300);\n}\n\n.ptt-header h1 {\n  font-size: 2rem;\n  margin: 0;\n  color: var(--color-primary-500);\n}\n\n.header-controls {\n  display: flex;\n  gap: var(--spacing-3);\n}\n\n.btn-emergency {\n  padding: var(--spacing-3) var(--spacing-6);\n  background: var(--color-error-500);\n  border: none;\n  border-radius: var(--border-radius-md);\n  color: #ffffff;\n  font-weight: 700;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  animation: pulse-red 2s infinite;\n}\n\n.btn-emergency:hover {\n  background: #b91c1c;\n  transform: scale(1.05);\n}\n\n@keyframes pulse-red {\n  0%, 100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7); }\n  50% { box-shadow: 0 0 0 15px rgba(220, 38, 38, 0); }\n}\n\n.ptt-layout {\n  flex: 1;\n  display: grid;\n  grid-template-columns: 1fr 400px;\n  gap: 0;\n  overflow: hidden;\n}\n\n.ptt-main {\n  display: flex;\n  flex-direction: column;\n  padding: var(--spacing-6);\n  gap: var(--spacing-6);\n  overflow-y: auto;\n}\n\n.talk-group-selector {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-2);\n}\n\n.talk-group-selector label {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-gray-400);\n  text-transform: uppercase;\n}\n\n.channel-info {\n  padding: var(--spacing-4);\n  background: var(--color-dark-300);\n  border: 2px solid var(--color-dark-50);\n  border-radius: var(--border-radius-lg);\n}\n\n.channel-status {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-3);\n  margin-bottom: var(--spacing-3);\n}\n\n.channel-name {\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: #ffffff;\n}\n\n.badge-emergency {\n  padding: var(--spacing-1) var(--spacing-2);\n  background: var(--color-error-500);\n  color: #ffffff;\n  border-radius: var(--border-radius-sm);\n  font-size: 0.625rem;\n  font-weight: 700;\n  animation: pulse-red 2s infinite;\n}\n\n.participant-count {\n  margin-left: auto;\n  font-size: 0.875rem;\n  color: var(--color-gray-500);\n}\n\n.active-speaker {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-2);\n  padding: var(--spacing-3);\n  background: rgba(255, 107, 0, 0.1);\n  border-radius: var(--border-radius-md);\n  color: var(--color-primary-500);\n  font-weight: 600;\n}\n\n.speaker-indicator {\n  width: 12px;\n  height: 12px;\n  background: var(--color-primary-500);\n  border-radius: 50%;\n}\n\n.speaker-indicator.pulsing {\n  animation: pulse 1s infinite;\n}\n\n@keyframes pulse {\n  0%, 100% { transform: scale(1); opacity: 1; }\n  50% { transform: scale(1.5); opacity: 0.5; }\n}\n\n.channel-idle {\n  padding: var(--spacing-3);\n  text-align: center;\n  color: var(--color-gray-500);\n  font-size: 0.875rem;\n}\n\n.ptt-controls {\n  display: flex;\n  justify-content: center;\n  padding: var(--spacing-8) 0;\n}\n\n.ptt-button {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 300px;\n  height: 300px;\n  background: linear-gradient(135deg, var(--color-dark-200) 0%, var(--color-dark-300) 100%);\n  border: 4px solid var(--color-primary-500);\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  user-select: none;\n}\n\n.ptt-button:hover:not(.disabled) {\n  transform: scale(1.05);\n  box-shadow: 0 0 40px rgba(255, 107, 0, 0.4);\n}\n\n.ptt-button:active:not(.disabled),\n.ptt-button.active {\n  transform: scale(0.95);\n  background: var(--color-primary-500);\n  border-color: #ff8c00;\n  box-shadow: 0 0 60px rgba(255, 107, 0, 0.6);\n}\n\n.ptt-button.disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.ptt-icon {\n  width: 80px;\n  height: 80px;\n  margin-bottom: var(--spacing-4);\n  color: var(--color-primary-500);\n}\n\n.ptt-button.active .ptt-icon {\n  color: var(--color-dark-400);\n}\n\n.ptt-text {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--color-primary-500);\n  margin-bottom: var(--spacing-2);\n}\n\n.ptt-button.active .ptt-text {\n  color: var(--color-dark-400);\n}\n\n.ptt-hint {\n  font-size: 0.875rem;\n  color: var(--color-gray-500);\n}\n\n.ptt-button.active .ptt-hint {\n  color: var(--color-dark-400);\n}\n\n.no-channel-selected {\n  text-align: center;\n  padding: var(--spacing-8);\n  color: var(--color-gray-500);\n}\n\n.emergency-alerts {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-3);\n}\n\n.emergency-alert {\n  padding: var(--spacing-4);\n  background: rgba(220, 38, 38, 0.2);\n  border: 2px solid var(--color-error-500);\n  border-radius: var(--border-radius-lg);\n  animation: pulse-red 2s infinite;\n}\n\n.alert-header {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: var(--spacing-2);\n}\n\n.alert-type {\n  padding: var(--spacing-1) var(--spacing-2);\n  background: var(--color-error-500);\n  color: #ffffff;\n  border-radius: var(--border-radius-sm);\n  font-size: 0.75rem;\n  font-weight: 700;\n  text-transform: uppercase;\n}\n\n.alert-time {\n  font-size: 0.75rem;\n  color: var(--color-gray-400);\n}\n\n.alert-title {\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: var(--color-error-500);\n  margin-bottom: var(--spacing-2);\n}\n\n.alert-message {\n  color: #ffffff;\n  margin-bottom: var(--spacing-3);\n}\n\n.btn-acknowledge {\n  padding: var(--spacing-2) var(--spacing-4);\n  background: var(--color-error-500);\n  border: none;\n  border-radius: var(--border-radius-md);\n  color: #ffffff;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.acknowledged {\n  padding: var(--spacing-2);\n  color: #10b981;\n  font-weight: 600;\n  text-align: center;\n}\n\n.online-users {\n  background: var(--color-dark-300);\n  border-radius: var(--border-radius-lg);\n  padding: var(--spacing-4);\n}\n\n.online-users h3 {\n  margin: 0 0 var(--spacing-3) 0;\n  color: #ffffff;\n}\n\n.users-list {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-2);\n}\n\n.user-presence {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-2);\n  padding: var(--spacing-2);\n  border-radius: var(--border-radius-md);\n  transition: all 0.2s ease;\n}\n\n.user-presence.speaking {\n  background: rgba(255, 107, 0, 0.2);\n}\n\n.presence-indicator {\n  width: 10px;\n  height: 10px;\n  background: #10b981;\n  border-radius: 50%;\n}\n\n.user-info {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-1);\n  flex: 1;\n}\n\n.user-name {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #ffffff;\n}\n\n.user-cert {\n  font-size: 0.75rem;\n  color: var(--color-gray-500);\n}\n\n.dnd-badge {\n  padding: var(--spacing-1) var(--spacing-2);\n  background: rgba(239, 68, 68, 0.2);\n  color: #ef4444;\n  border-radius: var(--border-radius-sm);\n  font-size: 0.625rem;\n  font-weight: 700;\n}\n\n.ptt-sidebar {\n  background: var(--color-dark-300);\n  border-left: 1px solid var(--color-dark-50);\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-4);\n  padding: var(--spacing-4);\n  overflow-y: auto;\n}\n\n.sidebar-section h3 {\n  margin: 0 0 var(--spacing-3) 0;\n  color: #ffffff;\n  font-size: 1rem;\n}\n\n.groups-list,\n.history-list {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-2);\n}\n\n.group-card {\n  padding: var(--spacing-3);\n  background: var(--color-dark-400);\n  border: 2px solid var(--color-dark-50);\n  border-radius: var(--border-radius-md);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.group-card:hover {\n  border-color: var(--color-primary-500);\n  transform: translateX(4px);\n}\n\n.group-card.active {\n  border-color: var(--color-primary-500);\n  background: rgba(255, 107, 0, 0.1);\n}\n\n.group-card.emergency {\n  border-color: var(--color-error-500);\n  animation: pulse-red 2s infinite;\n}\n\n.group-name {\n  font-weight: 600;\n  color: #ffffff;\n  margin-bottom: var(--spacing-1);\n}\n\n.group-meta {\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.75rem;\n  color: var(--color-gray-500);\n}\n\n.speaking-indicator {\n  color: var(--color-primary-500);\n  font-weight: 600;\n}\n\n.history-item {\n  padding: var(--spacing-2);\n  background: var(--color-dark-400);\n  border-radius: var(--border-radius-sm);\n}\n\n.session-speaker {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: #ffffff;\n  margin-bottom: var(--spacing-1);\n}\n\n.session-meta {\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.75rem;\n  color: var(--color-gray-500);\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background: var(--color-dark-300);\n  border: 1px solid var(--color-dark-50);\n  border-radius: var(--border-radius-lg);\n  width: 90%;\n  max-width: 600px;\n  max-height: 90vh;\n  overflow-y: auto;\n}\n\n.emergency-modal {\n  border-color: var(--color-error-500);\n}\n\n.modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: var(--spacing-4);\n  border-bottom: 1px solid var(--color-dark-50);\n}\n\n.modal-header h2 {\n  margin: 0;\n  color: #ffffff;\n}\n\n.btn-close {\n  background: none;\n  border: none;\n  font-size: 2rem;\n  color: var(--color-gray-500);\n  cursor: pointer;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  line-height: 1;\n}\n\n.modal-body {\n  padding: var(--spacing-4);\n}\n\n.modal-footer {\n  display: flex;\n  gap: var(--spacing-3);\n  justify-content: flex-end;\n  padding: var(--spacing-4);\n  border-top: 1px solid var(--color-dark-50);\n}\n\n.form-group {\n  margin-bottom: var(--spacing-4);\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: var(--spacing-2);\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-gray-400);\n}\n\n.groups-management {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-3);\n}\n\n.group-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: var(--spacing-3);\n  background: var(--color-dark-400);\n  border-radius: var(--border-radius-md);\n}\n\n.group-info-full {\n  flex: 1;\n}\n\n.group-header-row {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-2);\n  margin-bottom: var(--spacing-2);\n}\n\n.group-name-full {\n  font-weight: 700;\n  color: #ffffff;\n}\n\n.priority-badge {\n  padding: var(--spacing-1) var(--spacing-2);\n  background: rgba(255, 107, 0, 0.2);\n  color: var(--color-primary-500);\n  border-radius: var(--border-radius-sm);\n  font-size: 0.625rem;\n  font-weight: 700;\n}\n\n.group-description {\n  font-size: 0.875rem;\n  color: var(--color-gray-400);\n  margin: 0 0 var(--spacing-2) 0;\n}\n\n.group-stats {\n  display: flex;\n  gap: var(--spacing-3);\n  font-size: 0.75rem;\n  color: var(--color-gray-500);\n}\n\n.btn-join,\n.btn-leave {\n  padding: var(--spacing-2) var(--spacing-4);\n  border: none;\n  border-radius: var(--border-radius-md);\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.btn-join {\n  background: var(--color-primary-500);\n  color: var(--color-dark-400);\n}\n\n.btn-leave {\n  background: var(--color-dark-200);\n  color: var(--color-gray-400);\n}\n</style>\n","<template>\n  <div class=\"map-navigation\">\n    <div ref=\"mapContainer\" class=\"map-container\"></div>\n\n    <div v-if=\"route\" class=\"route-info\">\n      <div class=\"route-header\">\n        <div class=\"route-stats\">\n          <div class=\"stat\">\n            <span class=\"stat-label\">Distance</span>\n            <span class=\"stat-value\">{{ formatDistance(route.distance) }}</span>\n          </div>\n          <div class=\"stat\">\n            <span class=\"stat-label\">ETA</span>\n            <span class=\"stat-value\">{{ formatDuration(route.duration) }}</span>\n          </div>\n        </div>\n        <button @click=\"refreshRoute\" class=\"btn-refresh\" :disabled=\"loading\">\n          {{ loading ? 'Updating...' : 'Refresh Route' }}\n        </button>\n      </div>\n\n      <div class=\"directions-panel\" v-if=\"showDirections\">\n        <h3>Turn-by-Turn Directions</h3>\n        <div class=\"directions-list\">\n          <div\n            v-for=\"(step, index) in route.steps\"\n            :key=\"index\"\n            class=\"direction-step\"\n          >\n            <div class=\"step-number\">{{ index + 1 }}</div>\n            <div class=\"step-content\">\n              <div class=\"step-instruction\">{{ step.instruction }}</div>\n              <div class=\"step-distance\">{{ formatDistance(step.distance) }}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <button @click=\"showDirections = !showDirections\" class=\"btn-toggle-directions\">\n        {{ showDirections ? 'Hide' : 'Show' }} Directions\n      </button>\n    </div>\n\n    <div v-if=\"error\" class=\"error-message\">\n      {{ error }}\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport L from 'leaflet'\nimport 'leaflet/dist/leaflet.css'\n\ninterface Props {\n  destination: {\n    address: string\n    lat?: number\n    lng?: number\n  }\n  origin?: {\n    lat: number\n    lng: number\n  }\n}\n\nconst props = defineProps<Props>()\n\nconst mapContainer = ref<HTMLElement | null>(null)\nconst map = ref<L.Map | null>(null)\nconst route = ref<any>(null)\nconst loading = ref(false)\nconst error = ref('')\nconst showDirections = ref(false)\n\nlet routeLayer: L.Polyline | null = null\nlet originMarker: L.Marker | null = null\nlet destinationMarker: L.Marker | null = null\n\nconst initMap = () => {\n  if (!mapContainer.value || map.value) return\n\n  map.value = L.map(mapContainer.value, {\n    center: [40.7128, -74.0060],\n    zoom: 13\n  })\n\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    maxZoom: 19\n  }).addTo(map.value)\n}\n\nconst geocodeAddress = async (address: string): Promise<{ lat: number; lng: number } | null> => {\n  try {\n    const response = await fetch(\n      `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(address)}&limit=1`\n    )\n    const data = await response.json()\n\n    if (data && data.length > 0) {\n      return {\n        lat: parseFloat(data[0].lat),\n        lng: parseFloat(data[0].lon)\n      }\n    }\n    return null\n  } catch (err) {\n    console.error('Geocoding error:', err)\n    return null\n  }\n}\n\nconst calculateRoute = async (start: { lat: number; lng: number }, end: { lat: number; lng: number }) => {\n  try {\n    loading.value = true\n    error.value = ''\n\n    const response = await fetch(\n      `https://router.project-osrm.org/route/v1/driving/${start.lng},${start.lat};${end.lng},${end.lat}?overview=full&geometries=geojson&steps=true`\n    )\n\n    const data = await response.json()\n\n    if (data.code !== 'Ok' || !data.routes || data.routes.length === 0) {\n      throw new Error('No route found')\n    }\n\n    const routeData = data.routes[0]\n\n    route.value = {\n      distance: routeData.distance,\n      duration: routeData.duration,\n      geometry: routeData.geometry.coordinates,\n      steps: routeData.legs[0].steps.map((step: any) => ({\n        instruction: step.maneuver.type === 'depart'\n          ? `Head ${step.maneuver.modifier || 'forward'} on ${step.name || 'road'}`\n          : step.maneuver.type === 'arrive'\n          ? 'Arrive at destination'\n          : `${step.maneuver.type.replace(/-/g, ' ')} ${step.maneuver.modifier || ''} onto ${step.name || 'road'}`.trim(),\n        distance: step.distance\n      }))\n    }\n\n    drawRoute(routeData.geometry.coordinates, start, end)\n  } catch (err) {\n    error.value = 'Failed to calculate route. Please try again.'\n    console.error('Routing error:', err)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst drawRoute = (coordinates: number[][], start: { lat: number; lng: number }, end: { lat: number; lng: number }) => {\n  if (!map.value) return\n\n  if (routeLayer) {\n    map.value.removeLayer(routeLayer)\n  }\n  if (originMarker) {\n    map.value.removeLayer(originMarker)\n  }\n  if (destinationMarker) {\n    map.value.removeLayer(destinationMarker)\n  }\n\n  const latlngs = coordinates.map(coord => [coord[1], coord[0]] as [number, number])\n\n  routeLayer = L.polyline(latlngs, {\n    color: '#ff6b00',\n    weight: 5,\n    opacity: 0.8\n  }).addTo(map.value)\n\n  const originIcon = L.divIcon({\n    html: '<div style=\"background: #10b981; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white;\"></div>',\n    className: 'custom-marker',\n    iconSize: [22, 22],\n    iconAnchor: [11, 11]\n  })\n\n  const destIcon = L.divIcon({\n    html: '<div style=\"background: #ff6b00; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white;\"></div>',\n    className: 'custom-marker',\n    iconSize: [22, 22],\n    iconAnchor: [11, 11]\n  })\n\n  originMarker = L.marker([start.lat, start.lng], { icon: originIcon }).addTo(map.value)\n  destinationMarker = L.marker([end.lat, end.lng], { icon: destIcon }).addTo(map.value)\n\n  map.value.fitBounds(routeLayer.getBounds(), {\n    padding: [50, 50]\n  })\n}\n\nconst refreshRoute = async () => {\n  await loadRoute()\n}\n\nconst loadRoute = async () => {\n  if (!props.destination) return\n\n  let destCoords = props.destination.lat && props.destination.lng\n    ? { lat: props.destination.lat, lng: props.destination.lng }\n    : await geocodeAddress(props.destination.address)\n\n  if (!destCoords) {\n    error.value = 'Could not find destination location'\n    return\n  }\n\n  const startCoords = props.origin || { lat: 40.7128, lng: -74.0060 }\n\n  await calculateRoute(startCoords, destCoords)\n}\n\nconst formatDistance = (meters: number): string => {\n  const miles = meters / 1609.344\n  return miles < 0.1\n    ? `${Math.round(meters * 3.28084)} ft`\n    : `${miles.toFixed(1)} mi`\n}\n\nconst formatDuration = (seconds: number): string => {\n  const minutes = Math.floor(seconds / 60)\n  if (minutes < 60) {\n    return `${minutes} min`\n  }\n  const hours = Math.floor(minutes / 60)\n  const remainingMinutes = minutes % 60\n  return `${hours}h ${remainingMinutes}m`\n}\n\nonMounted(() => {\n  initMap()\n  loadRoute()\n})\n\nonUnmounted(() => {\n  if (map.value) {\n    map.value.remove()\n    map.value = null\n  }\n})\n\nwatch(() => props.destination, () => {\n  loadRoute()\n}, { deep: true })\n</script>\n\n<style scoped>\n.map-navigation {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: var(--color-dark-400);\n  border-radius: var(--border-radius-md);\n  overflow: hidden;\n}\n\n.map-container {\n  flex: 1;\n  min-height: 400px;\n  position: relative;\n}\n\n.route-info {\n  background: var(--color-dark-300);\n  border-top: 1px solid var(--color-dark-50);\n}\n\n.route-header {\n  padding: var(--spacing-4);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: var(--spacing-4);\n}\n\n.route-stats {\n  display: flex;\n  gap: var(--spacing-6);\n}\n\n.stat {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-1);\n}\n\n.stat-label {\n  font-size: 0.75rem;\n  color: var(--color-gray-500);\n  text-transform: uppercase;\n  font-weight: 600;\n  letter-spacing: 0.5px;\n}\n\n.stat-value {\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: var(--color-primary-500);\n}\n\n.btn-refresh {\n  padding: var(--spacing-2) var(--spacing-4);\n  background: var(--color-dark-400);\n  border: 1px solid var(--color-dark-50);\n  border-radius: var(--border-radius-md);\n  color: #ffffff;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.btn-refresh:hover:not(:disabled) {\n  background: var(--color-dark-200);\n  border-color: var(--color-primary-500);\n}\n\n.btn-refresh:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.directions-panel {\n  padding: var(--spacing-4);\n  border-top: 1px solid var(--color-dark-50);\n}\n\n.directions-panel h3 {\n  font-size: 0.875rem;\n  color: var(--color-gray-400);\n  margin-bottom: var(--spacing-3);\n  text-transform: uppercase;\n  font-weight: 600;\n  letter-spacing: 0.5px;\n}\n\n.directions-list {\n  max-height: 300px;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-2);\n}\n\n.direction-step {\n  display: flex;\n  gap: var(--spacing-3);\n  padding: var(--spacing-3);\n  background: var(--color-dark-400);\n  border-radius: var(--border-radius-md);\n}\n\n.step-number {\n  width: 24px;\n  height: 24px;\n  background: var(--color-primary-500);\n  color: var(--color-dark-400);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.75rem;\n  font-weight: 700;\n  flex-shrink: 0;\n}\n\n.step-content {\n  flex: 1;\n}\n\n.step-instruction {\n  font-size: 0.875rem;\n  color: #ffffff;\n  margin-bottom: var(--spacing-1);\n  text-transform: capitalize;\n}\n\n.step-distance {\n  font-size: 0.75rem;\n  color: var(--color-gray-500);\n}\n\n.btn-toggle-directions {\n  width: 100%;\n  padding: var(--spacing-3);\n  background: var(--color-dark-400);\n  border: none;\n  border-top: 1px solid var(--color-dark-50);\n  color: var(--color-primary-500);\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.btn-toggle-directions:hover {\n  background: var(--color-dark-200);\n}\n\n.error-message {\n  padding: var(--spacing-4);\n  background: rgba(220, 38, 38, 0.1);\n  border-top: 1px solid var(--color-error-500);\n  color: var(--color-error-500);\n  font-size: 0.875rem;\n}\n</style>\n","<template>\n  <NuxtLayout name=\"default\">\n    <div class=\"cad-page\">\n      <div class=\"page-header\">\n        <div class=\"header-left\">\n          <h1>Computer-Aided Dispatch</h1>\n          <div class=\"tab-navigation\">\n            <button\n              @click=\"activeTab = 'incidents'\"\n              class=\"tab-button\"\n              :class=\"{ active: activeTab === 'incidents' }\"\n            >\n              Incidents\n            </button>\n            <button\n              @click=\"activeTab = 'crewlink'\"\n              class=\"tab-button\"\n              :class=\"{ active: activeTab === 'crewlink' }\"\n            >\n              CrewLink\n            </button>\n          </div>\n        </div>\n        <button\n          v-if=\"activeTab === 'incidents'\"\n          @click=\"showNewIncidentModal = true\"\n          class=\"btn btn-primary\"\n        >\n          + New Incident\n        </button>\n      </div>\n\n      <div v-if=\"activeTab === 'crewlink'\" class=\"crewlink-container\">\n        <CrewLink :organization-id=\"organizationId\" />\n      </div>\n\n      <div v-else class=\"cad-layout\">\n        <div class=\"incidents-panel\">\n          <div class=\"panel-header\">\n            <h3>Active Incidents</h3>\n            <select v-model=\"filter\" class=\"form-select filter-select\">\n              <option value=\"active\">Active</option>\n              <option value=\"pending\">Pending</option>\n              <option value=\"dispatched\">Dispatched</option>\n              <option value=\"all\">All</option>\n            </select>\n          </div>\n\n          <div v-if=\"loading\" class=\"loading\">Loading...</div>\n          <div v-else-if=\"filteredIncidents.length === 0\" class=\"empty-state\">\n            No incidents found\n          </div>\n          <div v-else class=\"incidents-list\">\n            <div\n              v-for=\"incident in filteredIncidents\"\n              :key=\"incident.id\"\n              class=\"incident-card\"\n              :class=\"{ selected: selectedIncident?.id === incident.id }\"\n              @click=\"selectIncident(incident)\"\n            >\n              <div class=\"incident-header-row\">\n                <span class=\"incident-number\">{{ incident.incident_number }}</span>\n                <span class=\"badge\" :class=\"`badge-priority-${incident.priority}`\">\n                  P{{ incident.priority }}\n                </span>\n              </div>\n              <div class=\"incident-type\">{{ incident.incident_type }}</div>\n              <div class=\"incident-location\"> {{ incident.location_address }}</div>\n              <div class=\"incident-time\"> {{ formatTime(incident.created_at) }}</div>\n              <div class=\"incident-status\">\n                <span class=\"badge\" :class=\"`badge-${incident.status}`\">\n                  {{ incident.status }}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"details-panel\" v-if=\"selectedIncident\">\n          <div class=\"panel-header\">\n            <h3>Incident Details</h3>\n            <div class=\"header-actions\">\n              <button @click=\"showDispatchModal = true\" class=\"btn btn-sm btn-primary\">\n                Assign Unit\n              </button>\n              <button @click=\"closeIncident\" class=\"btn btn-sm btn-success\">\n                Close\n              </button>\n            </div>\n          </div>\n\n          <div class=\"map-section\" v-if=\"shouldShowMap\">\n            <MapNavigation\n              :destination=\"{\n                address: selectedIncident.location_address,\n                lat: selectedIncident.location_lat,\n                lng: selectedIncident.location_lng\n              }\"\n              :origin=\"unitLocation\"\n            />\n          </div>\n\n          <div class=\"details-content\">\n            <div class=\"detail-section\">\n              <h4>Incident Information</h4>\n              <div class=\"detail-grid\">\n                <div class=\"detail-item\">\n                  <label>Incident Number</label>\n                  <div>{{ selectedIncident.incident_number }}</div>\n                </div>\n                <div class=\"detail-item\">\n                  <label>Type</label>\n                  <div>{{ selectedIncident.incident_type }}</div>\n                </div>\n                <div class=\"detail-item\">\n                  <label>Priority</label>\n                  <div>\n                    <span class=\"badge\" :class=\"`badge-priority-${selectedIncident.priority}`\">\n                      Priority {{ selectedIncident.priority }}\n                    </span>\n                  </div>\n                </div>\n                <div class=\"detail-item\">\n                  <label>Status</label>\n                  <div>\n                    <span class=\"badge\" :class=\"`badge-${selectedIncident.status}`\">\n                      {{ selectedIncident.status }}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"detail-section\">\n              <h4>Location</h4>\n              <div class=\"detail-grid\">\n                <div class=\"detail-item full-width\">\n                  <label>Address</label>\n                  <div>{{ selectedIncident.location_address }}</div>\n                </div>\n                <div class=\"detail-item full-width\" v-if=\"selectedIncident.location_details\">\n                  <label>Additional Details</label>\n                  <div>{{ selectedIncident.location_details }}</div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"detail-section\" v-if=\"selectedIncident.chief_complaint\">\n              <h4>Chief Complaint</h4>\n              <div class=\"narrative-text\">{{ selectedIncident.chief_complaint }}</div>\n            </div>\n\n            <div class=\"detail-section\">\n              <h4>Assigned Units ({{ assignedUnits.length }})</h4>\n              <div v-if=\"assignedUnits.length === 0\" class=\"empty-state-small\">\n                No units assigned\n              </div>\n              <div v-else class=\"units-list\">\n                <div v-for=\"dispatch in assignedUnits\" :key=\"dispatch.id\" class=\"unit-assignment\">\n                  <div class=\"unit-info\">\n                    <span class=\"unit-number\">{{ dispatch.unit?.unit_number }}</span>\n                    <span class=\"badge badge-info\">{{ dispatch.status }}</span>\n                  </div>\n                  <div class=\"unit-times\">\n                    <span v-if=\"dispatch.acknowledged_at\">Ack: {{ formatTime(dispatch.acknowledged_at) }}</span>\n                    <span v-if=\"dispatch.enroute_at\">Enroute: {{ formatTime(dispatch.enroute_at) }}</span>\n                    <span v-if=\"dispatch.on_scene_at\">On Scene: {{ formatTime(dispatch.on_scene_at) }}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div v-else class=\"details-panel empty\">\n          <div class=\"empty-state\">\n            Select an incident to view details\n          </div>\n        </div>\n      </div>\n\n      <Teleport to=\"body\">\n        <div v-if=\"showNewIncidentModal\" class=\"modal-overlay\" @click=\"showNewIncidentModal = false\">\n          <div class=\"modal-content\" @click.stop>\n            <h2>Create New Incident</h2>\n            <form @submit.prevent=\"createIncident\">\n              <div class=\"form-group\">\n                <label class=\"form-label\">Incident Type *</label>\n                <select v-model=\"newIncident.incident_type\" class=\"form-select\" required>\n                  <option value=\"\">Select type</option>\n                  <option value=\"Medical Emergency\">Medical Emergency</option>\n                  <option value=\"Fire\">Fire</option>\n                  <option value=\"Vehicle Accident\">Vehicle Accident</option>\n                  <option value=\"Cardiac Arrest\">Cardiac Arrest</option>\n                  <option value=\"Trauma\">Trauma</option>\n                  <option value=\"Respiratory Distress\">Respiratory Distress</option>\n                  <option value=\"Other\">Other</option>\n                </select>\n              </div>\n\n              <div class=\"form-group\">\n                <label class=\"form-label\">Priority *</label>\n                <select v-model.number=\"newIncident.priority\" class=\"form-select\" required>\n                  <option :value=\"1\">Priority 1 (Critical)</option>\n                  <option :value=\"2\">Priority 2 (Urgent)</option>\n                  <option :value=\"3\">Priority 3 (Routine)</option>\n                  <option :value=\"4\">Priority 4 (Non-Emergency)</option>\n                  <option :value=\"5\">Priority 5 (Low)</option>\n                </select>\n              </div>\n\n              <div class=\"form-group\">\n                <label class=\"form-label\">Location Address *</label>\n                <input v-model=\"newIncident.location_address\" type=\"text\" class=\"form-input\" required />\n              </div>\n\n              <div class=\"form-group\">\n                <label class=\"form-label\">Location Details</label>\n                <input v-model=\"newIncident.location_details\" type=\"text\" class=\"form-input\" placeholder=\"Apt, floor, cross streets, etc.\" />\n              </div>\n\n              <div class=\"form-group\">\n                <label class=\"form-label\">Caller Name</label>\n                <input v-model=\"newIncident.caller_name\" type=\"text\" class=\"form-input\" />\n              </div>\n\n              <div class=\"form-group\">\n                <label class=\"form-label\">Caller Phone</label>\n                <input v-model=\"newIncident.caller_phone\" type=\"tel\" class=\"form-input\" />\n              </div>\n\n              <div class=\"form-group\">\n                <label class=\"form-label\">Chief Complaint</label>\n                <textarea v-model=\"newIncident.chief_complaint\" class=\"form-textarea\"></textarea>\n              </div>\n\n              <div class=\"modal-actions\">\n                <button type=\"button\" @click=\"showNewIncidentModal = false\" class=\"btn btn-secondary\">\n                  Cancel\n                </button>\n                <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"creating\">\n                  {{ creating ? 'Creating...' : 'Create Incident' }}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n\n        <div v-if=\"showDispatchModal\" class=\"modal-overlay\" @click=\"showDispatchModal = false\">\n          <div class=\"modal-content\" @click.stop>\n            <h2>Assign Unit to Incident</h2>\n            <form @submit.prevent=\"dispatchUnit\">\n              <div class=\"form-group\">\n                <label class=\"form-label\">Available Units *</label>\n                <select v-model=\"dispatchData.unit_id\" class=\"form-select\" required>\n                  <option value=\"\">Select unit</option>\n                  <option v-for=\"unit in availableUnits\" :key=\"unit.id\" :value=\"unit.id\">\n                    {{ unit.unit_number }} - {{ unit.unit_type?.name }} ({{ unit.status }})\n                  </option>\n                </select>\n              </div>\n\n              <div class=\"modal-actions\">\n                <button type=\"button\" @click=\"showDispatchModal = false\" class=\"btn btn-secondary\">\n                  Cancel\n                </button>\n                <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"dispatching\">\n                  {{ dispatching ? 'Dispatching...' : 'Dispatch Unit' }}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </Teleport>\n    </div>\n  </NuxtLayout>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: 'auth'\n})\n\nconst { $supabase } = useNuxtApp()\nconst api = useApi()\nconst auth = useAuth()\n\nconst activeTab = ref('incidents')\nconst organizationId = ref('')\nconst incidents = ref<any[]>([])\nconst selectedIncident = ref<any>(null)\nconst assignedUnits = ref<any[]>([])\nconst availableUnits = ref<any[]>([])\nconst filter = ref('active')\nconst loading = ref(true)\nconst showNewIncidentModal = ref(false)\nconst showDispatchModal = ref(false)\nconst creating = ref(false)\nconst dispatching = ref(false)\n\nconst newIncident = ref({\n  incident_type: '',\n  priority: 3,\n  location_address: '',\n  location_details: '',\n  caller_name: '',\n  caller_phone: '',\n  chief_complaint: ''\n})\n\nconst dispatchData = ref({\n  unit_id: ''\n})\n\nconst unitLocation = ref<{ lat: number; lng: number } | undefined>(undefined)\n\nconst filteredIncidents = computed(() => {\n  if (filter.value === 'all') return incidents.value\n  if (filter.value === 'active') {\n    return incidents.value.filter(i => ['pending', 'dispatched', 'active'].includes(i.status))\n  }\n  return incidents.value.filter(i => i.status === filter.value)\n})\n\nconst shouldShowMap = computed(() => {\n  return selectedIncident.value && assignedUnits.value.length > 0\n})\n\nconst fetchIncidents = async () => {\n  loading.value = true\n  const result = await api.incidents.list()\n  if (result.success) {\n    incidents.value = result.data\n  }\n  loading.value = false\n}\n\nconst selectIncident = async (incident: any) => {\n  selectedIncident.value = incident\n\n  const [dispatchesRes] = await Promise.all([\n    $supabase\n      .from('dispatches')\n      .select('*, unit:units(*, unit_type:unit_types(*))')\n      .eq('incident_id', incident.id)\n  ])\n\n  assignedUnits.value = dispatchesRes.data || []\n}\n\nconst createIncident = async () => {\n  creating.value = true\n\n  const result = await api.incidents.create({\n    ...newIncident.value,\n    status: 'pending'\n  })\n\n  if (result.success) {\n    showNewIncidentModal.value = false\n    newIncident.value = {\n      incident_type: '',\n      priority: 3,\n      location_address: '',\n      location_details: '',\n      caller_name: '',\n      caller_phone: '',\n      chief_complaint: ''\n    }\n    await fetchIncidents()\n  }\n\n  creating.value = false\n}\n\nconst dispatchUnit = async () => {\n  if (!selectedIncident.value || !dispatchData.value.unit_id) return\n\n  dispatching.value = true\n\n  const result = await api.dispatches.create(selectedIncident.value.id, dispatchData.value.unit_id)\n\n  if (result.success) {\n    showDispatchModal.value = false\n    dispatchData.value.unit_id = ''\n    await selectIncident(selectedIncident.value)\n    await fetchIncidents()\n    await fetchAvailableUnits()\n  }\n\n  dispatching.value = false\n}\n\nconst closeIncident = async () => {\n  if (!selectedIncident.value) return\n\n  if (confirm('Are you sure you want to close this incident?')) {\n    await api.incidents.update(selectedIncident.value.id, {\n      status: 'closed',\n      clear_time: new Date().toISOString()\n    })\n\n    selectedIncident.value = null\n    await fetchIncidents()\n  }\n}\n\nconst fetchAvailableUnits = async () => {\n  const result = await api.units.list({ is_active: true })\n  if (result.success) {\n    availableUnits.value = result.data.filter((u: any) =>\n      ['available', 'dispatched'].includes(u.status)\n    )\n  }\n}\n\nconst formatTime = (timestamp: string) => {\n  if (!timestamp) return 'N/A'\n  const date = new Date(timestamp)\n  return date.toLocaleString()\n}\n\nonMounted(async () => {\n  const user = await auth.getUser()\n  if (user) {\n    const { data: userData } = await $supabase\n      .from('users')\n      .select('organization_id')\n      .eq('id', user.id)\n      .single()\n\n    if (userData) {\n      organizationId.value = userData.organization_id\n    }\n  }\n\n  fetchIncidents()\n  fetchAvailableUnits()\n\n  const interval = setInterval(() => {\n    fetchIncidents()\n    if (selectedIncident.value) {\n      selectIncident(selectedIncident.value)\n    }\n  }, 15000)\n\n  onUnmounted(() => clearInterval(interval))\n})\n</script>\n\n<style scoped>\n.cad-page {\n  height: calc(100vh - 80px);\n  display: flex;\n  flex-direction: column;\n}\n\n.page-header {\n  padding: var(--spacing-6) var(--spacing-8);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid var(--color-dark-50);\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-6);\n}\n\n.page-header h1 {\n  font-size: 2rem;\n  margin: 0;\n}\n\n.tab-navigation {\n  display: flex;\n  gap: var(--spacing-2);\n}\n\n.tab-button {\n  padding: var(--spacing-2) var(--spacing-4);\n  background: transparent;\n  border: 2px solid var(--color-dark-50);\n  border-radius: var(--border-radius-md);\n  color: var(--color-gray-400);\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.tab-button:hover {\n  border-color: var(--color-primary-500);\n  color: var(--color-primary-500);\n}\n\n.tab-button.active {\n  background: var(--color-primary-500);\n  border-color: var(--color-primary-500);\n  color: var(--color-dark-400);\n}\n\n.crewlink-container {\n  flex: 1;\n  overflow: auto;\n}\n\n.cad-layout {\n  flex: 1;\n  display: grid;\n  grid-template-columns: 400px 1fr;\n  gap: 0;\n  overflow: hidden;\n  background: var(--color-dark-500);\n}\n\n.incidents-panel, .details-panel {\n  background: var(--color-dark-400);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.incidents-panel {\n  border-right: 1px solid var(--color-dark-50);\n}\n\n.panel-header {\n  padding: var(--spacing-4) var(--spacing-6);\n  border-bottom: 1px solid var(--color-dark-50);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.panel-header h3 {\n  font-size: 1.125rem;\n  margin: 0;\n}\n\n.filter-select {\n  width: auto;\n  padding: var(--spacing-2) var(--spacing-3);\n  font-size: 0.875rem;\n}\n\n.incidents-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: var(--spacing-4);\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-3);\n}\n\n.incident-card {\n  padding: var(--spacing-4);\n  border-radius: var(--border-radius-md);\n  border: 2px solid var(--color-dark-50);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.incident-card:hover {\n  border-color: var(--color-primary-500);\n  box-shadow: 0 0 15px rgba(255, 107, 0, 0.2);\n}\n\n.incident-card.selected {\n  border-color: var(--color-primary-500);\n  background: rgba(255, 107, 0, 0.1);\n}\n\n.incident-header-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: var(--spacing-2);\n}\n\n.incident-number {\n  font-weight: 700;\n  color: var(--color-primary-500);\n  font-size: 1rem;\n}\n\n.incident-type {\n  font-weight: 600;\n  margin-bottom: var(--spacing-2);\n  color: #ffffff;\n}\n\n.incident-location, .incident-time {\n  font-size: 0.875rem;\n  color: var(--color-gray-400);\n  margin-bottom: var(--spacing-1);\n}\n\n.incident-status {\n  margin-top: var(--spacing-2);\n}\n\n.badge-priority-1 {\n  background: rgba(220, 38, 38, 0.2);\n  color: var(--color-error-500);\n}\n\n.badge-priority-2 {\n  background: rgba(255, 107, 0, 0.2);\n  color: var(--color-primary-500);\n}\n\n.badge-priority-3, .badge-priority-4, .badge-priority-5 {\n  background: rgba(16, 185, 129, 0.2);\n  color: var(--color-success-500);\n}\n\n.badge-pending {\n  background: rgba(255, 107, 0, 0.2);\n  color: var(--color-primary-500);\n}\n\n.badge-dispatched {\n  background: rgba(59, 130, 246, 0.2);\n  color: #3b82f6;\n}\n\n.badge-active {\n  background: rgba(220, 38, 38, 0.2);\n  color: var(--color-error-500);\n}\n\n.badge-closed {\n  background: rgba(16, 185, 129, 0.2);\n  color: var(--color-success-500);\n}\n\n.details-panel {\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n}\n\n.details-panel.empty {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.map-section {\n  height: 500px;\n  border-bottom: 1px solid var(--color-dark-50);\n}\n\n.details-content {\n  padding: var(--spacing-6);\n}\n\n.detail-section {\n  margin-bottom: var(--spacing-8);\n}\n\n.detail-section h4 {\n  font-size: 1rem;\n  margin-bottom: var(--spacing-4);\n  padding-bottom: var(--spacing-2);\n  border-bottom: 2px solid var(--color-dark-50);\n  color: var(--color-primary-500);\n}\n\n.detail-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: var(--spacing-4);\n}\n\n.detail-item {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-1);\n}\n\n.detail-item.full-width {\n  grid-column: 1 / -1;\n}\n\n.detail-item label {\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: var(--color-gray-500);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.detail-item div {\n  font-size: 0.9375rem;\n  color: #ffffff;\n}\n\n.narrative-text {\n  padding: var(--spacing-4);\n  background: var(--color-dark-300);\n  border-radius: var(--border-radius-md);\n  line-height: 1.6;\n}\n\n.loading, .empty-state, .empty-state-small {\n  padding: var(--spacing-8);\n  text-align: center;\n  color: var(--color-gray-500);\n}\n\n.empty-state-small {\n  padding: var(--spacing-4);\n  font-size: 0.875rem;\n  background: var(--color-dark-300);\n  border-radius: var(--border-radius-md);\n}\n\n.units-list {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-3);\n}\n\n.unit-assignment {\n  padding: var(--spacing-4);\n  background: var(--color-dark-300);\n  border-radius: var(--border-radius-md);\n}\n\n.unit-info {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-3);\n  margin-bottom: var(--spacing-2);\n}\n\n.unit-number {\n  font-weight: 600;\n  color: var(--color-primary-500);\n}\n\n.unit-times {\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--spacing-3);\n  font-size: 0.75rem;\n  color: var(--color-gray-500);\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: var(--spacing-4);\n}\n\n.modal-content {\n  background: var(--color-dark-300);\n  border: 1px solid var(--color-primary-500);\n  border-radius: var(--border-radius-lg);\n  padding: var(--spacing-8);\n  max-width: 600px;\n  width: 100%;\n  max-height: 90vh;\n  overflow-y: auto;\n}\n\n.modal-content h2 {\n  margin-bottom: var(--spacing-6);\n  color: var(--color-primary-500);\n}\n\n.modal-actions {\n  display: flex;\n  gap: var(--spacing-3);\n  justify-content: flex-end;\n  margin-top: var(--spacing-6);\n}\n\n@media (max-width: 1024px) {\n  .cad-layout {\n    grid-template-columns: 1fr;\n  }\n\n  .incidents-panel {\n    max-height: 50vh;\n    border-right: none;\n    border-bottom: 1px solid var(--color-dark-50);\n  }\n}\n</style>\n"],"version":3}
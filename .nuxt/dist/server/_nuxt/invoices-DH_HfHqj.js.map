{"version":3,"file":"invoices-DH_HfHqj.js","sources":["../../../../components/PlatformInvoiceList.vue","../../../../pages/billing/invoices.vue"],"sourcesContent":["<template>\n  <div class=\"invoice-list\">\n    <div class=\"list-header\">\n      <h4>Platform Invoices</h4>\n      <button @click=\"refreshInvoices\" class=\"refresh-button\">Refresh</button>\n    </div>\n\n    <div v-if=\"loading\" class=\"loading\">Loading invoices...</div>\n\n    <div v-else-if=\"invoices.length === 0\" class=\"empty-state\">\n      No invoices found\n    </div>\n\n    <div v-else class=\"invoices-container\">\n      <div v-for=\"invoice in invoices\" :key=\"invoice.id\" class=\"invoice-card\" @click=\"selectInvoice(invoice)\">\n        <div class=\"invoice-header\">\n          <span class=\"invoice-number\">{{ invoice.invoice_number }}</span>\n          <span :class=\"['status-badge', `status-${invoice.invoice_status}`]\">\n            {{ formatStatus(invoice.invoice_status) }}\n          </span>\n        </div>\n\n        <div class=\"invoice-details\">\n          <div class=\"detail-row\">\n            <span class=\"label\">Period:</span>\n            <span>{{ formatDate(invoice.invoice_period_start) }} - {{ formatDate(invoice.invoice_period_end) }}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"label\">Base Fee:</span>\n            <span>{{ formatCurrency(invoice.base_platform_fee) }}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"label\">Billable Calls:</span>\n            <span>{{ invoice.billable_calls_count }} calls ({{ formatCurrency(invoice.billable_calls_total) }})</span>\n          </div>\n          <div class=\"detail-row total\">\n            <span class=\"label\">Total Due:</span>\n            <span>{{ formatCurrency(invoice.total_amount_due) }}</span>\n          </div>\n        </div>\n\n        <div class=\"invoice-footer\">\n          <span class=\"due-date\">Due: {{ formatDate(invoice.due_date) }}</span>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"selectedInvoice\" class=\"modal-overlay\" @click=\"closeModal\">\n      <div class=\"modal\" @click.stop>\n        <div class=\"modal-header\">\n          <h3>Invoice Details</h3>\n          <button @click=\"closeModal\" class=\"close-button\">Ã—</button>\n        </div>\n\n        <div class=\"modal-body\">\n          <div class=\"invoice-info\">\n            <div class=\"info-row\">\n              <span class=\"label\">Invoice Number:</span>\n              <span>{{ selectedInvoice.invoice_number }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">Billing Period:</span>\n              <span>{{ formatDate(selectedInvoice.invoice_period_start) }} - {{ formatDate(selectedInvoice.invoice_period_end) }}</span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">Status:</span>\n              <span :class=\"['status-badge', `status-${selectedInvoice.invoice_status}`]\">\n                {{ formatStatus(selectedInvoice.invoice_status) }}\n              </span>\n            </div>\n            <div class=\"info-row\">\n              <span class=\"label\">Due Date:</span>\n              <span>{{ formatDate(selectedInvoice.due_date) }}</span>\n            </div>\n          </div>\n\n          <div v-if=\"invoiceDetails.lineItems.length > 0\" class=\"line-items\">\n            <h4>Line Items</h4>\n            <div class=\"line-items-table\">\n              <div v-for=\"item in invoiceDetails.lineItems\" :key=\"item.id\" class=\"line-item\">\n                <div class=\"item-desc\">\n                  <span class=\"item-title\">{{ item.description }}</span>\n                  <span class=\"item-qty\">Qty: {{ item.quantity }} Ã— {{ formatCurrency(item.unit_price) }}</span>\n                </div>\n                <span class=\"item-amount\">{{ formatCurrency(item.amount) }}</span>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"invoice-totals\">\n            <div class=\"total-row\">\n              <span>Subtotal</span>\n              <span>{{ formatCurrency(selectedInvoice.subtotal) }}</span>\n            </div>\n            <div v-if=\"selectedInvoice.stripe_passthrough_fees > 0\" class=\"total-row\">\n              <span>Stripe Fees (passthrough)</span>\n              <span>{{ formatCurrency(selectedInvoice.stripe_passthrough_fees) }}</span>\n            </div>\n            <div class=\"total-row final\">\n              <span>Total Amount Due</span>\n              <span>{{ formatCurrency(selectedInvoice.total_amount_due) }}</span>\n            </div>\n            <div v-if=\"selectedInvoice.amount_paid > 0\" class=\"total-row paid\">\n              <span>Amount Paid</span>\n              <span>{{ formatCurrency(selectedInvoice.amount_paid) }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst props = defineProps<{\n  agencyId: string\n}>()\n\nconst { getAgencyInvoices, getInvoiceDetails } = usePlatformPricing()\n\nconst invoices = ref<any[]>([])\nconst selectedInvoice = ref<any>(null)\nconst invoiceDetails = ref<any>({ lineItems: [] })\nconst loading = ref(true)\n\nconst formatCurrency = (amount: number) => {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2\n  }).format(amount / 100)\n}\n\nconst formatDate = (date: string) => {\n  return new Date(date).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric'\n  })\n}\n\nconst formatStatus = (status: string) => {\n  const statusMap: Record<string, string> = {\n    'draft': 'Draft',\n    'sent': 'Sent',\n    'paid': 'Paid',\n    'overdue': 'Overdue',\n    'cancelled': 'Cancelled'\n  }\n  return statusMap[status] || status\n}\n\nconst selectInvoice = async (invoice: any) => {\n  selectedInvoice.value = invoice\n  invoiceDetails.value = await getInvoiceDetails(invoice.id)\n}\n\nconst closeModal = () => {\n  selectedInvoice.value = null\n  invoiceDetails.value = { lineItems: [] }\n}\n\nconst refreshInvoices = async () => {\n  loading.value = true\n  invoices.value = await getAgencyInvoices(props.agencyId)\n  loading.value = false\n}\n\nonMounted(async () => {\n  await refreshInvoices()\n})\n</script>\n\n<style scoped>\n.invoice-list {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 20px;\n}\n\n.list-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.list-header h4 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.refresh-button {\n  padding: 6px 12px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 13px;\n  font-weight: 500;\n  color: #374151;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.refresh-button:hover {\n  background: #f3f4f6;\n}\n\n.loading,\n.empty-state {\n  padding: 40px;\n  text-align: center;\n  color: #6b7280;\n  font-size: 14px;\n}\n\n.invoices-container {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.invoice-card {\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  padding: 16px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.invoice-card:hover {\n  border-color: #3b82f6;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.invoice-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n\n.invoice-number {\n  font-size: 15px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.status-badge {\n  padding: 4px 10px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n.status-badge.status-draft {\n  background: #f3f4f6;\n  color: #6b7280;\n}\n\n.status-badge.status-sent {\n  background: #dbeafe;\n  color: #1e40af;\n}\n\n.status-badge.status-paid {\n  background: #d1fae5;\n  color: #065f46;\n}\n\n.status-badge.status-overdue {\n  background: #fee2e2;\n  color: #991b1b;\n}\n\n.invoice-details {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n\n.detail-row {\n  display: flex;\n  justify-content: space-between;\n  font-size: 13px;\n}\n\n.detail-row .label {\n  color: #6b7280;\n  font-weight: 500;\n}\n\n.detail-row.total {\n  margin-top: 6px;\n  padding-top: 8px;\n  border-top: 1px solid #e5e7eb;\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.invoice-footer {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.due-date {\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 20px;\n}\n\n.modal {\n  background: white;\n  border-radius: 8px;\n  width: 100%;\n  max-width: 700px;\n  max-height: 90vh;\n  overflow-y: auto;\n}\n\n.modal-header {\n  padding: 20px;\n  border-bottom: 1px solid #e5e7eb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.modal-header h3 {\n  margin: 0;\n  font-size: 20px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  font-size: 28px;\n  line-height: 1;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0;\n  width: 28px;\n  height: 28px;\n}\n\n.modal-body {\n  padding: 20px;\n}\n\n.invoice-info {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  margin-bottom: 20px;\n  padding-bottom: 20px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.info-row {\n  display: flex;\n  justify-content: space-between;\n  font-size: 14px;\n}\n\n.info-row .label {\n  color: #6b7280;\n  font-weight: 500;\n}\n\n.line-items {\n  margin-bottom: 20px;\n}\n\n.line-items h4 {\n  font-size: 14px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 12px 0;\n}\n\n.line-items-table {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.line-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: 12px;\n  background: #f9fafb;\n  border-radius: 6px;\n}\n\n.item-desc {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.item-title {\n  font-size: 14px;\n  font-weight: 500;\n  color: #111827;\n}\n\n.item-qty {\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.item-amount {\n  font-size: 14px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.invoice-totals {\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  padding: 16px;\n}\n\n.total-row {\n  display: flex;\n  justify-content: space-between;\n  padding: 8px 0;\n  font-size: 14px;\n}\n\n.total-row.final {\n  margin-top: 8px;\n  padding-top: 12px;\n  border-top: 2px solid #111827;\n  font-size: 16px;\n  font-weight: 700;\n}\n\n.total-row.paid {\n  color: #065f46;\n  font-weight: 600;\n}\n</style>\n","<template>\n  <div class=\"billing-invoices-page\">\n    <div class=\"page-header\">\n      <h1>Platform Invoices</h1>\n      <p class=\"subtitle\">Monthly platform fees and billable call charges</p>\n    </div>\n\n    <div class=\"pricing-summary\">\n      <div class=\"pricing-card\">\n        <span class=\"pricing-icon\">ðŸ’³</span>\n        <div class=\"pricing-info\">\n          <span class=\"pricing-label\">Monthly Platform Fee</span>\n          <span class=\"pricing-amount\">$500.00</span>\n          <span class=\"pricing-desc\">Base subscription fee</span>\n        </div>\n      </div>\n      <div class=\"pricing-card\">\n        <span class=\"pricing-icon\">ðŸ“ž</span>\n        <div class=\"pricing-info\">\n          <span class=\"pricing-label\">Per-Billable-Call Fee</span>\n          <span class=\"pricing-amount\">$45.00</span>\n          <span class=\"pricing-desc\">Per encounter charge</span>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"invoice-section\">\n      <PlatformInvoiceList :agency-id=\"agencyId\" />\n    </div>\n\n    <div class=\"pricing-policy\">\n      <h3>Pricing Policy</h3>\n      <div class=\"policy-content\">\n        <p>Our platform uses a fixed pricing model designed for predictability and transparency:</p>\n        <ul>\n          <li><strong>Monthly Platform Fee ($500):</strong> Covers system availability, automation readiness, integrations, compliance posture, monitoring, and support. Charged regardless of call volume.</li>\n          <li><strong>Per-Billable-Call Fee ($45):</strong> Charged once per completed billable encounter (EMS transports, treatment-in-place, refusals, private-pay, telehealth). Not dependent on insurance reimbursement or claim outcome.</li>\n          <li><strong>No Percentage-Based Pricing:</strong> We do not use revenue sharing or percentage-based fees.</li>\n          <li><strong>Transparent Pass-Through:</strong> Stripe payment processing fees are passed through at cost with no markup.</li>\n          <li><strong>Automation Value:</strong> Pricing is not adjusted based on automation level. Automation improves reliability, not just reduces manual effort.</li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: 'auth'\n})\n\nconst agencyId = ref('default-agency-id')\n</script>\n\n<style scoped>\n.billing-invoices-page {\n  min-height: 100vh;\n  background: #f9fafb;\n  padding: 24px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.page-header {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 32px;\n  margin-bottom: 24px;\n  text-align: center;\n}\n\n.page-header h1 {\n  font-size: 32px;\n  font-weight: 700;\n  color: #111827;\n  margin: 0 0 8px 0;\n}\n\n.subtitle {\n  font-size: 16px;\n  color: #6b7280;\n  margin: 0;\n}\n\n.pricing-summary {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  gap: 16px;\n  margin-bottom: 24px;\n}\n\n.pricing-card {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 20px;\n}\n\n.pricing-icon {\n  font-size: 32px;\n}\n\n.pricing-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.pricing-label {\n  font-size: 13px;\n  font-weight: 500;\n  color: #6b7280;\n  margin-bottom: 4px;\n}\n\n.pricing-amount {\n  font-size: 24px;\n  font-weight: 700;\n  color: #111827;\n  margin-bottom: 2px;\n}\n\n.pricing-desc {\n  font-size: 12px;\n  color: #9ca3af;\n}\n\n.invoice-section {\n  margin-bottom: 24px;\n}\n\n.pricing-policy {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 24px;\n}\n\n.pricing-policy h3 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 16px 0;\n}\n\n.policy-content p {\n  margin: 0 0 12px 0;\n  color: #374151;\n  line-height: 1.6;\n}\n\n.policy-content ul {\n  margin: 0;\n  padding-left: 20px;\n}\n\n.policy-content li {\n  margin-bottom: 12px;\n  color: #374151;\n  line-height: 1.6;\n}\n\n.policy-content strong {\n  color: #111827;\n  font-weight: 600;\n}\n</style>\n"],"names":["invoices","_ssrRenderAttrs","_mergeProps","_unref","_ssrRenderList","_ssrInterpolate","_ssrRenderClass","_ssrRenderComponent"],"mappings":"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"}
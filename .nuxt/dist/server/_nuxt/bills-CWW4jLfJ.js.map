{"version":3,"file":"bills-CWW4jLfJ.js","sources":["../../../../pages/patient/bills.vue"],"sourcesContent":["<template>\n  <div class=\"patient-portal\">\n    <div class=\"portal-header\">\n      <h1>Your Bills</h1>\n      <p class=\"subtitle\">View and pay your ambulance and telehealth bills securely</p>\n    </div>\n\n    <div v-if=\"loading\" class=\"loading-state\">\n      <div class=\"spinner\"></div>\n      <p>Loading your bills...</p>\n    </div>\n\n    <div v-else-if=\"invoices.length === 0\" class=\"empty-state\">\n      <p>You have no bills at this time.</p>\n    </div>\n\n    <div v-else class=\"invoices-list\">\n      <div v-for=\"invoice in invoices\" :key=\"invoice.id\" class=\"invoice-card\" @click=\"selectInvoice(invoice)\">\n        <div class=\"invoice-header\">\n          <span class=\"invoice-number\">{{ invoice.invoice_number }}</span>\n          <span :class=\"['status-badge', `status-${invoice.payment_status}`]\">\n            {{ formatStatus(invoice.payment_status) }}\n          </span>\n        </div>\n\n        <div class=\"invoice-details\">\n          <div class=\"detail-row\">\n            <span class=\"label\">Service Type:</span>\n            <span>{{ formatServiceType(invoice.service_type) }}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"label\">Due Date:</span>\n            <span>{{ formatDate(invoice.due_date) }}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"label\">Amount Due:</span>\n            <span class=\"amount-due\">{{ formatCurrency(invoice.amount_outstanding) }}</span>\n          </div>\n        </div>\n\n        <button v-if=\"invoice.payment_status === 'unpaid'\" class=\"pay-button\">\n          Pay Now\n        </button>\n      </div>\n    </div>\n\n    <div v-if=\"selectedInvoice\" class=\"modal-overlay\" @click=\"closeModal\">\n      <div class=\"modal\" @click.stop>\n        <div class=\"modal-header\">\n          <h2>Bill Details</h2>\n          <button @click=\"closeModal\" class=\"close-button\">Ã—</button>\n        </div>\n\n        <div class=\"modal-body\">\n          <div v-if=\"invoiceDetails.statement\" class=\"statement-section\">\n            <h3>Statement of Services</h3>\n            <div class=\"statement-content\">\n              <div class=\"statement-row\">\n                <span class=\"label\">Service Date:</span>\n                <span>{{ formatDate(invoiceDetails.statement.service_date) }}</span>\n              </div>\n              <div class=\"statement-row\">\n                <span class=\"label\">Service Description:</span>\n                <span>{{ invoiceDetails.statement.service_description }}</span>\n              </div>\n              <div v-if=\"invoiceDetails.statement.origin_address\" class=\"statement-row\">\n                <span class=\"label\">From:</span>\n                <span>{{ invoiceDetails.statement.origin_address }}</span>\n              </div>\n              <div v-if=\"invoiceDetails.statement.destination_address\" class=\"statement-row\">\n                <span class=\"label\">To:</span>\n                <span>{{ invoiceDetails.statement.destination_address }}</span>\n              </div>\n            </div>\n\n            <div class=\"charges-breakdown\">\n              <div class=\"charge-row\">\n                <span>Total Charge</span>\n                <span>{{ formatCurrency(invoiceDetails.statement.total_charge) }}</span>\n              </div>\n              <div class=\"charge-row\">\n                <span>Insurance Payment</span>\n                <span>-{{ formatCurrency(invoiceDetails.statement.insurance_payment) }}</span>\n              </div>\n              <div v-if=\"invoiceDetails.statement.adjustments > 0\" class=\"charge-row\">\n                <span>Adjustments</span>\n                <span>-{{ formatCurrency(invoiceDetails.statement.adjustments) }}</span>\n              </div>\n              <div class=\"charge-row total\">\n                <span>Your Responsibility</span>\n                <span>{{ formatCurrency(invoiceDetails.statement.patient_balance) }}</span>\n              </div>\n            </div>\n          </div>\n\n          <div v-if=\"invoiceDetails.paymentPlan\" class=\"payment-plan-section\">\n            <h3>Payment Plan</h3>\n            <div class=\"plan-details\">\n              <div class=\"plan-row\">\n                <span>Installment Amount:</span>\n                <span>{{ formatCurrency(invoiceDetails.paymentPlan.installment_amount) }}</span>\n              </div>\n              <div class=\"plan-row\">\n                <span>Payments Made:</span>\n                <span>{{ invoiceDetails.paymentPlan.installments_paid }} of {{ invoiceDetails.paymentPlan.installments_total }}</span>\n              </div>\n              <div class=\"plan-row\">\n                <span>Next Payment:</span>\n                <span>{{ formatDate(invoiceDetails.paymentPlan.next_payment_date) }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"modal-footer\">\n          <a\n            v-if=\"selectedInvoice.stripe_hosted_url && selectedInvoice.payment_status === 'unpaid'\"\n            :href=\"selectedInvoice.stripe_hosted_url\"\n            target=\"_blank\"\n            class=\"stripe-pay-button\"\n          >\n            Pay Securely with Stripe\n          </a>\n          <p class=\"security-notice\">\n            All payments are processed securely by Stripe. We never store your payment information.\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { getInvoicesByEmail, getInvoiceDetails } = useStripe()\nconst user = useSupabaseUser()\n\nconst invoices = ref<any[]>([])\nconst selectedInvoice = ref<any>(null)\nconst invoiceDetails = ref<any>({})\nconst loading = ref(true)\n\nconst formatCurrency = (amount: number) => {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2\n  }).format(amount / 100)\n}\n\nconst formatDate = (date: string) => {\n  return new Date(date).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })\n}\n\nconst formatStatus = (status: string) => {\n  const statusMap: Record<string, string> = {\n    'unpaid': 'Unpaid',\n    'paid': 'Paid',\n    'failed': 'Payment Failed',\n    'disputed': 'Disputed'\n  }\n  return statusMap[status] || status\n}\n\nconst formatServiceType = (type: string) => {\n  const typeMap: Record<string, string> = {\n    'ambulance_transport': 'Ambulance Transport',\n    'telehealth': 'Telehealth Service'\n  }\n  return typeMap[type] || type\n}\n\nconst selectInvoice = async (invoice: any) => {\n  selectedInvoice.value = invoice\n  invoiceDetails.value = await getInvoiceDetails(invoice.id)\n}\n\nconst closeModal = () => {\n  selectedInvoice.value = null\n  invoiceDetails.value = {}\n}\n\nonMounted(async () => {\n  if (user.value?.email) {\n    invoices.value = await getInvoicesByEmail(user.value.email)\n  }\n  loading.value = false\n})\n</script>\n\n<style scoped>\n.patient-portal {\n  min-height: 100vh;\n  background: #f9fafb;\n  padding: 24px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.portal-header {\n  background: white;\n  border-radius: 8px;\n  padding: 32px;\n  margin-bottom: 24px;\n  text-align: center;\n  border: 1px solid #e5e7eb;\n}\n\n.portal-header h1 {\n  font-size: 32px;\n  font-weight: 700;\n  color: #111827;\n  margin: 0 0 8px 0;\n}\n\n.subtitle {\n  font-size: 16px;\n  color: #6b7280;\n  margin: 0;\n}\n\n.loading-state,\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 80px 20px;\n  color: #6b7280;\n}\n\n.spinner {\n  width: 40px;\n  height: 40px;\n  border: 3px solid #e5e7eb;\n  border-top-color: #3b82f6;\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n  margin-bottom: 16px;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n.invoices-list {\n  display: grid;\n  gap: 16px;\n}\n\n.invoice-card {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 24px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.invoice-card:hover {\n  border-color: #3b82f6;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n}\n\n.invoice-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.invoice-number {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.status-badge {\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 13px;\n  font-weight: 500;\n}\n\n.status-badge.status-unpaid {\n  background: #fef3c7;\n  color: #92400e;\n}\n\n.status-badge.status-paid {\n  background: #d1fae5;\n  color: #065f46;\n}\n\n.status-badge.status-failed {\n  background: #fee2e2;\n  color: #991b1b;\n}\n\n.status-badge.status-disputed {\n  background: #fce7f3;\n  color: #831843;\n}\n\n.invoice-details {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n\n.detail-row {\n  display: flex;\n  justify-content: space-between;\n  font-size: 14px;\n}\n\n.detail-row .label {\n  color: #6b7280;\n  font-weight: 500;\n}\n\n.amount-due {\n  font-size: 20px;\n  font-weight: 700;\n  color: #111827;\n}\n\n.pay-button {\n  width: 100%;\n  padding: 12px;\n  background: #3b82f6;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.pay-button:hover {\n  background: #2563eb;\n}\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 20px;\n}\n\n.modal {\n  background: white;\n  border-radius: 8px;\n  width: 100%;\n  max-width: 700px;\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);\n}\n\n.modal-header {\n  padding: 24px;\n  border-bottom: 1px solid #e5e7eb;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.modal-header h2 {\n  margin: 0;\n  font-size: 24px;\n  font-weight: 700;\n  color: #111827;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  font-size: 32px;\n  line-height: 1;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n}\n\n.modal-body {\n  padding: 24px;\n}\n\n.statement-section,\n.payment-plan-section {\n  margin-bottom: 24px;\n}\n\n.statement-section h3,\n.payment-plan-section h3 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 16px 0;\n}\n\n.statement-content {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-bottom: 20px;\n}\n\n.statement-row {\n  display: flex;\n  justify-content: space-between;\n  font-size: 14px;\n}\n\n.statement-row .label {\n  color: #6b7280;\n  font-weight: 500;\n}\n\n.charges-breakdown {\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  padding: 16px;\n}\n\n.charge-row {\n  display: flex;\n  justify-content: space-between;\n  padding: 8px 0;\n  font-size: 14px;\n}\n\n.charge-row.total {\n  border-top: 2px solid #111827;\n  margin-top: 8px;\n  padding-top: 12px;\n  font-size: 18px;\n  font-weight: 700;\n}\n\n.plan-details {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.plan-row {\n  display: flex;\n  justify-content: space-between;\n  font-size: 14px;\n}\n\n.modal-footer {\n  padding: 24px;\n  border-top: 1px solid #e5e7eb;\n  text-align: center;\n}\n\n.stripe-pay-button {\n  display: inline-block;\n  padding: 14px 32px;\n  background: #635bff;\n  color: white;\n  text-decoration: none;\n  border-radius: 6px;\n  font-size: 16px;\n  font-weight: 600;\n  transition: background 0.2s;\n}\n\n.stripe-pay-button:hover {\n  background: #4f46e5;\n}\n\n.security-notice {\n  margin: 16px 0 0 0;\n  font-size: 12px;\n  color: #6b7280;\n  line-height: 1.5;\n}\n</style>\n"],"names":["_ssrRenderAttrs","_mergeProps","_unref","_ssrRenderList","_ssrInterpolate","_ssrRenderClass"],"mappings":"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"}
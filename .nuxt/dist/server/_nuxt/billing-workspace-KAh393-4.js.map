{"version":3,"file":"billing-workspace-KAh393-4.js","sources":["../../../../components/SystemFailoverStatus.vue","../../../../composables/usePhoneSystem.ts","../../../../components/PhoneSystem.vue","../../../../composables/useBillingWorkspace.ts","../../../../components/BillingEmailCenter.vue","../../../../components/AIPhoneAssistant.vue","../../../../components/BillingFaxCenter.vue","../../../../components/DocumentWorkspace.vue","../../../../composables/useQueues.ts","../../../../components/QueueManagement.vue","../../../../composables/useBuilders.ts","../../../../components/WorkspaceBuilders.vue","../../../../components/AIFaceSheetReviewer.vue","../../../../composables/useEndOfDayReconciliation.ts","../../../../components/EndOfDayReconciliation.vue","../../../../pages/founder/billing-workspace.vue"],"sourcesContent":["<template>\n  <div v-if=\"hasFailures\" class=\"failover-banner\">\n    <div class=\"failover-alerts\">\n      <div v-for=\"component in degradedComponents\" :key=\"component.component_name\" class=\"failover-alert\">\n        <span class=\"alert-icon\">‚ö†Ô∏è</span>\n        <div class=\"alert-content\">\n          <strong>{{ formatComponentName(component.component_name) }} {{ component.component_status }}</strong>\n          <p>{{ component.status_message }}</p>\n          <p v-if=\"component.failover_active\" class=\"failover-mode\">\n            Failover active: {{ component.failover_mode }}\n          </p>\n        </div>\n        <button @click=\"dismissAlert(component.component_name)\" class=\"dismiss-btn\">√ó</button>\n      </div>\n    </div>\n  </div>\n\n  <div v-if=\"showStatusPanel\" class=\"status-panel\">\n    <div class=\"panel-header\">\n      <h3>System Status</h3>\n      <button @click=\"showStatusPanel = false\" class=\"close-btn\">√ó</button>\n    </div>\n    <div class=\"status-list\">\n      <div v-for=\"component in systemStatus\" :key=\"component.component_name\" class=\"status-item\">\n        <span :class=\"['status-indicator', component.component_status]\"></span>\n        <div class=\"status-details\">\n          <p class=\"status-name\">{{ formatComponentName(component.component_name) }}</p>\n          <p class=\"status-message\">{{ component.status_message }}</p>\n        </div>\n        <span class=\"status-time\">{{ formatTime(component.last_checked) }}</span>\n      </div>\n    </div>\n  </div>\n\n  <button @click=\"showStatusPanel = true\" class=\"status-trigger\">\n    <span :class=\"['status-dot', overallStatus]\"></span>\n    System Status\n  </button>\n</template>\n\n<script setup lang=\"ts\">\nconst supabase = useSupabaseClient()\n\nconst systemStatus = ref<any[]>([])\nconst dismissedAlerts = ref<string[]>([])\nconst showStatusPanel = ref(false)\n\nconst degradedComponents = computed(() => {\n  return systemStatus.value.filter(\n    c => c.component_status !== 'operational' && !dismissedAlerts.value.includes(c.component_name)\n  )\n})\n\nconst hasFailures = computed(() => degradedComponents.value.length > 0)\n\nconst overallStatus = computed(() => {\n  const statuses = systemStatus.value.map(c => c.component_status)\n  if (statuses.includes('offline')) return 'offline'\n  if (statuses.includes('degraded')) return 'degraded'\n  return 'operational'\n})\n\nconst formatComponentName = (name: string) => {\n  return name.split('_').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')\n}\n\nconst formatTime = (timestamp: string) => {\n  const d = new Date(timestamp)\n  return d.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })\n}\n\nconst dismissAlert = (componentName: string) => {\n  dismissedAlerts.value.push(componentName)\n}\n\nconst loadSystemStatus = async () => {\n  const { data, error } = await supabase\n    .from('system_failover_status')\n    .select('*')\n\n  if (error) {\n    console.error('Error loading system status:', error)\n    return\n  }\n\n  systemStatus.value = data || []\n}\n\nonMounted(() => {\n  loadSystemStatus()\n\n  setInterval(() => {\n    loadSystemStatus()\n  }, 30000)\n})\n</script>\n\n<style scoped>\n.failover-banner {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 3000;\n  background: #fef2f2;\n  border-bottom: 2px solid #fecaca;\n  padding: 12px 24px;\n}\n\n.failover-alerts {\n  max-width: 1400px;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.failover-alert {\n  display: flex;\n  align-items: start;\n  gap: 12px;\n  background: white;\n  border: 1px solid #fecaca;\n  border-radius: 8px;\n  padding: 12px;\n}\n\n.alert-icon {\n  font-size: 24px;\n}\n\n.alert-content {\n  flex: 1;\n}\n\n.alert-content strong {\n  font-size: 14px;\n  color: #991b1b;\n  display: block;\n  margin-bottom: 4px;\n}\n\n.alert-content p {\n  margin: 0;\n  font-size: 13px;\n  color: #6b7280;\n}\n\n.failover-mode {\n  margin-top: 4px;\n  color: #f59e0b;\n  font-weight: 500;\n}\n\n.dismiss-btn {\n  background: none;\n  border: none;\n  font-size: 24px;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 0;\n}\n\n.dismiss-btn:hover {\n  color: #6b7280;\n}\n\n.status-trigger {\n  position: fixed;\n  bottom: 24px;\n  right: 400px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 500;\n  color: #374151;\n  cursor: pointer;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  z-index: 1999;\n}\n\n.status-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n}\n\n.status-dot.operational {\n  background: #10b981;\n}\n\n.status-dot.degraded {\n  background: #f59e0b;\n}\n\n.status-dot.offline {\n  background: #ef4444;\n}\n\n.status-panel {\n  position: fixed;\n  bottom: 80px;\n  right: 24px;\n  width: 400px;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n  z-index: 2000;\n}\n\n.panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.panel-header h3 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 24px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 0;\n}\n\n.status-list {\n  padding: 16px;\n  max-height: 400px;\n  overflow-y: auto;\n}\n\n.status-item {\n  display: flex;\n  align-items: start;\n  gap: 12px;\n  padding: 12px;\n  background: #f9fafb;\n  border-radius: 8px;\n  margin-bottom: 8px;\n}\n\n.status-indicator {\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  margin-top: 4px;\n}\n\n.status-indicator.operational {\n  background: #10b981;\n}\n\n.status-indicator.degraded {\n  background: #f59e0b;\n}\n\n.status-indicator.offline {\n  background: #ef4444;\n}\n\n.status-details {\n  flex: 1;\n}\n\n.status-name {\n  font-size: 14px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 4px 0;\n}\n\n.status-message {\n  font-size: 13px;\n  color: #6b7280;\n  margin: 0;\n}\n\n.status-time {\n  font-size: 12px;\n  color: #9ca3af;\n}\n</style>\n","export const usePhoneSystem = () => {\n  const supabase = useSupabaseClient()\n\n  const ESCALATION_KEYWORDS = {\n    human_request: ['human', 'person', 'transfer', 'supervisor', 'manager'],\n    dispute_denial: ['denied', 'denial', 'appeal', 'reconsideration', 'overturned', 'not payable', 'not covered'],\n    legal_compliance: ['legal', 'attorney', 'lawyer', 'compliance', 'hipaa', 'cms', 'fraud', 'audit'],\n    payment_commitment: ['can\\'t guarantee', 'can\\'t confirm payment', 'payment decision', 'policy exception', 'out of network exception']\n  }\n\n  const getPhoneSettings = async (userId: string) => {\n    const { data, error } = await supabase\n      .from('phone_system_settings')\n      .select('*')\n      .eq('user_id', userId)\n      .maybeSingle()\n\n    if (error) throw error\n\n    if (!data) {\n      return await createDefaultPhoneSettings(userId)\n    }\n\n    return data\n  }\n\n  const createDefaultPhoneSettings = async (userId: string) => {\n    const { data, error } = await supabase\n      .from('phone_system_settings')\n      .insert({\n        user_id: userId,\n        ringer_volume: 80,\n        in_call_volume: 80,\n        notification_volume: 60,\n        ringer_muted: false,\n        notifications_muted: false,\n        dnd_enabled: false,\n        ai_answer_first: true\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const updatePhoneSettings = async (userId: string, settings: any) => {\n    const { data, error } = await supabase\n      .from('phone_system_settings')\n      .update({\n        ...settings,\n        updated_at: new Date().toISOString()\n      })\n      .eq('user_id', userId)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const enableDND = async (userId: string, duration?: number) => {\n    const dndUntil = duration ? new Date(Date.now() + duration * 60000).toISOString() : null\n\n    return await updatePhoneSettings(userId, {\n      dnd_enabled: true,\n      dnd_until: dndUntil\n    })\n  }\n\n  const disableDND = async (userId: string) => {\n    return await updatePhoneSettings(userId, {\n      dnd_enabled: false,\n      dnd_until: null\n    })\n  }\n\n  const getActiveCalls = async () => {\n    const { data, error } = await supabase\n      .from('active_calls')\n      .select('*')\n      .neq('call_state', 'completed')\n      .order('started_at', { ascending: false })\n\n    if (error) throw error\n    return data || []\n  }\n\n  const createInboundCall = async (callData: {\n    callSid: string\n    callerNumber: string\n    callerIdentity?: string\n  }) => {\n    const { data, error } = await supabase\n      .from('active_calls')\n      .insert({\n        call_sid: callData.callSid,\n        direction: 'inbound',\n        caller_number: callData.callerNumber,\n        caller_identity: callData.callerIdentity,\n        call_state: 'ringing'\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const createOutboundCall = async (callData: {\n    callSid: string\n    calleeNumber: string\n    context?: any\n  }) => {\n    const { data, error } = await supabase\n      .from('active_calls')\n      .insert({\n        call_sid: callData.callSid,\n        direction: 'outbound',\n        callee_number: callData.calleeNumber,\n        call_state: 'ringing',\n        call_context: callData.context || {}\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const answerCall = async (callId: string, handledBy: 'ai' | 'founder') => {\n    const { data, error } = await supabase\n      .from('active_calls')\n      .update({\n        call_state: 'answered',\n        handled_by: handledBy,\n        answered_at: new Date().toISOString()\n      })\n      .eq('id', callId)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const declineCall = async (callId: string) => {\n    const { data, error } = await supabase\n      .from('active_calls')\n      .update({\n        call_state: 'completed',\n        handled_by: 'voicemail',\n        ended_at: new Date().toISOString()\n      })\n      .eq('id', callId)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const escalateCall = async (callId: string, trigger: string, keywords: string[], aiSummary: string) => {\n    await supabase\n      .from('active_calls')\n      .update({\n        call_state: 'escalating',\n        escalation_triggered: true,\n        escalation_reason: trigger,\n        escalation_keywords: keywords\n      })\n      .eq('id', callId)\n\n    const { data, error } = await supabase\n      .from('call_escalations')\n      .insert({\n        call_id: callId,\n        escalation_trigger: trigger,\n        trigger_keywords: keywords,\n        ai_summary: aiSummary\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const acceptEscalation = async (escalationId: string) => {\n    const { data, error } = await supabase\n      .from('call_escalations')\n      .update({\n        escalation_accepted: true,\n        founder_joined_at: new Date().toISOString()\n      })\n      .eq('id', escalationId)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const endCall = async (callId: string, duration: number) => {\n    const { data, error } = await supabase\n      .from('active_calls')\n      .update({\n        call_state: 'completed',\n        ended_at: new Date().toISOString(),\n        duration_seconds: duration\n      })\n      .eq('id', callId)\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const createVoicemail = async (voicemailData: {\n    callId: string\n    callerNumber: string\n    callerIdentity?: string\n    audioUrl?: string\n    transcript?: string\n    durationSeconds: number\n  }) => {\n    const { data, error } = await supabase\n      .from('voicemail_records')\n      .insert({\n        call_id: voicemailData.callId,\n        caller_number: voicemailData.callerNumber,\n        caller_identity: voicemailData.callerIdentity,\n        audio_url: voicemailData.audioUrl,\n        transcript: voicemailData.transcript,\n        duration_seconds: voicemailData.durationSeconds,\n        voicemail_status: 'new'\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const getVoicemails = async (status?: string) => {\n    let query = supabase\n      .from('voicemail_records')\n      .select('*')\n      .order('created_at', { ascending: false })\n\n    if (status) {\n      query = query.eq('voicemail_status', status)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  const updateVoicemailStatus = async (voicemailId: string, status: string) => {\n    const updateData: any = { voicemail_status: status }\n\n    if (status === 'reviewed') {\n      updateData.reviewed_at = new Date().toISOString()\n    } else if (status === 'resolved') {\n      updateData.resolved_at = new Date().toISOString()\n    }\n\n    const { error } = await supabase\n      .from('voicemail_records')\n      .update(updateData)\n      .eq('id', voicemailId)\n\n    if (error) throw error\n  }\n\n  const checkForEscalationKeywords = (transcript: string): { triggered: boolean; keywords: string[]; trigger: string } => {\n    const lowerTranscript = transcript.toLowerCase()\n\n    for (const [trigger, keywords] of Object.entries(ESCALATION_KEYWORDS)) {\n      const foundKeywords = keywords.filter(keyword => lowerTranscript.includes(keyword.toLowerCase()))\n      if (foundKeywords.length > 0) {\n        return {\n          triggered: true,\n          keywords: foundKeywords,\n          trigger\n        }\n      }\n    }\n\n    return { triggered: false, keywords: [], trigger: '' }\n  }\n\n  return {\n    ESCALATION_KEYWORDS,\n    getPhoneSettings,\n    updatePhoneSettings,\n    enableDND,\n    disableDND,\n    getActiveCalls,\n    createInboundCall,\n    createOutboundCall,\n    answerCall,\n    declineCall,\n    escalateCall,\n    acceptEscalation,\n    endCall,\n    createVoicemail,\n    getVoicemails,\n    updateVoicemailStatus,\n    checkForEscalationKeywords\n  }\n}\n","<template>\n  <div class=\"phone-system\">\n    <div v-if=\"incomingCall\" class=\"incoming-call-overlay\" :class=\"{ ringing: isRinging }\">\n      <div class=\"incoming-call-card\">\n        <div class=\"call-icon\">üìû</div>\n        <div class=\"call-info\">\n          <h3>Incoming Call</h3>\n          <p class=\"caller\">{{ incomingCall.caller_identity || incomingCall.caller_number }}</p>\n          <p class=\"call-type\">Billing Related</p>\n        </div>\n        <div class=\"call-actions\">\n          <button @click=\"answerCall\" class=\"answer-btn\">Answer</button>\n          <button @click=\"declineCall\" class=\"decline-btn\">Decline</button>\n        </div>\n        <div v-if=\"settings.ai_answer_first\" class=\"ai-option\">\n          <p>AI Assistant will answer in {{ aiAnswerCountdown }}s...</p>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"activeCall\" class=\"active-call-panel\">\n      <div class=\"call-header\">\n        <span class=\"status-indicator\" :class=\"activeCall.call_state\"></span>\n        <span class=\"call-duration\">{{ formatDuration(callDuration) }}</span>\n      </div>\n      <div class=\"call-identity\">\n        <h4>{{ activeCall.caller_identity || activeCall.caller_number || activeCall.callee_number }}</h4>\n        <p class=\"call-direction\">{{ activeCall.direction === 'inbound' ? 'Inbound' : 'Outbound' }}</p>\n      </div>\n      <div class=\"call-controls\">\n        <button @click=\"toggleMute\" :class=\"['control-btn', { active: isMuted }]\">\n          {{ isMuted ? 'üîá' : 'üé§' }}\n        </button>\n        <button @click=\"endActiveCall\" class=\"end-call-btn\">End Call</button>\n      </div>\n      <div v-if=\"activeCall.escalation_triggered\" class=\"escalation-alert\">\n        <p>‚ö†Ô∏è Escalation Triggered</p>\n        <p class=\"reason\">{{ activeCall.escalation_reason }}</p>\n        <button @click=\"acceptTakeover\" class=\"takeover-btn\">Take Over Call</button>\n      </div>\n      <div v-if=\"activeCall.live_transcript\" class=\"live-transcript\">\n        <h5>Live Transcript</h5>\n        <p>{{ activeCall.live_transcript }}</p>\n      </div>\n    </div>\n\n    <div class=\"phone-controls\">\n      <div class=\"phone-status\">\n        <span class=\"status-dot\" :class=\"phoneStatus\"></span>\n        <span>Phone {{ phoneStatus }}</span>\n      </div>\n      <button @click=\"showSettings = !showSettings\" class=\"settings-btn\">‚öôÔ∏è</button>\n    </div>\n\n    <div v-if=\"showSettings\" class=\"phone-settings-panel\">\n      <div class=\"settings-header\">\n        <h3>Phone Settings</h3>\n        <button @click=\"showSettings = false\" class=\"close-btn\">√ó</button>\n      </div>\n      <div class=\"settings-content\">\n        <div class=\"setting-group\">\n          <label>Ringer Volume</label>\n          <input\n            type=\"range\"\n            v-model=\"settings.ringer_volume\"\n            min=\"0\"\n            max=\"100\"\n            @change=\"saveSettings\"\n          />\n          <span>{{ settings.ringer_volume }}%</span>\n        </div>\n        <div class=\"setting-group\">\n          <label>In-Call Volume</label>\n          <input\n            type=\"range\"\n            v-model=\"settings.in_call_volume\"\n            min=\"0\"\n            max=\"100\"\n            @change=\"saveSettings\"\n          />\n          <span>{{ settings.in_call_volume }}%</span>\n        </div>\n        <div class=\"setting-group\">\n          <label>Notification Volume</label>\n          <input\n            type=\"range\"\n            v-model=\"settings.notification_volume\"\n            min=\"0\"\n            max=\"100\"\n            @change=\"saveSettings\"\n          />\n          <span>{{ settings.notification_volume }}%</span>\n        </div>\n        <div class=\"setting-group\">\n          <label>\n            <input type=\"checkbox\" v-model=\"settings.ringer_muted\" @change=\"saveSettings\" />\n            Mute Ringer\n          </label>\n        </div>\n        <div class=\"setting-group\">\n          <label>\n            <input type=\"checkbox\" v-model=\"settings.ai_answer_first\" @change=\"saveSettings\" />\n            AI Answers First\n          </label>\n        </div>\n        <div class=\"setting-group\">\n          <label>Do Not Disturb</label>\n          <button\n            @click=\"toggleDND\"\n            :class=\"['dnd-btn', { active: settings.dnd_enabled }]\"\n          >\n            {{ settings.dnd_enabled ? 'Disable DND' : 'Enable DND' }}\n          </button>\n          <div v-if=\"settings.dnd_enabled\" class=\"dnd-info\">\n            <p>Active until {{ formatDNDUntil }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"settings.dnd_enabled\" class=\"dnd-indicator\">\n      üåô Do Not Disturb\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst {\n  getPhoneSettings,\n  updatePhoneSettings,\n  enableDND,\n  disableDND,\n  getActiveCalls,\n  answerCall: answerCallAction,\n  declineCall: declineCallAction,\n  endCall,\n  acceptEscalation\n} = usePhoneSystem()\n\nconst incomingCall = ref<any>(null)\nconst activeCall = ref<any>(null)\nconst isRinging = ref(false)\nconst isMuted = ref(false)\nconst showSettings = ref(false)\nconst phoneStatus = ref('operational')\nconst callDuration = ref(0)\nconst aiAnswerCountdown = ref(10)\n\nconst settings = ref({\n  ringer_volume: 80,\n  in_call_volume: 80,\n  notification_volume: 60,\n  ringer_muted: false,\n  notifications_muted: false,\n  dnd_enabled: false,\n  dnd_until: null,\n  ai_answer_first: true\n})\n\nconst formatDuration = (seconds: number) => {\n  const mins = Math.floor(seconds / 60)\n  const secs = seconds % 60\n  return `${mins}:${secs.toString().padStart(2, '0')}`\n}\n\nconst formatDNDUntil = computed(() => {\n  if (!settings.value.dnd_until) return 'manually disabled'\n  return new Date(settings.value.dnd_until).toLocaleTimeString()\n})\n\nconst loadSettings = async () => {\n  const userId = 'founder'\n  const data = await getPhoneSettings(userId)\n  if (data) {\n    settings.value = data\n  }\n}\n\nconst saveSettings = async () => {\n  const userId = 'founder'\n  await updatePhoneSettings(userId, settings.value)\n}\n\nconst toggleDND = async () => {\n  const userId = 'founder'\n  if (settings.value.dnd_enabled) {\n    await disableDND(userId)\n    settings.value.dnd_enabled = false\n    settings.value.dnd_until = null\n  } else {\n    await enableDND(userId, 30)\n    const newSettings = await getPhoneSettings(userId)\n    settings.value = newSettings\n  }\n}\n\nconst startRinging = () => {\n  if (settings.value.ringer_muted || settings.value.dnd_enabled) return\n  isRinging.value = true\n}\n\nconst stopRinging = () => {\n  isRinging.value = false\n}\n\nconst answerCall = async () => {\n  if (!incomingCall.value) return\n\n  stopRinging()\n\n  await answerCallAction(incomingCall.value.id, 'founder')\n\n  activeCall.value = incomingCall.value\n  activeCall.value.call_state = 'active'\n  incomingCall.value = null\n\n  startCallTimer()\n}\n\nconst declineCall = async () => {\n  if (!incomingCall.value) return\n\n  stopRinging()\n\n  await declineCallAction(incomingCall.value.id)\n\n  incomingCall.value = null\n}\n\nconst endActiveCall = async () => {\n  if (!activeCall.value) return\n\n  await endCall(activeCall.value.id, callDuration.value)\n\n  stopCallTimer()\n  activeCall.value = null\n}\n\nconst acceptTakeover = async () => {\n  if (!activeCall.value) return\n\n  activeCall.value.handled_by = 'founder'\n  activeCall.value.escalation_triggered = false\n}\n\nconst toggleMute = () => {\n  isMuted.value = !isMuted.value\n}\n\nlet callTimer: any = null\n\nconst startCallTimer = () => {\n  callDuration.value = 0\n  callTimer = setInterval(() => {\n    callDuration.value++\n  }, 1000)\n}\n\nconst stopCallTimer = () => {\n  if (callTimer) {\n    clearInterval(callTimer)\n    callTimer = null\n  }\n  callDuration.value = 0\n}\n\nconst simulateIncomingCall = () => {\n  if (incomingCall.value || activeCall.value) return\n\n  const mockCall = {\n    id: `call-${Date.now()}`,\n    call_sid: `sid-${Date.now()}`,\n    direction: 'inbound',\n    caller_number: '+1-555-0123',\n    caller_identity: 'Blue Cross Insurance',\n    call_state: 'ringing'\n  }\n\n  incomingCall.value = mockCall\n  startRinging()\n\n  if (settings.value.ai_answer_first) {\n    aiAnswerCountdown.value = 10\n    const countdown = setInterval(() => {\n      aiAnswerCountdown.value--\n      if (aiAnswerCountdown.value <= 0) {\n        clearInterval(countdown)\n        if (incomingCall.value) {\n          autoAnswerWithAI()\n        }\n      }\n    }, 1000)\n  }\n}\n\nconst autoAnswerWithAI = async () => {\n  if (!incomingCall.value) return\n\n  stopRinging()\n\n  await answerCallAction(incomingCall.value.id, 'ai')\n\n  activeCall.value = incomingCall.value\n  activeCall.value.call_state = 'active'\n  activeCall.value.handled_by = 'ai'\n  incomingCall.value = null\n\n  startCallTimer()\n\n  setTimeout(() => {\n    if (activeCall.value && activeCall.value.handled_by === 'ai') {\n      simulateEscalation()\n    }\n  }, 15000)\n}\n\nconst simulateEscalation = () => {\n  if (!activeCall.value) return\n\n  activeCall.value.escalation_triggered = true\n  activeCall.value.escalation_reason = 'Caller requested human supervisor'\n  activeCall.value.call_state = 'escalating'\n\n  startRinging()\n}\n\nonMounted(async () => {\n  await loadSettings()\n\n  setTimeout(() => {\n    simulateIncomingCall()\n  }, 5000)\n})\n\nonUnmounted(() => {\n  stopCallTimer()\n  stopRinging()\n})\n</script>\n\n<style scoped>\n.phone-system {\n  position: fixed;\n  z-index: 2000;\n}\n\n.incoming-call-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2001;\n}\n\n.incoming-call-overlay.ringing {\n  animation: pulse 1s infinite;\n}\n\n@keyframes pulse {\n  0%, 100% { background: rgba(0, 0, 0, 0.8); }\n  50% { background: rgba(59, 130, 246, 0.3); }\n}\n\n.incoming-call-card {\n  background: white;\n  border-radius: 16px;\n  padding: 32px;\n  text-align: center;\n  min-width: 350px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n}\n\n.call-icon {\n  font-size: 64px;\n  margin-bottom: 16px;\n  animation: ring 1s infinite;\n}\n\n@keyframes ring {\n  0%, 100% { transform: rotate(0deg); }\n  10%, 30% { transform: rotate(-15deg); }\n  20%, 40% { transform: rotate(15deg); }\n}\n\n.call-info h3 {\n  font-size: 24px;\n  font-weight: 700;\n  color: #111827;\n  margin: 0 0 8px 0;\n}\n\n.caller {\n  font-size: 18px;\n  font-weight: 600;\n  color: #3b82f6;\n  margin: 0 0 4px 0;\n}\n\n.call-type {\n  font-size: 14px;\n  color: #6b7280;\n  margin: 0 0 24px 0;\n}\n\n.call-actions {\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n}\n\n.answer-btn,\n.decline-btn {\n  padding: 12px 32px;\n  border: none;\n  border-radius: 8px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.answer-btn {\n  background: #10b981;\n  color: white;\n}\n\n.answer-btn:hover {\n  background: #059669;\n}\n\n.decline-btn {\n  background: #ef4444;\n  color: white;\n}\n\n.decline-btn:hover {\n  background: #dc2626;\n}\n\n.ai-option {\n  margin-top: 16px;\n  padding: 12px;\n  background: #eff6ff;\n  border-radius: 8px;\n}\n\n.ai-option p {\n  margin: 0;\n  font-size: 13px;\n  color: #1e40af;\n}\n\n.active-call-panel {\n  position: fixed;\n  bottom: 24px;\n  right: 24px;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  padding: 20px;\n  min-width: 300px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n  z-index: 2001;\n}\n\n.call-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n\n.status-indicator {\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: #10b981;\n  animation: blink 2s infinite;\n}\n\n@keyframes blink {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.3; }\n}\n\n.call-duration {\n  font-size: 14px;\n  font-weight: 600;\n  color: #6b7280;\n}\n\n.call-identity h4 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 4px 0;\n}\n\n.call-direction {\n  font-size: 13px;\n  color: #6b7280;\n  margin: 0 0 16px 0;\n}\n\n.call-controls {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n\n.control-btn {\n  padding: 8px 16px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 18px;\n  cursor: pointer;\n}\n\n.control-btn.active {\n  background: #fef2f2;\n  border-color: #fecaca;\n}\n\n.end-call-btn {\n  flex: 1;\n  padding: 8px 16px;\n  background: #ef4444;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.escalation-alert {\n  background: #fef3c7;\n  border: 1px solid #fde68a;\n  border-radius: 6px;\n  padding: 12px;\n  margin-bottom: 12px;\n}\n\n.escalation-alert p {\n  margin: 0 0 4px 0;\n  font-size: 13px;\n  color: #92400e;\n}\n\n.reason {\n  font-weight: 600;\n}\n\n.takeover-btn {\n  width: 100%;\n  margin-top: 8px;\n  padding: 8px;\n  background: #f59e0b;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.live-transcript {\n  background: #f9fafb;\n  border-radius: 6px;\n  padding: 12px;\n  max-height: 150px;\n  overflow-y: auto;\n}\n\n.live-transcript h5 {\n  font-size: 12px;\n  font-weight: 600;\n  color: #6b7280;\n  margin: 0 0 8px 0;\n}\n\n.live-transcript p {\n  margin: 0;\n  font-size: 13px;\n  color: #374151;\n  line-height: 1.5;\n}\n\n.phone-controls {\n  position: fixed;\n  bottom: 24px;\n  left: 24px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 12px 16px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  z-index: 2000;\n}\n\n.phone-status {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 14px;\n  color: #374151;\n}\n\n.status-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n}\n\n.status-dot.operational {\n  background: #10b981;\n}\n\n.status-dot.degraded {\n  background: #f59e0b;\n}\n\n.status-dot.offline {\n  background: #ef4444;\n}\n\n.settings-btn {\n  padding: 6px 12px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 16px;\n  cursor: pointer;\n}\n\n.phone-settings-panel {\n  position: fixed;\n  bottom: 80px;\n  left: 24px;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  padding: 20px;\n  min-width: 350px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n  z-index: 2001;\n}\n\n.settings-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.settings-header h3 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 24px;\n  cursor: pointer;\n  color: #6b7280;\n  padding: 0;\n}\n\n.setting-group {\n  margin-bottom: 16px;\n}\n\n.setting-group label {\n  display: block;\n  font-size: 13px;\n  font-weight: 500;\n  color: #374151;\n  margin-bottom: 8px;\n}\n\n.setting-group input[type=\"range\"] {\n  width: 200px;\n  margin-right: 8px;\n}\n\n.setting-group span {\n  font-size: 13px;\n  color: #6b7280;\n}\n\n.dnd-btn {\n  padding: 8px 16px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.dnd-btn.active {\n  background: #fef3c7;\n  border-color: #fde68a;\n  color: #92400e;\n}\n\n.dnd-info {\n  margin-top: 8px;\n  padding: 8px;\n  background: #fffbeb;\n  border-radius: 4px;\n}\n\n.dnd-info p {\n  margin: 0;\n  font-size: 12px;\n  color: #78350f;\n}\n\n.dnd-indicator {\n  position: fixed;\n  top: 24px;\n  right: 24px;\n  padding: 12px 20px;\n  background: #fef3c7;\n  border: 1px solid #fde68a;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  color: #92400e;\n  z-index: 2000;\n}\n</style>\n","export const useBillingWorkspace = () => {\n  const supabase = useSupabaseClient()\n\n  const getEmailThreads = async (filters?: { status?: string; linkedAgencyId?: string; linkedClaimId?: string }) => {\n    let query = supabase\n      .from('billing_emails')\n      .select('*')\n      .order('created_at', { ascending: false })\n\n    if (filters?.status) {\n      query = query.eq('status', filters.status)\n    }\n    if (filters?.linkedAgencyId) {\n      query = query.eq('linked_agency_id', filters.linkedAgencyId)\n    }\n    if (filters?.linkedClaimId) {\n      query = query.eq('linked_claim_id', filters.linkedClaimId)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  const sendEmail = async (emailData: {\n    subject: string\n    toAddresses: string[]\n    ccAddresses?: string[]\n    bodyText: string\n    bodyHtml?: string\n    linkedAgencyId?: string\n    linkedClaimId?: string\n    linkedEncounterId?: string\n  }) => {\n    const threadId = `thread-${Date.now()}`\n    const messageId = `msg-${Date.now()}-${Math.random().toString(36).substring(7)}`\n\n    const { data, error } = await supabase\n      .from('billing_emails')\n      .insert({\n        thread_id: threadId,\n        message_id: messageId,\n        subject: emailData.subject,\n        from_address: 'billing@malibuems.com',\n        to_addresses: emailData.toAddresses,\n        cc_addresses: emailData.ccAddresses || [],\n        body_text: emailData.bodyText,\n        body_html: emailData.bodyHtml || emailData.bodyText,\n        direction: 'outbound',\n        status: 'sent',\n        linked_agency_id: emailData.linkedAgencyId,\n        linked_claim_id: emailData.linkedClaimId,\n        linked_encounter_id: emailData.linkedEncounterId,\n        sent_at: new Date().toISOString()\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n\n    await logActivity({\n      activityType: 'email_sent',\n      entityType: 'email',\n      entityId: data.id,\n      description: `Sent email: ${emailData.subject}`,\n      metadata: { to: emailData.toAddresses }\n    })\n\n    return data\n  }\n\n  const archiveEmail = async (emailId: string) => {\n    const { error } = await supabase\n      .from('billing_emails')\n      .update({ status: 'archived' })\n      .eq('id', emailId)\n\n    if (error) throw error\n  }\n\n  const updateEmailNotes = async (emailId: string, notes: string) => {\n    const { error } = await supabase\n      .from('billing_emails')\n      .update({ internal_notes: notes })\n      .eq('id', emailId)\n\n    if (error) throw error\n  }\n\n  const getAICalls = async (filters?: { status?: string; escalationRequired?: boolean }) => {\n    let query = supabase\n      .from('ai_phone_calls')\n      .select('*')\n      .order('created_at', { ascending: false })\n\n    if (filters?.status) {\n      query = query.eq('call_status', filters.status)\n    }\n    if (filters?.escalationRequired !== undefined) {\n      query = query.eq('escalation_required', filters.escalationRequired)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  const initiateAICall = async (callData: {\n    phoneNumber: string\n    purpose: 'eligibility' | 'claim_status' | 'follow_up' | 'escalation' | 'other'\n    organizationName: string\n    linkedAgencyId?: string\n    linkedClaimId?: string\n    linkedEncounterId?: string\n  }) => {\n    const { data, error } = await supabase\n      .from('ai_phone_calls')\n      .insert({\n        phone_number: callData.phoneNumber,\n        direction: 'outbound',\n        call_purpose: callData.purpose,\n        organization_name: callData.organizationName,\n        call_status: 'initiated',\n        linked_agency_id: callData.linkedAgencyId,\n        linked_claim_id: callData.linkedClaimId,\n        linked_encounter_id: callData.linkedEncounterId,\n        started_at: new Date().toISOString()\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n\n    await logActivity({\n      activityType: 'call_made',\n      entityType: 'phone_call',\n      entityId: data.id,\n      description: `Initiated AI call to ${callData.organizationName}`,\n      metadata: { purpose: callData.purpose }\n    })\n\n    return data\n  }\n\n  const updateCallStatus = async (callId: string, status: string, updates?: {\n    transcript?: string\n    summary?: string\n    outcome?: string\n    escalationRequired?: boolean\n    escalationReason?: string\n  }) => {\n    const updateData: any = { call_status: status }\n\n    if (status === 'completed') {\n      updateData.completed_at = new Date().toISOString()\n    }\n\n    if (updates) {\n      Object.assign(updateData, updates)\n    }\n\n    const { error } = await supabase\n      .from('ai_phone_calls')\n      .update(updateData)\n      .eq('id', callId)\n\n    if (error) throw error\n  }\n\n  const markCallReviewed = async (callId: string) => {\n    const { error } = await supabase\n      .from('ai_phone_calls')\n      .update({ founder_reviewed: true })\n      .eq('id', callId)\n\n    if (error) throw error\n  }\n\n  const getFaxes = async (filters?: { direction?: string; status?: string }) => {\n    let query = supabase\n      .from('billing_faxes')\n      .select('*')\n      .order('created_at', { ascending: false })\n\n    if (filters?.direction) {\n      query = query.eq('direction', filters.direction)\n    }\n    if (filters?.status) {\n      query = query.eq('status', filters.status)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  const sendFax = async (faxData: {\n    faxNumber: string\n    pdfUrl: string\n    purpose: string\n    linkedAgencyId?: string\n    linkedClaimId?: string\n    linkedEncounterId?: string\n  }) => {\n    const { data, error } = await supabase\n      .from('billing_faxes')\n      .insert({\n        fax_number: faxData.faxNumber,\n        direction: 'outbound',\n        status: 'sending',\n        pdf_url: faxData.pdfUrl,\n        purpose: faxData.purpose,\n        linked_agency_id: faxData.linkedAgencyId,\n        linked_claim_id: faxData.linkedClaimId,\n        linked_encounter_id: faxData.linkedEncounterId\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n\n    await logActivity({\n      activityType: 'fax_sent',\n      entityType: 'fax',\n      entityId: data.id,\n      description: `Sent fax to ${faxData.faxNumber}`,\n      metadata: { purpose: faxData.purpose }\n    })\n\n    return data\n  }\n\n  const getDocuments = async (filters?: { documentType?: string; organizationType?: string; isFinalized?: boolean }) => {\n    let query = supabase\n      .from('workspace_documents')\n      .select('*')\n      .order('updated_at', { ascending: false })\n\n    if (filters?.documentType) {\n      query = query.eq('document_type', filters.documentType)\n    }\n    if (filters?.organizationType) {\n      query = query.eq('organization_type', filters.organizationType)\n    }\n    if (filters?.isFinalized !== undefined) {\n      query = query.eq('is_finalized', filters.isFinalized)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  const createDocument = async (documentData: {\n    documentName: string\n    documentType: 'word' | 'excel' | 'powerpoint' | 'pdf' | 'text'\n    mimeType: string\n    storagePath: string\n    organizationType?: string\n    linkedAgencyId?: string\n    linkedClaimId?: string\n    linkedEncounterId?: string\n    billingPeriod?: string\n    tags?: string[]\n  }) => {\n    const { data, error } = await supabase\n      .from('workspace_documents')\n      .insert({\n        document_name: documentData.documentName,\n        document_type: documentData.documentType,\n        mime_type: documentData.mimeType,\n        storage_path: documentData.storagePath,\n        organization_type: documentData.organizationType,\n        linked_agency_id: documentData.linkedAgencyId,\n        linked_claim_id: documentData.linkedClaimId,\n        linked_encounter_id: documentData.linkedEncounterId,\n        billing_period: documentData.billingPeriod,\n        tags: documentData.tags || []\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n\n    await createDocumentVersion(data.id, 1, documentData.storagePath, 'Initial version')\n\n    await logActivity({\n      activityType: 'document_created',\n      entityType: 'document',\n      entityId: data.id,\n      description: `Created document: ${documentData.documentName}`,\n      metadata: { type: documentData.documentType }\n    })\n\n    return data\n  }\n\n  const updateDocument = async (documentId: string, storagePath: string, changeSummary?: string) => {\n    const { data: doc } = await supabase\n      .from('workspace_documents')\n      .select('current_version')\n      .eq('id', documentId)\n      .maybeSingle()\n\n    if (!doc) throw new Error('Document not found')\n\n    const newVersion = doc.current_version + 1\n\n    await supabase\n      .from('workspace_documents')\n      .update({\n        storage_path: storagePath,\n        current_version: newVersion,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', documentId)\n\n    await createDocumentVersion(documentId, newVersion, storagePath, changeSummary || 'Updated')\n\n    await logActivity({\n      activityType: 'document_edited',\n      entityType: 'document',\n      entityId: documentId,\n      description: `Updated document to version ${newVersion}`,\n      metadata: { version: newVersion }\n    })\n  }\n\n  const finalizeDocument = async (documentId: string) => {\n    const { error } = await supabase\n      .from('workspace_documents')\n      .update({\n        is_finalized: true,\n        finalized_at: new Date().toISOString()\n      })\n      .eq('id', documentId)\n\n    if (error) throw error\n\n    await logActivity({\n      activityType: 'document_finalized',\n      entityType: 'document',\n      entityId: documentId,\n      description: 'Document finalized (immutable)',\n      metadata: {}\n    })\n  }\n\n  const createDocumentVersion = async (documentId: string, versionNumber: number, storagePath: string, changeSummary: string) => {\n    const { error } = await supabase\n      .from('document_versions')\n      .insert({\n        document_id: documentId,\n        version_number: versionNumber,\n        storage_path: storagePath,\n        change_summary: changeSummary\n      })\n\n    if (error) throw error\n  }\n\n  const getDocumentVersions = async (documentId: string) => {\n    const { data, error } = await supabase\n      .from('document_versions')\n      .select('*')\n      .eq('document_id', documentId)\n      .order('version_number', { ascending: false })\n\n    if (error) throw error\n    return data || []\n  }\n\n  const addPDFAnnotation = async (annotationData: {\n    documentId: string\n    pageNumber: number\n    annotationType: 'note' | 'highlight' | 'stamp' | 'drawing'\n    annotationData: any\n    annotationText?: string\n  }) => {\n    const { data, error } = await supabase\n      .from('pdf_annotations')\n      .insert({\n        document_id: annotationData.documentId,\n        page_number: annotationData.pageNumber,\n        annotation_type: annotationData.annotationType,\n        annotation_data: annotationData.annotationData,\n        annotation_text: annotationData.annotationText\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n\n    await logActivity({\n      activityType: 'pdf_annotated',\n      entityType: 'document',\n      entityId: annotationData.documentId,\n      description: `Added ${annotationData.annotationType} annotation to page ${annotationData.pageNumber}`,\n      metadata: { page: annotationData.pageNumber, type: annotationData.annotationType }\n    })\n\n    return data\n  }\n\n  const getPDFAnnotations = async (documentId: string) => {\n    const { data, error } = await supabase\n      .from('pdf_annotations')\n      .select('*')\n      .eq('document_id', documentId)\n      .order('page_number')\n\n    if (error) throw error\n    return data || []\n  }\n\n  const getActivityLog = async (limit: number = 50) => {\n    const { data, error } = await supabase\n      .from('workspace_activity_log')\n      .select('*')\n      .order('created_at', { ascending: false })\n      .limit(limit)\n\n    if (error) throw error\n    return data || []\n  }\n\n  const logActivity = async (activityData: {\n    activityType: string\n    entityType: string\n    entityId: string\n    description: string\n    metadata: any\n  }) => {\n    await supabase\n      .from('workspace_activity_log')\n      .insert({\n        activity_type: activityData.activityType,\n        entity_type: activityData.entityType,\n        entity_id: activityData.entityId,\n        activity_description: activityData.description,\n        metadata: activityData.metadata\n      })\n  }\n\n  const getWorkspaceDashboard = async () => {\n    const { data: emails } = await supabase\n      .from('billing_emails')\n      .select('id, status')\n\n    const { data: calls } = await supabase\n      .from('ai_phone_calls')\n      .select('id, call_status, escalation_required')\n\n    const { data: faxes } = await supabase\n      .from('billing_faxes')\n      .select('id, status')\n\n    const { data: documents } = await supabase\n      .from('workspace_documents')\n      .select('id, is_finalized')\n\n    const unreadEmails = emails?.filter(e => e.status === 'received').length || 0\n    const pendingCalls = calls?.filter(c => c.call_status === 'requires_review').length || 0\n    const escalatedCalls = calls?.filter(c => c.escalation_required && !c.founder_reviewed).length || 0\n    const pendingFaxes = faxes?.filter(f => f.status === 'sending').length || 0\n    const draftDocuments = documents?.filter(d => !d.is_finalized).length || 0\n\n    return {\n      totalEmails: emails?.length || 0,\n      unreadEmails,\n      totalCalls: calls?.length || 0,\n      pendingCalls,\n      escalatedCalls,\n      totalFaxes: faxes?.length || 0,\n      pendingFaxes,\n      totalDocuments: documents?.length || 0,\n      draftDocuments\n    }\n  }\n\n  return {\n    getEmailThreads,\n    sendEmail,\n    archiveEmail,\n    updateEmailNotes,\n    getAICalls,\n    initiateAICall,\n    updateCallStatus,\n    markCallReviewed,\n    getFaxes,\n    sendFax,\n    getDocuments,\n    createDocument,\n    updateDocument,\n    finalizeDocument,\n    getDocumentVersions,\n    addPDFAnnotation,\n    getPDFAnnotations,\n    getActivityLog,\n    getWorkspaceDashboard\n  }\n}\n","<template>\n  <div class=\"email-center\">\n    <div class=\"email-header\">\n      <h3>Billing Email (Malibu)</h3>\n      <button @click=\"showCompose = true\" class=\"compose-btn\">Compose Email</button>\n    </div>\n\n    <div class=\"email-filters\">\n      <button\n        v-for=\"status in ['all', 'sent', 'received', 'archived']\"\n        :key=\"status\"\n        @click=\"filterStatus = status === 'all' ? '' : status\"\n        :class=\"['filter-btn', { active: filterStatus === (status === 'all' ? '' : status) }]\"\n      >\n        {{ status.charAt(0).toUpperCase() + status.slice(1) }}\n      </button>\n    </div>\n\n    <div v-if=\"loading\" class=\"loading\">Loading emails...</div>\n\n    <div v-else-if=\"emails.length === 0\" class=\"empty-state\">\n      No emails found\n    </div>\n\n    <div v-else class=\"email-list\">\n      <div\n        v-for=\"email in emails\"\n        :key=\"email.id\"\n        class=\"email-item\"\n        @click=\"selectEmail(email)\"\n        :class=\"{ selected: selectedEmail?.id === email.id }\"\n      >\n        <div class=\"email-meta\">\n          <span class=\"email-direction\" :class=\"email.direction\">\n            {{ email.direction === 'inbound' ? '‚Üê' : '‚Üí' }}\n          </span>\n          <span class=\"email-from\">{{ email.from_address }}</span>\n          <span class=\"email-date\">{{ formatDate(email.created_at) }}</span>\n        </div>\n        <div class=\"email-subject\">{{ email.subject || '(No Subject)' }}</div>\n        <div v-if=\"email.tags && email.tags.length > 0\" class=\"email-tags\">\n          <span v-for=\"tag in email.tags\" :key=\"tag\" class=\"tag\">{{ tag }}</span>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"selectedEmail\" class=\"email-viewer\">\n      <div class=\"viewer-header\">\n        <h4>{{ selectedEmail.subject || '(No Subject)' }}</h4>\n        <button @click=\"selectedEmail = null\" class=\"close-btn\">√ó</button>\n      </div>\n      <div class=\"email-details\">\n        <div class=\"detail-row\">\n          <span class=\"label\">From:</span>\n          <span>{{ selectedEmail.from_address }}</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"label\">To:</span>\n          <span>{{ selectedEmail.to_addresses.join(', ') }}</span>\n        </div>\n        <div v-if=\"selectedEmail.cc_addresses.length > 0\" class=\"detail-row\">\n          <span class=\"label\">CC:</span>\n          <span>{{ selectedEmail.cc_addresses.join(', ') }}</span>\n        </div>\n        <div class=\"detail-row\">\n          <span class=\"label\">Date:</span>\n          <span>{{ formatDateTime(selectedEmail.created_at) }}</span>\n        </div>\n      </div>\n      <div class=\"email-body\" v-html=\"selectedEmail.body_html || selectedEmail.body_text\"></div>\n      <div class=\"email-notes\">\n        <h5>Internal Notes</h5>\n        <textarea\n          v-model=\"selectedEmail.internal_notes\"\n          @blur=\"saveNotes(selectedEmail.id, selectedEmail.internal_notes)\"\n          placeholder=\"Add internal notes...\"\n        ></textarea>\n      </div>\n      <div class=\"email-actions\">\n        <button @click=\"archiveEmail(selectedEmail.id)\" class=\"action-btn\">Archive</button>\n        <button @click=\"replyToEmail(selectedEmail)\" class=\"action-btn primary\">Reply</button>\n      </div>\n    </div>\n\n    <div v-if=\"showCompose\" class=\"compose-modal\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h4>Compose Email</h4>\n          <button @click=\"closeCompose\" class=\"close-btn\">√ó</button>\n        </div>\n        <div class=\"compose-form\">\n          <div class=\"form-field\">\n            <label>To:</label>\n            <input v-model=\"composeData.to\" type=\"email\" placeholder=\"recipient@example.com\" />\n          </div>\n          <div class=\"form-field\">\n            <label>CC:</label>\n            <input v-model=\"composeData.cc\" type=\"email\" placeholder=\"cc@example.com (optional)\" />\n          </div>\n          <div class=\"form-field\">\n            <label>Subject:</label>\n            <input v-model=\"composeData.subject\" type=\"text\" placeholder=\"Email subject\" />\n          </div>\n          <div class=\"form-field\">\n            <label>Message:</label>\n            <textarea v-model=\"composeData.body\" rows=\"10\" placeholder=\"Email body...\"></textarea>\n          </div>\n          <div class=\"form-actions\">\n            <button @click=\"closeCompose\" class=\"cancel-btn\">Cancel</button>\n            <button @click=\"sendEmailMessage\" class=\"send-btn\">Send Email</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { getEmailThreads, sendEmail, archiveEmail: archiveEmailAction, updateEmailNotes } = useBillingWorkspace()\n\nconst emails = ref<any[]>([])\nconst selectedEmail = ref<any>(null)\nconst showCompose = ref(false)\nconst filterStatus = ref('')\nconst loading = ref(true)\n\nconst composeData = ref({\n  to: '',\n  cc: '',\n  subject: '',\n  body: ''\n})\n\nconst formatDate = (date: string) => {\n  return new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n}\n\nconst formatDateTime = (date: string) => {\n  return new Date(date).toLocaleString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit'\n  })\n}\n\nconst loadEmails = async () => {\n  loading.value = true\n  const filters: any = {}\n  if (filterStatus.value) {\n    filters.status = filterStatus.value\n  }\n  emails.value = await getEmailThreads(filters)\n  loading.value = false\n}\n\nconst selectEmail = (email: any) => {\n  selectedEmail.value = email\n}\n\nconst saveNotes = async (emailId: string, notes: string) => {\n  await updateEmailNotes(emailId, notes)\n}\n\nconst archiveEmail = async (emailId: string) => {\n  await archiveEmailAction(emailId)\n  selectedEmail.value = null\n  await loadEmails()\n}\n\nconst replyToEmail = (email: any) => {\n  composeData.value = {\n    to: email.from_address,\n    cc: '',\n    subject: `Re: ${email.subject}`,\n    body: ''\n  }\n  showCompose.value = true\n}\n\nconst sendEmailMessage = async () => {\n  const toAddresses = composeData.value.to.split(',').map(e => e.trim())\n  const ccAddresses = composeData.value.cc ? composeData.value.cc.split(',').map(e => e.trim()) : []\n\n  await sendEmail({\n    subject: composeData.value.subject,\n    toAddresses,\n    ccAddresses,\n    bodyText: composeData.value.body\n  })\n\n  closeCompose()\n  await loadEmails()\n}\n\nconst closeCompose = () => {\n  showCompose.value = false\n  composeData.value = {\n    to: '',\n    cc: '',\n    subject: '',\n    body: ''\n  }\n}\n\nwatch(filterStatus, () => {\n  loadEmails()\n})\n\nonMounted(() => {\n  loadEmails()\n})\n</script>\n\n<style scoped>\n.email-center {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 20px;\n  height: 600px;\n  display: flex;\n  flex-direction: column;\n}\n\n.email-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.email-header h3 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.compose-btn {\n  padding: 8px 16px;\n  background: #3b82f6;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.compose-btn:hover {\n  background: #2563eb;\n}\n\n.email-filters {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n\n.filter-btn {\n  padding: 6px 12px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 13px;\n  cursor: pointer;\n}\n\n.filter-btn.active {\n  background: #3b82f6;\n  color: white;\n  border-color: #3b82f6;\n}\n\n.loading,\n.empty-state {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #6b7280;\n  font-size: 14px;\n}\n\n.email-list {\n  flex: 1;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.email-item {\n  padding: 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.email-item:hover {\n  border-color: #3b82f6;\n  background: #f9fafb;\n}\n\n.email-item.selected {\n  border-color: #3b82f6;\n  background: #eff6ff;\n}\n\n.email-meta {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 12px;\n  color: #6b7280;\n  margin-bottom: 4px;\n}\n\n.email-direction {\n  font-weight: 600;\n}\n\n.email-direction.inbound {\n  color: #10b981;\n}\n\n.email-direction.outbound {\n  color: #3b82f6;\n}\n\n.email-from {\n  flex: 1;\n  font-weight: 500;\n  color: #111827;\n}\n\n.email-subject {\n  font-size: 14px;\n  font-weight: 500;\n  color: #111827;\n  margin-bottom: 4px;\n}\n\n.email-tags {\n  display: flex;\n  gap: 4px;\n}\n\n.tag {\n  padding: 2px 8px;\n  background: #dbeafe;\n  color: #1e40af;\n  border-radius: 12px;\n  font-size: 11px;\n}\n\n.email-viewer,\n.compose-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 20px;\n}\n\n.email-viewer {\n  background: white;\n  border-radius: 8px;\n  max-width: 800px;\n  max-height: 90vh;\n  overflow-y: auto;\n  width: 100%;\n  padding: 24px;\n}\n\n.viewer-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.viewer-header h4 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 28px;\n  cursor: pointer;\n  color: #6b7280;\n  padding: 0;\n  width: 28px;\n  height: 28px;\n}\n\n.email-details {\n  background: #f9fafb;\n  padding: 12px;\n  border-radius: 6px;\n  margin-bottom: 16px;\n}\n\n.detail-row {\n  display: flex;\n  gap: 8px;\n  font-size: 13px;\n  margin-bottom: 6px;\n}\n\n.detail-row .label {\n  font-weight: 600;\n  color: #6b7280;\n  min-width: 60px;\n}\n\n.email-body {\n  padding: 16px;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  margin-bottom: 16px;\n  line-height: 1.6;\n  white-space: pre-wrap;\n}\n\n.email-notes {\n  margin-bottom: 16px;\n}\n\n.email-notes h5 {\n  font-size: 14px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 8px 0;\n}\n\n.email-notes textarea {\n  width: 100%;\n  padding: 8px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 13px;\n  resize: vertical;\n}\n\n.email-actions {\n  display: flex;\n  gap: 8px;\n  justify-content: flex-end;\n}\n\n.action-btn {\n  padding: 8px 16px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.action-btn.primary {\n  background: #3b82f6;\n  color: white;\n  border-color: #3b82f6;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 8px;\n  max-width: 700px;\n  width: 100%;\n  max-height: 90vh;\n  overflow-y: auto;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.modal-header h4 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.compose-form {\n  padding: 20px;\n}\n\n.form-field {\n  margin-bottom: 16px;\n}\n\n.form-field label {\n  display: block;\n  font-size: 13px;\n  font-weight: 500;\n  color: #374151;\n  margin-bottom: 6px;\n}\n\n.form-field input,\n.form-field textarea {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n}\n\n.form-actions {\n  display: flex;\n  gap: 8px;\n  justify-content: flex-end;\n}\n\n.cancel-btn,\n.send-btn {\n  padding: 8px 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.cancel-btn {\n  background: white;\n}\n\n.send-btn {\n  background: #3b82f6;\n  color: white;\n  border-color: #3b82f6;\n}\n</style>\n","<template>\n  <div class=\"phone-assistant\">\n    <div class=\"assistant-header\">\n      <h3>AI Phone Assistant</h3>\n      <button @click=\"showInitiate = true\" class=\"initiate-btn\">New Call</button>\n    </div>\n\n    <div class=\"call-filters\">\n      <button\n        v-for=\"filter in ['all', 'requires_review', 'escalated']\"\n        :key=\"filter\"\n        @click=\"currentFilter = filter\"\n        :class=\"['filter-btn', { active: currentFilter === filter }]\"\n      >\n        {{ filter === 'all' ? 'All Calls' : filter === 'requires_review' ? 'Needs Review' : 'Escalated' }}\n      </button>\n    </div>\n\n    <div v-if=\"loading\" class=\"loading\">Loading calls...</div>\n\n    <div v-else-if=\"calls.length === 0\" class=\"empty-state\">\n      No calls found\n    </div>\n\n    <div v-else class=\"call-list\">\n      <div\n        v-for=\"call in calls\"\n        :key=\"call.id\"\n        class=\"call-item\"\n        @click=\"selectCall(call)\"\n        :class=\"{ escalated: call.escalation_required }\"\n      >\n        <div class=\"call-header\">\n          <span class=\"call-org\">{{ call.organization_name }}</span>\n          <span :class=\"['call-status', call.call_status]\">{{ call.call_status }}</span>\n        </div>\n        <div class=\"call-details\">\n          <span class=\"call-purpose\">{{ call.call_purpose }}</span>\n          <span class=\"call-phone\">{{ call.phone_number }}</span>\n          <span class=\"call-date\">{{ formatDate(call.created_at) }}</span>\n        </div>\n        <div v-if=\"call.escalation_required\" class=\"escalation-badge\">\n          ‚ö† Escalation Required\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"selectedCall\" class=\"call-viewer\">\n      <div class=\"viewer-header\">\n        <h4>{{ selectedCall.organization_name }}</h4>\n        <button @click=\"selectedCall = null\" class=\"close-btn\">√ó</button>\n      </div>\n      <div class=\"call-info\">\n        <div class=\"info-row\">\n          <span class=\"label\">Purpose:</span>\n          <span>{{ selectedCall.call_purpose }}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"label\">Status:</span>\n          <span>{{ selectedCall.call_status }}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"label\">Duration:</span>\n          <span>{{ selectedCall.duration_seconds }}s</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"label\">Started:</span>\n          <span>{{ formatDateTime(selectedCall.started_at) }}</span>\n        </div>\n      </div>\n      <div v-if=\"selectedCall.summary\" class=\"call-summary\">\n        <h5>Summary</h5>\n        <p>{{ selectedCall.summary }}</p>\n      </div>\n      <div v-if=\"selectedCall.outcome\" class=\"call-outcome\">\n        <h5>Outcome</h5>\n        <p>{{ selectedCall.outcome }}</p>\n      </div>\n      <div v-if=\"selectedCall.transcript\" class=\"call-transcript\">\n        <h5>Transcript</h5>\n        <pre>{{ selectedCall.transcript }}</pre>\n      </div>\n      <div v-if=\"selectedCall.escalation_required\" class=\"escalation-section\">\n        <h5>Escalation Required</h5>\n        <p>{{ selectedCall.escalation_reason }}</p>\n      </div>\n      <div class=\"call-actions\">\n        <button v-if=\"!selectedCall.founder_reviewed\" @click=\"markReviewed(selectedCall.id)\" class=\"action-btn primary\">\n          Mark as Reviewed\n        </button>\n        <button v-if=\"selectedCall.recording_url\" class=\"action-btn\">Listen to Recording</button>\n      </div>\n    </div>\n\n    <div v-if=\"showInitiate\" class=\"initiate-modal\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h4>Initiate AI Call</h4>\n          <button @click=\"closeInitiate\" class=\"close-btn\">√ó</button>\n        </div>\n        <div class=\"initiate-form\">\n          <div class=\"form-field\">\n            <label>Organization Name:</label>\n            <input v-model=\"callData.organizationName\" type=\"text\" placeholder=\"Insurance Company Name\" />\n          </div>\n          <div class=\"form-field\">\n            <label>Phone Number:</label>\n            <input v-model=\"callData.phoneNumber\" type=\"tel\" placeholder=\"(555) 123-4567\" />\n          </div>\n          <div class=\"form-field\">\n            <label>Purpose:</label>\n            <select v-model=\"callData.purpose\">\n              <option value=\"eligibility\">Eligibility Verification</option>\n              <option value=\"claim_status\">Claim Status</option>\n              <option value=\"follow_up\">Follow Up</option>\n              <option value=\"escalation\">Escalation</option>\n              <option value=\"other\">Other</option>\n            </select>\n          </div>\n          <div class=\"form-actions\">\n            <button @click=\"closeInitiate\" class=\"cancel-btn\">Cancel</button>\n            <button @click=\"initiateCall\" class=\"initiate-btn-submit\">Initiate Call</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { getAICalls, initiateAICall, markCallReviewed } = useBillingWorkspace()\n\nconst calls = ref<any[]>([])\nconst selectedCall = ref<any>(null)\nconst showInitiate = ref(false)\nconst currentFilter = ref('all')\nconst loading = ref(true)\n\nconst callData = ref({\n  organizationName: '',\n  phoneNumber: '',\n  purpose: 'eligibility'\n})\n\nconst formatDate = (date: string) => {\n  return new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n}\n\nconst formatDateTime = (date: string) => {\n  return new Date(date).toLocaleString('en-US')\n}\n\nconst loadCalls = async () => {\n  loading.value = true\n  const filters: any = {}\n  if (currentFilter.value === 'requires_review') {\n    filters.status = 'requires_review'\n  } else if (currentFilter.value === 'escalated') {\n    filters.escalationRequired = true\n  }\n  calls.value = await getAICalls(filters)\n  loading.value = false\n}\n\nconst selectCall = (call: any) => {\n  selectedCall.value = call\n}\n\nconst markReviewed = async (callId: string) => {\n  await markCallReviewed(callId)\n  selectedCall.value = null\n  await loadCalls()\n}\n\nconst initiateCall = async () => {\n  await initiateAICall({\n    phoneNumber: callData.value.phoneNumber,\n    purpose: callData.value.purpose as any,\n    organizationName: callData.value.organizationName\n  })\n  closeInitiate()\n  await loadCalls()\n}\n\nconst closeInitiate = () => {\n  showInitiate.value = false\n  callData.value = {\n    organizationName: '',\n    phoneNumber: '',\n    purpose: 'eligibility'\n  }\n}\n\nwatch(currentFilter, () => {\n  loadCalls()\n})\n\nonMounted(() => {\n  loadCalls()\n})\n</script>\n\n<style scoped>\n.phone-assistant {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 20px;\n  height: 600px;\n  display: flex;\n  flex-direction: column;\n}\n\n.assistant-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.assistant-header h3 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.initiate-btn {\n  padding: 8px 16px;\n  background: #10b981;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.call-filters {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n\n.filter-btn {\n  padding: 6px 12px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 13px;\n  cursor: pointer;\n}\n\n.filter-btn.active {\n  background: #10b981;\n  color: white;\n  border-color: #10b981;\n}\n\n.loading,\n.empty-state {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #6b7280;\n  font-size: 14px;\n}\n\n.call-list {\n  flex: 1;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.call-item {\n  padding: 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.call-item:hover {\n  border-color: #10b981;\n  background: #f9fafb;\n}\n\n.call-item.escalated {\n  border-color: #f59e0b;\n  background: #fffbeb;\n}\n\n.call-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.call-org {\n  font-size: 14px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.call-status {\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 500;\n}\n\n.call-status.completed {\n  background: #d1fae5;\n  color: #065f46;\n}\n\n.call-status.requires_review {\n  background: #fef3c7;\n  color: #92400e;\n}\n\n.call-details {\n  display: flex;\n  gap: 12px;\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.escalation-badge {\n  margin-top: 8px;\n  padding: 4px 8px;\n  background: #fed7aa;\n  color: #9a3412;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n.call-viewer,\n.initiate-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 20px;\n}\n\n.call-viewer {\n  overflow-y: auto;\n}\n\n.call-viewer > div:first-child {\n  background: white;\n  border-radius: 8px;\n  max-width: 800px;\n  width: 100%;\n  padding: 24px;\n}\n\n.viewer-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.viewer-header h4 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 28px;\n  cursor: pointer;\n  color: #6b7280;\n  padding: 0;\n}\n\n.call-info,\n.call-summary,\n.call-outcome,\n.call-transcript,\n.escalation-section {\n  margin-bottom: 16px;\n}\n\n.call-info {\n  background: #f9fafb;\n  padding: 12px;\n  border-radius: 6px;\n}\n\n.info-row {\n  display: flex;\n  gap: 8px;\n  font-size: 13px;\n  margin-bottom: 6px;\n}\n\n.info-row .label {\n  font-weight: 600;\n  color: #6b7280;\n  min-width: 80px;\n}\n\nh5 {\n  font-size: 14px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 8px 0;\n}\n\n.call-transcript pre {\n  background: #f9fafb;\n  padding: 12px;\n  border-radius: 6px;\n  white-space: pre-wrap;\n  font-size: 13px;\n  line-height: 1.6;\n}\n\n.escalation-section {\n  background: #fffbeb;\n  border: 1px solid #fde68a;\n  padding: 12px;\n  border-radius: 6px;\n}\n\n.call-actions {\n  display: flex;\n  gap: 8px;\n  justify-content: flex-end;\n}\n\n.action-btn {\n  padding: 8px 16px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.action-btn.primary {\n  background: #10b981;\n  color: white;\n  border-color: #10b981;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 8px;\n  max-width: 500px;\n  width: 100%;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.modal-header h4 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.initiate-form {\n  padding: 20px;\n}\n\n.form-field {\n  margin-bottom: 16px;\n}\n\n.form-field label {\n  display: block;\n  font-size: 13px;\n  font-weight: 500;\n  color: #374151;\n  margin-bottom: 6px;\n}\n\n.form-field input,\n.form-field select {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n}\n\n.form-actions {\n  display: flex;\n  gap: 8px;\n  justify-content: flex-end;\n}\n\n.cancel-btn,\n.initiate-btn-submit {\n  padding: 8px 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.cancel-btn {\n  background: white;\n}\n\n.initiate-btn-submit {\n  background: #10b981;\n  color: white;\n  border-color: #10b981;\n}\n</style>\n","<template>\n  <div class=\"fax-center\">\n    <div class=\"fax-header\">\n      <h3>Billing Fax</h3>\n      <button @click=\"showSend = true\" class=\"send-btn\">Send Fax</button>\n    </div>\n\n    <div v-if=\"loading\" class=\"loading\">Loading faxes...</div>\n\n    <div v-else-if=\"faxes.length === 0\" class=\"empty-state\">\n      No faxes found\n    </div>\n\n    <div v-else class=\"fax-list\">\n      <div\n        v-for=\"fax in faxes\"\n        :key=\"fax.id\"\n        class=\"fax-item\"\n        @click=\"selectFax(fax)\"\n      >\n        <div class=\"fax-header-item\">\n          <span class=\"fax-direction\" :class=\"fax.direction\">\n            {{ fax.direction === 'inbound' ? 'üì•' : 'üì§' }}\n          </span>\n          <span class=\"fax-number\">{{ fax.fax_number }}</span>\n          <span :class=\"['fax-status', fax.status]\">{{ fax.status }}</span>\n        </div>\n        <div class=\"fax-details\">\n          <span class=\"fax-purpose\">{{ fax.purpose || 'General' }}</span>\n          <span class=\"fax-pages\">{{ fax.page_count }} {{ fax.page_count === 1 ? 'page' : 'pages' }}</span>\n          <span class=\"fax-date\">{{ formatDate(fax.created_at) }}</span>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"selectedFax\" class=\"fax-viewer\">\n      <div class=\"viewer-content\">\n        <div class=\"viewer-header\">\n          <h4>Fax Details</h4>\n          <button @click=\"selectedFax = null\" class=\"close-btn\">√ó</button>\n        </div>\n        <div class=\"fax-info\">\n          <div class=\"info-row\">\n            <span class=\"label\">Number:</span>\n            <span>{{ selectedFax.fax_number }}</span>\n          </div>\n          <div class=\"info-row\">\n            <span class=\"label\">Direction:</span>\n            <span>{{ selectedFax.direction }}</span>\n          </div>\n          <div class=\"info-row\">\n            <span class=\"label\">Status:</span>\n            <span>{{ selectedFax.status }}</span>\n          </div>\n          <div class=\"info-row\">\n            <span class=\"label\">Pages:</span>\n            <span>{{ selectedFax.page_count }}</span>\n          </div>\n          <div class=\"info-row\">\n            <span class=\"label\">Purpose:</span>\n            <span>{{ selectedFax.purpose || 'General' }}</span>\n          </div>\n          <div class=\"info-row\">\n            <span class=\"label\">Date:</span>\n            <span>{{ formatDateTime(selectedFax.created_at) }}</span>\n          </div>\n        </div>\n        <div v-if=\"selectedFax.ocr_text\" class=\"fax-ocr\">\n          <h5>Extracted Text (OCR)</h5>\n          <pre>{{ selectedFax.ocr_text }}</pre>\n        </div>\n        <div class=\"fax-actions\">\n          <button v-if=\"selectedFax.pdf_url\" class=\"action-btn\">View PDF</button>\n          <button v-if=\"selectedFax.fax_image_url\" class=\"action-btn\">View Original</button>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"showSend\" class=\"send-modal\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h4>Send Fax</h4>\n          <button @click=\"closeSend\" class=\"close-btn\">√ó</button>\n        </div>\n        <div class=\"send-form\">\n          <div class=\"form-field\">\n            <label>Fax Number:</label>\n            <input v-model=\"faxData.faxNumber\" type=\"tel\" placeholder=\"+1 (555) 123-4567\" />\n          </div>\n          <div class=\"form-field\">\n            <label>Purpose:</label>\n            <select v-model=\"faxData.purpose\">\n              <option value=\"eob\">EOB</option>\n              <option value=\"prior_auth\">Prior Authorization</option>\n              <option value=\"claim_submission\">Claim Submission</option>\n              <option value=\"payer_correspondence\">Payer Correspondence</option>\n              <option value=\"other\">Other</option>\n            </select>\n          </div>\n          <div class=\"form-field\">\n            <label>PDF Document:</label>\n            <input type=\"file\" accept=\".pdf\" @change=\"handleFileSelect\" />\n          </div>\n          <div class=\"form-actions\">\n            <button @click=\"closeSend\" class=\"cancel-btn\">Cancel</button>\n            <button @click=\"sendFaxMessage\" class=\"send-btn-submit\">Send Fax</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { getFaxes, sendFax } = useBillingWorkspace()\n\nconst faxes = ref<any[]>([])\nconst selectedFax = ref<any>(null)\nconst showSend = ref(false)\nconst loading = ref(true)\n\nconst faxData = ref({\n  faxNumber: '',\n  purpose: 'claim_submission',\n  pdfFile: null as File | null\n})\n\nconst formatDate = (date: string) => {\n  return new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n}\n\nconst formatDateTime = (date: string) => {\n  return new Date(date).toLocaleString('en-US')\n}\n\nconst loadFaxes = async () => {\n  loading.value = true\n  faxes.value = await getFaxes()\n  loading.value = false\n}\n\nconst selectFax = (fax: any) => {\n  selectedFax.value = fax\n}\n\nconst handleFileSelect = (event: Event) => {\n  const target = event.target as HTMLInputElement\n  if (target.files && target.files.length > 0) {\n    faxData.value.pdfFile = target.files[0]\n  }\n}\n\nconst sendFaxMessage = async () => {\n  if (!faxData.value.pdfFile) {\n    alert('Please select a PDF file')\n    return\n  }\n\n  await sendFax({\n    faxNumber: faxData.value.faxNumber,\n    pdfUrl: 'uploaded-pdf-url',\n    purpose: faxData.value.purpose\n  })\n\n  closeSend()\n  await loadFaxes()\n}\n\nconst closeSend = () => {\n  showSend.value = false\n  faxData.value = {\n    faxNumber: '',\n    purpose: 'claim_submission',\n    pdfFile: null\n  }\n}\n\nonMounted(() => {\n  loadFaxes()\n})\n</script>\n\n<style scoped>\n.fax-center {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 20px;\n  height: 600px;\n  display: flex;\n  flex-direction: column;\n}\n\n.fax-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.fax-header h3 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.send-btn {\n  padding: 8px 16px;\n  background: #8b5cf6;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.loading,\n.empty-state {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #6b7280;\n  font-size: 14px;\n}\n\n.fax-list {\n  flex: 1;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.fax-item {\n  padding: 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.fax-item:hover {\n  border-color: #8b5cf6;\n  background: #f9fafb;\n}\n\n.fax-header-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n}\n\n.fax-direction {\n  font-size: 18px;\n}\n\n.fax-number {\n  flex: 1;\n  font-size: 14px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.fax-status {\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 500;\n}\n\n.fax-status.sent {\n  background: #d1fae5;\n  color: #065f46;\n}\n\n.fax-status.sending {\n  background: #dbeafe;\n  color: #1e40af;\n}\n\n.fax-details {\n  display: flex;\n  gap: 12px;\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.fax-viewer,\n.send-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 20px;\n}\n\n.viewer-content {\n  background: white;\n  border-radius: 8px;\n  max-width: 700px;\n  width: 100%;\n  padding: 24px;\n  max-height: 90vh;\n  overflow-y: auto;\n}\n\n.viewer-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.viewer-header h4 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 28px;\n  cursor: pointer;\n  color: #6b7280;\n  padding: 0;\n}\n\n.fax-info {\n  background: #f9fafb;\n  padding: 12px;\n  border-radius: 6px;\n  margin-bottom: 16px;\n}\n\n.info-row {\n  display: flex;\n  gap: 8px;\n  font-size: 13px;\n  margin-bottom: 6px;\n}\n\n.info-row .label {\n  font-weight: 600;\n  color: #6b7280;\n  min-width: 80px;\n}\n\n.fax-ocr {\n  margin-bottom: 16px;\n}\n\n.fax-ocr h5 {\n  font-size: 14px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 8px 0;\n}\n\n.fax-ocr pre {\n  background: #f9fafb;\n  padding: 12px;\n  border-radius: 6px;\n  white-space: pre-wrap;\n  font-size: 13px;\n  line-height: 1.6;\n}\n\n.fax-actions {\n  display: flex;\n  gap: 8px;\n  justify-content: flex-end;\n}\n\n.action-btn {\n  padding: 8px 16px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 8px;\n  max-width: 500px;\n  width: 100%;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.modal-header h4 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.send-form {\n  padding: 20px;\n}\n\n.form-field {\n  margin-bottom: 16px;\n}\n\n.form-field label {\n  display: block;\n  font-size: 13px;\n  font-weight: 500;\n  color: #374151;\n  margin-bottom: 6px;\n}\n\n.form-field input,\n.form-field select {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n}\n\n.form-actions {\n  display: flex;\n  gap: 8px;\n  justify-content: flex-end;\n}\n\n.cancel-btn,\n.send-btn-submit {\n  padding: 8px 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.cancel-btn {\n  background: white;\n}\n\n.send-btn-submit {\n  background: #8b5cf6;\n  color: white;\n  border-color: #8b5cf6;\n}\n</style>\n","<template>\n  <div class=\"document-workspace\">\n    <div class=\"workspace-header\">\n      <h3>Document Workspace</h3>\n      <button @click=\"showCreate = true\" class=\"create-btn\">New Document</button>\n    </div>\n\n    <div class=\"document-filters\">\n      <button\n        v-for=\"type in ['all', 'word', 'excel', 'powerpoint', 'pdf']\"\n        :key=\"type\"\n        @click=\"filterType = type === 'all' ? '' : type\"\n        :class=\"['filter-btn', { active: filterType === (type === 'all' ? '' : type) }]\"\n      >\n        {{ type.charAt(0).toUpperCase() + type.slice(1) }}\n      </button>\n    </div>\n\n    <div v-if=\"loading\" class=\"loading\">Loading documents...</div>\n\n    <div v-else-if=\"documents.length === 0\" class=\"empty-state\">\n      No documents found\n    </div>\n\n    <div v-else class=\"document-grid\">\n      <div\n        v-for=\"doc in documents\"\n        :key=\"doc.id\"\n        class=\"document-card\"\n        @click=\"selectDocument(doc)\"\n      >\n        <div class=\"doc-icon\">\n          {{ getDocIcon(doc.document_type) }}\n        </div>\n        <div class=\"doc-info\">\n          <div class=\"doc-name\">{{ doc.document_name }}</div>\n          <div class=\"doc-meta\">\n            <span class=\"doc-type\">{{ doc.document_type }}</span>\n            <span class=\"doc-version\">v{{ doc.current_version }}</span>\n            <span v-if=\"doc.is_finalized\" class=\"doc-finalized\">üîí Finalized</span>\n          </div>\n          <div class=\"doc-date\">Updated {{ formatDate(doc.updated_at) }}</div>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"selectedDocument\" class=\"document-viewer\">\n      <div class=\"viewer-content\">\n        <div class=\"viewer-header\">\n          <h4>{{ selectedDocument.document_name }}</h4>\n          <button @click=\"selectedDocument = null\" class=\"close-btn\">√ó</button>\n        </div>\n        <div class=\"doc-details\">\n          <div class=\"detail-row\">\n            <span class=\"label\">Type:</span>\n            <span>{{ selectedDocument.document_type }}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"label\">Version:</span>\n            <span>{{ selectedDocument.current_version }}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"label\">Status:</span>\n            <span>{{ selectedDocument.is_finalized ? 'Finalized (Immutable)' : 'Draft (Editable)' }}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"label\">Created:</span>\n            <span>{{ formatDateTime(selectedDocument.created_at) }}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"label\">Updated:</span>\n            <span>{{ formatDateTime(selectedDocument.updated_at) }}</span>\n          </div>\n        </div>\n        <div class=\"doc-editor\">\n          <div class=\"editor-placeholder\">\n            <p>Document editor interface</p>\n            <p class=\"editor-note\">Cloud-based editing with automatic version control</p>\n          </div>\n        </div>\n        <div class=\"doc-actions\">\n          <button @click=\"viewVersions(selectedDocument.id)\" class=\"action-btn\">View Versions</button>\n          <button v-if=\"!selectedDocument.is_finalized\" @click=\"finalizeDoc(selectedDocument.id)\" class=\"action-btn\">\n            Finalize Document\n          </button>\n          <button v-if=\"!selectedDocument.is_finalized\" class=\"action-btn primary\">Save Changes</button>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"showCreate\" class=\"create-modal\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h4>Create New Document</h4>\n          <button @click=\"closeCreate\" class=\"close-btn\">√ó</button>\n        </div>\n        <div class=\"create-form\">\n          <div class=\"form-field\">\n            <label>Document Name:</label>\n            <input v-model=\"createData.documentName\" type=\"text\" placeholder=\"My Document\" />\n          </div>\n          <div class=\"form-field\">\n            <label>Document Type:</label>\n            <select v-model=\"createData.documentType\">\n              <option value=\"word\">Word Document</option>\n              <option value=\"excel\">Spreadsheet</option>\n              <option value=\"powerpoint\">Presentation</option>\n              <option value=\"pdf\">PDF</option>\n              <option value=\"text\">Text Document</option>\n            </select>\n          </div>\n          <div class=\"form-field\">\n            <label>Organization:</label>\n            <select v-model=\"createData.organizationType\">\n              <option value=\"general\">General</option>\n              <option value=\"agency\">Agency</option>\n              <option value=\"claim\">Claim</option>\n              <option value=\"billing_period\">Billing Period</option>\n            </select>\n          </div>\n          <div class=\"form-actions\">\n            <button @click=\"closeCreate\" class=\"cancel-btn\">Cancel</button>\n            <button @click=\"createDoc\" class=\"create-btn-submit\">Create Document</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { getDocuments, createDocument, finalizeDocument } = useBillingWorkspace()\n\nconst documents = ref<any[]>([])\nconst selectedDocument = ref<any>(null)\nconst showCreate = ref(false)\nconst filterType = ref('')\nconst loading = ref(true)\n\nconst createData = ref({\n  documentName: '',\n  documentType: 'word',\n  organizationType: 'general'\n})\n\nconst getDocIcon = (type: string) => {\n  const icons: Record<string, string> = {\n    word: 'üìù',\n    excel: 'üìä',\n    powerpoint: 'üìΩÔ∏è',\n    pdf: 'üìÑ',\n    text: 'üìÉ'\n  }\n  return icons[type] || 'üìÑ'\n}\n\nconst formatDate = (date: string) => {\n  return new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n}\n\nconst formatDateTime = (date: string) => {\n  return new Date(date).toLocaleString('en-US')\n}\n\nconst loadDocuments = async () => {\n  loading.value = true\n  const filters: any = {}\n  if (filterType.value) {\n    filters.documentType = filterType.value\n  }\n  documents.value = await getDocuments(filters)\n  loading.value = false\n}\n\nconst selectDocument = (doc: any) => {\n  selectedDocument.value = doc\n}\n\nconst finalizeDoc = async (docId: string) => {\n  await finalizeDocument(docId)\n  selectedDocument.value = null\n  await loadDocuments()\n}\n\nconst viewVersions = (docId: string) => {\n  console.log('View versions for:', docId)\n}\n\nconst createDoc = async () => {\n  await createDocument({\n    documentName: createData.value.documentName,\n    documentType: createData.value.documentType as any,\n    mimeType: 'application/octet-stream',\n    storagePath: `/documents/${Date.now()}`,\n    organizationType: createData.value.organizationType\n  })\n  closeCreate()\n  await loadDocuments()\n}\n\nconst closeCreate = () => {\n  showCreate.value = false\n  createData.value = {\n    documentName: '',\n    documentType: 'word',\n    organizationType: 'general'\n  }\n}\n\nwatch(filterType, () => {\n  loadDocuments()\n})\n\nonMounted(() => {\n  loadDocuments()\n})\n</script>\n\n<style scoped>\n.document-workspace {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 20px;\n  min-height: 600px;\n}\n\n.workspace-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.workspace-header h3 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.create-btn {\n  padding: 8px 16px;\n  background: #f59e0b;\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.document-filters {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 16px;\n}\n\n.filter-btn {\n  padding: 6px 12px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 13px;\n  cursor: pointer;\n}\n\n.filter-btn.active {\n  background: #f59e0b;\n  color: white;\n  border-color: #f59e0b;\n}\n\n.loading,\n.empty-state {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 60px;\n  color: #6b7280;\n  font-size: 14px;\n}\n\n.document-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 16px;\n}\n\n.document-card {\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 16px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.document-card:hover {\n  border-color: #f59e0b;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.doc-icon {\n  font-size: 48px;\n  text-align: center;\n  margin-bottom: 12px;\n}\n\n.doc-info {\n  text-align: center;\n}\n\n.doc-name {\n  font-size: 14px;\n  font-weight: 600;\n  color: #111827;\n  margin-bottom: 8px;\n}\n\n.doc-meta {\n  display: flex;\n  justify-content: center;\n  gap: 8px;\n  font-size: 11px;\n  margin-bottom: 4px;\n}\n\n.doc-type {\n  padding: 2px 6px;\n  background: #f3f4f6;\n  color: #374151;\n  border-radius: 4px;\n}\n\n.doc-version {\n  padding: 2px 6px;\n  background: #dbeafe;\n  color: #1e40af;\n  border-radius: 4px;\n}\n\n.doc-finalized {\n  padding: 2px 6px;\n  background: #fee2e2;\n  color: #991b1b;\n  border-radius: 4px;\n}\n\n.doc-date {\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.document-viewer,\n.create-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 20px;\n}\n\n.viewer-content {\n  background: white;\n  border-radius: 8px;\n  max-width: 900px;\n  width: 100%;\n  max-height: 90vh;\n  overflow-y: auto;\n  padding: 24px;\n}\n\n.viewer-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.viewer-header h4 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 28px;\n  cursor: pointer;\n  color: #6b7280;\n  padding: 0;\n}\n\n.doc-details {\n  background: #f9fafb;\n  padding: 12px;\n  border-radius: 6px;\n  margin-bottom: 16px;\n}\n\n.detail-row {\n  display: flex;\n  gap: 8px;\n  font-size: 13px;\n  margin-bottom: 6px;\n}\n\n.detail-row .label {\n  font-weight: 600;\n  color: #6b7280;\n  min-width: 80px;\n}\n\n.doc-editor {\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  min-height: 400px;\n  margin-bottom: 16px;\n}\n\n.editor-placeholder {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 400px;\n  color: #6b7280;\n}\n\n.editor-placeholder p {\n  margin: 0 0 8px 0;\n  font-size: 16px;\n  font-weight: 500;\n}\n\n.editor-note {\n  font-size: 13px;\n}\n\n.doc-actions {\n  display: flex;\n  gap: 8px;\n  justify-content: flex-end;\n}\n\n.action-btn {\n  padding: 8px 16px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.action-btn.primary {\n  background: #f59e0b;\n  color: white;\n  border-color: #f59e0b;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 8px;\n  max-width: 500px;\n  width: 100%;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.modal-header h4 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.create-form {\n  padding: 20px;\n}\n\n.form-field {\n  margin-bottom: 16px;\n}\n\n.form-field label {\n  display: block;\n  font-size: 13px;\n  font-weight: 500;\n  color: #374151;\n  margin-bottom: 6px;\n}\n\n.form-field input,\n.form-field select {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n}\n\n.form-actions {\n  display: flex;\n  gap: 8px;\n  justify-content: flex-end;\n}\n\n.cancel-btn,\n.create-btn-submit {\n  padding: 8px 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n  cursor: pointer;\n}\n\n.cancel-btn {\n  background: white;\n}\n\n.create-btn-submit {\n  background: #f59e0b;\n  color: white;\n  border-color: #f59e0b;\n}\n</style>\n","export const useQueues = () => {\n  const supabase = useSupabaseClient()\n\n  const getCallsQueue = async (state?: string) => {\n    let query = supabase\n      .from('queue_calls')\n      .select('*')\n      .order('priority', { ascending: false })\n      .order('entered_queue_at', { ascending: true })\n\n    if (state) {\n      query = query.eq('queue_state', state)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  const addToCallsQueue = async (callData: {\n    callId: string\n    callDirection: string\n    callStatus: string\n    callerIdentity?: string\n    handledBy?: string\n    priority?: number\n  }) => {\n    const { data, error } = await supabase\n      .from('queue_calls')\n      .insert({\n        call_id: callData.callId,\n        queue_state: 'active',\n        call_direction: callData.callDirection,\n        call_status: callData.callStatus,\n        caller_identity: callData.callerIdentity,\n        handled_by: callData.handledBy,\n        priority: callData.priority || 50\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const updateCallsQueueItem = async (queueId: string, updates: any) => {\n    const { error } = await supabase\n      .from('queue_calls')\n      .update(updates)\n      .eq('id', queueId)\n\n    if (error) throw error\n  }\n\n  const completeCallsQueueItem = async (queueId: string) => {\n    const { error } = await supabase\n      .from('queue_calls')\n      .update({\n        queue_state: 'completed',\n        completed_at: new Date().toISOString()\n      })\n      .eq('id', queueId)\n\n    if (error) throw error\n  }\n\n  const getVoicemailsQueue = async (state?: string) => {\n    let query = supabase\n      .from('queue_voicemails')\n      .select(`\n        *,\n        voicemail_records (*)\n      `)\n      .order('priority', { ascending: false })\n      .order('entered_queue_at', { ascending: true })\n\n    if (state) {\n      query = query.eq('queue_state', state)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  const addToVoicemailsQueue = async (voicemailData: {\n    voicemailId: string\n    callerIdentity?: string\n    suggestedAction?: string\n    priority?: number\n  }) => {\n    const { data, error } = await supabase\n      .from('queue_voicemails')\n      .insert({\n        voicemail_id: voicemailData.voicemailId,\n        queue_state: 'new',\n        caller_identity: voicemailData.callerIdentity,\n        suggested_action: voicemailData.suggestedAction,\n        priority: voicemailData.priority || 50\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const updateVoicemailsQueueItem = async (queueId: string, state: string) => {\n    const updateData: any = { queue_state: state }\n\n    if (state === 'resolved') {\n      updateData.resolved_at = new Date().toISOString()\n    }\n\n    const { error } = await supabase\n      .from('queue_voicemails')\n      .update(updateData)\n      .eq('id', queueId)\n\n    if (error) throw error\n  }\n\n  const getDocumentsQueue = async (state?: string, blockingOnly?: boolean) => {\n    let query = supabase\n      .from('queue_documents')\n      .select(`\n        *,\n        workspace_documents (*)\n      `)\n      .order('priority', { ascending: false })\n      .order('entered_queue_at', { ascending: true })\n\n    if (state) {\n      query = query.eq('queue_state', state)\n    }\n\n    if (blockingOnly) {\n      query = query.eq('blocking_workflow', true)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  const addToDocumentsQueue = async (documentData: {\n    documentId: string\n    documentPurpose?: string\n    blockingWorkflow?: boolean\n    workflowReference?: string\n    requiredBy?: string\n    priority?: number\n  }) => {\n    const { data, error } = await supabase\n      .from('queue_documents')\n      .insert({\n        document_id: documentData.documentId,\n        queue_state: 'draft',\n        document_purpose: documentData.documentPurpose,\n        blocking_workflow: documentData.blockingWorkflow || false,\n        workflow_reference: documentData.workflowReference,\n        required_by: documentData.requiredBy,\n        priority: documentData.priority || 50\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const updateDocumentsQueueItem = async (queueId: string, state: string) => {\n    const updateData: any = { queue_state: state }\n\n    if (state === 'ready_to_finalize') {\n      updateData.completed_at = new Date().toISOString()\n    }\n\n    const { error } = await supabase\n      .from('queue_documents')\n      .update(updateData)\n      .eq('id', queueId)\n\n    if (error) throw error\n  }\n\n  const getBillingQueue = async (state?: string) => {\n    let query = supabase\n      .from('queue_billing')\n      .select('*')\n      .order('priority', { ascending: false })\n      .order('entered_queue_at', { ascending: true })\n\n    if (state) {\n      query = query.eq('queue_state', state)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  const addToBillingQueue = async (billingData: {\n    billingReference: string\n    billingType: string\n    encounterId?: string\n    claimId?: string\n    agencyId?: string\n    billingStage?: string\n    nextAction: string\n    actionDeadline?: string\n    priority?: number\n    metadata?: any\n  }) => {\n    const { data, error } = await supabase\n      .from('queue_billing')\n      .insert({\n        billing_reference: billingData.billingReference,\n        billing_type: billingData.billingType,\n        queue_state: 'ready',\n        encounter_id: billingData.encounterId,\n        claim_id: billingData.claimId,\n        agency_id: billingData.agencyId,\n        billing_stage: billingData.billingStage,\n        next_action: billingData.nextAction,\n        action_deadline: billingData.actionDeadline,\n        priority: billingData.priority || 50,\n        metadata: billingData.metadata || {}\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const updateBillingQueueItem = async (queueId: string, state: string, metadata?: any) => {\n    const updateData: any = { queue_state: state }\n\n    if (state === 'resolved') {\n      updateData.resolved_at = new Date().toISOString()\n    }\n\n    if (metadata) {\n      updateData.metadata = metadata\n    }\n\n    const { error } = await supabase\n      .from('queue_billing')\n      .update(updateData)\n      .eq('id', queueId)\n\n    if (error) throw error\n  }\n\n  const getQueueCounts = async () => {\n    const [calls, voicemails, documents, billing] = await Promise.all([\n      getCallsQueue('active'),\n      getVoicemailsQueue('new'),\n      getDocumentsQueue(undefined, true),\n      getBillingQueue('action_required')\n    ])\n\n    return {\n      activeCalls: calls.length,\n      newVoicemails: voicemails.length,\n      blockingDocuments: documents.length,\n      actionRequiredBilling: billing.length\n    }\n  }\n\n  return {\n    getCallsQueue,\n    addToCallsQueue,\n    updateCallsQueueItem,\n    completeCallsQueueItem,\n    getVoicemailsQueue,\n    addToVoicemailsQueue,\n    updateVoicemailsQueueItem,\n    getDocumentsQueue,\n    addToDocumentsQueue,\n    updateDocumentsQueueItem,\n    getBillingQueue,\n    addToBillingQueue,\n    updateBillingQueueItem,\n    getQueueCounts\n  }\n}\n","<template>\n  <div class=\"queue-management\">\n    <div class=\"queue-tabs\">\n      <button\n        v-for=\"queue in queues\"\n        :key=\"queue.id\"\n        @click=\"activeQueue = queue.id\"\n        :class=\"['queue-tab', { active: activeQueue === queue.id }]\"\n      >\n        <span class=\"queue-icon\">{{ queue.icon }}</span>\n        <span class=\"queue-name\">{{ queue.name }}</span>\n        <span v-if=\"queue.count > 0\" class=\"queue-badge\">{{ queue.count }}</span>\n      </button>\n    </div>\n\n    <div class=\"queue-content\">\n      <div v-if=\"activeQueue === 'calls'\" class=\"queue-section\">\n        <h3>Calls Queue</h3>\n        <p class=\"queue-description\">Real-time and historical call control</p>\n        <div v-if=\"callsQueue.length === 0\" class=\"empty-state\">No active calls</div>\n        <div v-else class=\"queue-list\">\n          <div v-for=\"item in callsQueue\" :key=\"item.id\" class=\"queue-item\">\n            <div class=\"item-header\">\n              <span class=\"item-direction\">{{ item.call_direction === 'inbound' ? 'üìû Inbound' : 'üì± Outbound' }}</span>\n              <span :class=\"['item-state', item.queue_state]\">{{ item.queue_state }}</span>\n            </div>\n            <div class=\"item-details\">\n              <p class=\"item-title\">{{ item.caller_identity || 'Unknown Caller' }}</p>\n              <p class=\"item-meta\">{{ item.call_status }} ‚Ä¢ Handled by {{ item.handled_by }}</p>\n            </div>\n            <div class=\"item-actions\">\n              <button v-if=\"item.queue_state === 'active'\" @click=\"completeCall(item.id)\" class=\"complete-btn\">\n                Complete\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"activeQueue === 'voicemails'\" class=\"queue-section\">\n        <h3>Voicemails Queue</h3>\n        <p class=\"queue-description\">Unattended call triage</p>\n        <div v-if=\"voicemailsQueue.length === 0\" class=\"empty-state\">No voicemails</div>\n        <div v-else class=\"queue-list\">\n          <div v-for=\"item in voicemailsQueue\" :key=\"item.id\" class=\"queue-item\">\n            <div class=\"item-header\">\n              <span class=\"item-icon\">üì®</span>\n              <span :class=\"['item-state', item.queue_state]\">{{ item.queue_state }}</span>\n            </div>\n            <div class=\"item-details\">\n              <p class=\"item-title\">{{ item.caller_identity || item.voicemail_records?.caller_number }}</p>\n              <p class=\"item-meta\">{{ item.voicemail_records?.duration_seconds }}s ‚Ä¢ {{ formatTime(item.entered_queue_at) }}</p>\n            </div>\n            <div class=\"item-actions\">\n              <button v-if=\"item.queue_state === 'new'\" @click=\"reviewVoicemail(item.id)\" class=\"review-btn\">\n                Review\n              </button>\n              <button v-if=\"item.queue_state !== 'resolved'\" @click=\"resolveVoicemail(item.id)\" class=\"resolve-btn\">\n                Resolve\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"activeQueue === 'documents'\" class=\"queue-section\">\n        <h3>Documents Queue</h3>\n        <p class=\"queue-description\">Work-in-progress and compliance checkpoint</p>\n        <div v-if=\"documentsQueue.length === 0\" class=\"empty-state\">No pending documents</div>\n        <div v-else class=\"queue-list\">\n          <div v-for=\"item in documentsQueue\" :key=\"item.id\" class=\"queue-item\" :class=\"{ blocking: item.blocking_workflow }\">\n            <div class=\"item-header\">\n              <span class=\"item-icon\">üìÑ</span>\n              <span :class=\"['item-state', item.queue_state]\">{{ item.queue_state }}</span>\n              <span v-if=\"item.blocking_workflow\" class=\"blocking-badge\">Blocking</span>\n            </div>\n            <div class=\"item-details\">\n              <p class=\"item-title\">{{ item.workspace_documents?.document_name }}</p>\n              <p class=\"item-meta\">{{ item.document_purpose || 'General' }} ‚Ä¢ {{ formatTime(item.entered_queue_at) }}</p>\n            </div>\n            <div class=\"item-actions\">\n              <button @click=\"openDocument(item.document_id)\" class=\"open-btn\">Open</button>\n              <button v-if=\"item.queue_state === 'draft'\" @click=\"readyToFinalize(item.id)\" class=\"finalize-btn\">\n                Ready to Finalize\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"activeQueue === 'billing'\" class=\"queue-section\">\n        <h3>Billing Queue</h3>\n        <p class=\"queue-description\">Primary billing execution queue</p>\n        <div v-if=\"billingQueue.length === 0\" class=\"empty-state\">No billing items</div>\n        <div v-else class=\"queue-list\">\n          <div v-for=\"item in billingQueue\" :key=\"item.id\" class=\"queue-item\">\n            <div class=\"item-header\">\n              <span class=\"item-icon\">üíº</span>\n              <span :class=\"['item-state', item.queue_state]\">{{ item.queue_state }}</span>\n            </div>\n            <div class=\"item-details\">\n              <p class=\"item-title\">{{ item.billing_reference }}</p>\n              <p class=\"item-meta\">{{ item.billing_type }} ‚Ä¢ {{ item.next_action }}</p>\n              <p v-if=\"item.action_deadline\" class=\"item-deadline\">Due: {{ formatDate(item.action_deadline) }}</p>\n            </div>\n            <div class=\"item-actions\">\n              <button v-if=\"item.queue_state === 'ready'\" @click=\"startBilling(item.id)\" class=\"start-btn\">\n                Start\n              </button>\n              <button v-if=\"item.queue_state !== 'resolved'\" @click=\"resolveBilling(item.id)\" class=\"resolve-btn\">\n                Resolve\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst {\n  getCallsQueue,\n  completeCallsQueueItem,\n  getVoicemailsQueue,\n  updateVoicemailsQueueItem,\n  getDocumentsQueue,\n  updateDocumentsQueueItem,\n  getBillingQueue,\n  updateBillingQueueItem,\n  getQueueCounts\n} = useQueues()\n\nconst activeQueue = ref('billing')\nconst callsQueue = ref<any[]>([])\nconst voicemailsQueue = ref<any[]>([])\nconst documentsQueue = ref<any[]>([])\nconst billingQueue = ref<any[]>([])\n\nconst queueCounts = ref({\n  activeCalls: 0,\n  newVoicemails: 0,\n  blockingDocuments: 0,\n  actionRequiredBilling: 0\n})\n\nconst queues = computed(() => [\n  { id: 'calls', name: 'Calls', icon: 'üìû', count: queueCounts.value.activeCalls },\n  { id: 'voicemails', name: 'Voicemails', icon: 'üì®', count: queueCounts.value.newVoicemails },\n  { id: 'documents', name: 'Documents', icon: 'üìÑ', count: queueCounts.value.blockingDocuments },\n  { id: 'billing', name: 'Billing', icon: 'üíº', count: queueCounts.value.actionRequiredBilling }\n])\n\nconst formatTime = (timestamp: string) => {\n  const d = new Date(timestamp)\n  const now = new Date()\n  const diffMs = now.getTime() - d.getTime()\n  const diffMins = Math.floor(diffMs / 60000)\n\n  if (diffMins < 60) return `${diffMins}m ago`\n  if (diffMins < 1440) return `${Math.floor(diffMins / 60)}h ago`\n  return d.toLocaleDateString()\n}\n\nconst formatDate = (date: string) => {\n  return new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n}\n\nconst loadQueues = async () => {\n  callsQueue.value = await getCallsQueue()\n  voicemailsQueue.value = await getVoicemailsQueue()\n  documentsQueue.value = await getDocumentsQueue()\n  billingQueue.value = await getBillingQueue()\n  queueCounts.value = await getQueueCounts()\n}\n\nconst completeCall = async (queueId: string) => {\n  await completeCallsQueueItem(queueId)\n  await loadQueues()\n}\n\nconst reviewVoicemail = async (queueId: string) => {\n  await updateVoicemailsQueueItem(queueId, 'reviewed')\n  await loadQueues()\n}\n\nconst resolveVoicemail = async (queueId: string) => {\n  await updateVoicemailsQueueItem(queueId, 'resolved')\n  await loadQueues()\n}\n\nconst openDocument = (documentId: string) => {\n  console.log('Open document:', documentId)\n}\n\nconst readyToFinalize = async (queueId: string) => {\n  await updateDocumentsQueueItem(queueId, 'ready_to_finalize')\n  await loadQueues()\n}\n\nconst startBilling = async (queueId: string) => {\n  await updateBillingQueueItem(queueId, 'in_progress')\n  await loadQueues()\n}\n\nconst resolveBilling = async (queueId: string) => {\n  await updateBillingQueueItem(queueId, 'resolved')\n  await loadQueues()\n}\n\nonMounted(() => {\n  loadQueues()\n\n  setInterval(() => {\n    loadQueues()\n  }, 30000)\n})\n</script>\n\n<style scoped>\n.queue-management {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.queue-tabs {\n  display: flex;\n  border-bottom: 1px solid #e5e7eb;\n  background: #f9fafb;\n}\n\n.queue-tab {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 16px;\n  background: none;\n  border: none;\n  border-bottom: 3px solid transparent;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.queue-tab:hover {\n  background: white;\n}\n\n.queue-tab.active {\n  background: white;\n  border-bottom-color: #3b82f6;\n}\n\n.queue-icon {\n  font-size: 20px;\n}\n\n.queue-name {\n  font-size: 14px;\n  font-weight: 500;\n  color: #374151;\n}\n\n.queue-badge {\n  padding: 2px 8px;\n  background: #ef4444;\n  color: white;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.queue-content {\n  padding: 24px;\n}\n\n.queue-section h3 {\n  font-size: 20px;\n  font-weight: 700;\n  color: #111827;\n  margin: 0 0 8px 0;\n}\n\n.queue-description {\n  font-size: 14px;\n  color: #6b7280;\n  margin: 0 0 20px 0;\n}\n\n.empty-state {\n  padding: 60px;\n  text-align: center;\n  color: #6b7280;\n  font-size: 14px;\n}\n\n.queue-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.queue-item {\n  padding: 16px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  transition: all 0.2s;\n}\n\n.queue-item:hover {\n  border-color: #3b82f6;\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);\n}\n\n.queue-item.blocking {\n  border-color: #f59e0b;\n  background: #fffbeb;\n}\n\n.item-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n}\n\n.item-direction,\n.item-icon {\n  font-size: 14px;\n  font-weight: 500;\n  color: #374151;\n}\n\n.item-state {\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 600;\n  text-transform: uppercase;\n}\n\n.item-state.active,\n.item-state.new,\n.item-state.ready {\n  background: #dbeafe;\n  color: #1e40af;\n}\n\n.item-state.completed,\n.item-state.resolved {\n  background: #d1fae5;\n  color: #065f46;\n}\n\n.item-state.action_required {\n  background: #fef3c7;\n  color: #92400e;\n}\n\n.blocking-badge {\n  padding: 2px 8px;\n  background: #fed7aa;\n  color: #9a3412;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 600;\n}\n\n.item-details {\n  margin-bottom: 12px;\n}\n\n.item-title {\n  font-size: 15px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 4px 0;\n}\n\n.item-meta {\n  font-size: 13px;\n  color: #6b7280;\n  margin: 0;\n}\n\n.item-deadline {\n  font-size: 13px;\n  color: #dc2626;\n  font-weight: 500;\n  margin: 4px 0 0 0;\n}\n\n.item-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.complete-btn,\n.review-btn,\n.resolve-btn,\n.open-btn,\n.finalize-btn,\n.start-btn {\n  padding: 6px 16px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 13px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.complete-btn {\n  background: #10b981;\n  color: white;\n  border-color: #10b981;\n}\n\n.review-btn {\n  background: #3b82f6;\n  color: white;\n  border-color: #3b82f6;\n}\n\n.resolve-btn {\n  background: #059669;\n  color: white;\n  border-color: #059669;\n}\n\n.open-btn {\n  background: white;\n}\n\n.finalize-btn {\n  background: #f59e0b;\n  color: white;\n  border-color: #f59e0b;\n}\n\n.start-btn {\n  background: #8b5cf6;\n  color: white;\n  border-color: #8b5cf6;\n}\n</style>\n","export const useBuilders = () => {\n  const supabase = useSupabaseClient()\n\n  const createInvoice = async (invoiceData: {\n    invoiceNumber: string\n    invoiceType: 'patient_pay' | 'private_party' | 'platform_fee' | 'agency_billing'\n    encounterId?: string\n    agencyId?: string\n    billableCallId?: string\n    payerType?: 'insurance' | 'patient' | 'private_party'\n    payerName?: string\n    payerContact?: any\n    dueDate?: string\n  }) => {\n    const { data, error } = await supabase\n      .from('invoices')\n      .insert({\n        invoice_number: invoiceData.invoiceNumber,\n        invoice_type: invoiceData.invoiceType,\n        invoice_state: 'draft',\n        encounter_id: invoiceData.encounterId,\n        agency_id: invoiceData.agencyId,\n        billable_call_id: invoiceData.billableCallId,\n        payer_type: invoiceData.payerType,\n        payer_name: invoiceData.payerName,\n        payer_contact: invoiceData.payerContact,\n        due_date: invoiceData.dueDate\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const addInvoiceLineItem = async (lineItemData: {\n    invoiceId: string\n    lineNumber: number\n    itemType: string\n    description: string\n    quantity: number\n    unitPriceCents: number\n    metadata?: any\n  }) => {\n    const lineTotalCents = Math.round(lineItemData.quantity * lineItemData.unitPriceCents)\n\n    const { data, error } = await supabase\n      .from('invoice_line_items')\n      .insert({\n        invoice_id: lineItemData.invoiceId,\n        line_number: lineItemData.lineNumber,\n        item_type: lineItemData.itemType,\n        description: lineItemData.description,\n        quantity: lineItemData.quantity,\n        unit_price_cents: lineItemData.unitPriceCents,\n        line_total_cents: lineTotalCents,\n        metadata: lineItemData.metadata || {}\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const calculateInvoiceTotals = async (invoiceId: string) => {\n    const { data: lineItems } = await supabase\n      .from('invoice_line_items')\n      .select('line_total_cents')\n      .eq('invoice_id', invoiceId)\n\n    const subtotalCents = lineItems?.reduce((sum, item) => sum + item.line_total_cents, 0) || 0\n    const totalCents = subtotalCents\n\n    const { error } = await supabase\n      .from('invoices')\n      .update({\n        subtotal_cents: subtotalCents,\n        total_cents: totalCents,\n        balance_cents: totalCents,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', invoiceId)\n\n    if (error) throw error\n\n    return { subtotalCents, totalCents }\n  }\n\n  const finalizeInvoice = async (invoiceId: string) => {\n    await calculateInvoiceTotals(invoiceId)\n\n    const { error } = await supabase\n      .from('invoices')\n      .update({\n        invoice_state: 'final',\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', invoiceId)\n\n    if (error) throw error\n  }\n\n  const sendInvoice = async (invoiceId: string) => {\n    const { error } = await supabase\n      .from('invoices')\n      .update({\n        invoice_state: 'sent',\n        sent_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', invoiceId)\n\n    if (error) throw error\n  }\n\n  const getInvoice = async (invoiceId: string) => {\n    const { data, error } = await supabase\n      .from('invoices')\n      .select(`\n        *,\n        invoice_line_items (*)\n      `)\n      .eq('id', invoiceId)\n      .maybeSingle()\n\n    if (error) throw error\n    return data\n  }\n\n  const getInvoices = async (filters?: { state?: string; agencyId?: string; invoiceType?: string }) => {\n    let query = supabase\n      .from('invoices')\n      .select('*')\n      .order('created_at', { ascending: false })\n\n    if (filters?.state) {\n      query = query.eq('invoice_state', filters.state)\n    }\n    if (filters?.agencyId) {\n      query = query.eq('agency_id', filters.agencyId)\n    }\n    if (filters?.invoiceType) {\n      query = query.eq('invoice_type', filters.invoiceType)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  const createNEMSISValidation = async (validationData: {\n    epcrId: string\n    validationVersion: string\n    requiredFieldsComplete: number\n    requiredFieldsTotal: number\n    validationErrors?: any[]\n    validationWarnings?: any[]\n  }) => {\n    const exportReady = validationData.requiredFieldsComplete === validationData.requiredFieldsTotal &&\n                        (!validationData.validationErrors || validationData.validationErrors.length === 0)\n\n    const validationStatus = exportReady ? 'valid' :\n                            validationData.requiredFieldsComplete < validationData.requiredFieldsTotal ? 'incomplete' :\n                            'invalid'\n\n    const { data, error } = await supabase\n      .from('nemsis_validations')\n      .insert({\n        epcr_id: validationData.epcrId,\n        validation_version: validationData.validationVersion,\n        validation_status: validationStatus,\n        required_fields_complete: validationData.requiredFieldsComplete,\n        required_fields_total: validationData.requiredFieldsTotal,\n        validation_errors: validationData.validationErrors || [],\n        validation_warnings: validationData.validationWarnings || [],\n        export_ready: exportReady\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const getNEMSISValidation = async (epcrId: string) => {\n    const { data, error } = await supabase\n      .from('nemsis_validations')\n      .select('*')\n      .eq('epcr_id', epcrId)\n      .order('validated_at', { ascending: false })\n      .limit(1)\n      .maybeSingle()\n\n    if (error) throw error\n    return data\n  }\n\n  const markNEMSISExported = async (validationId: string, exportFormat: string) => {\n    const { error } = await supabase\n      .from('nemsis_validations')\n      .update({\n        exported_at: new Date().toISOString(),\n        export_format: exportFormat\n      })\n      .eq('id', validationId)\n\n    if (error) throw error\n  }\n\n  const mapRxNorm = async (mappingData: {\n    medicationEntry: string\n    rxnormConceptId?: string\n    rxnormName?: string\n    dose?: string\n    doseUnit?: string\n    route?: string\n    mappingStatus: 'unmapped' | 'suggested' | 'confirmed' | 'unknown'\n    mappingConfidence?: number\n    mappedBy?: string\n  }) => {\n    const { data, error } = await supabase\n      .from('rxnorm_mappings')\n      .insert({\n        medication_entry: mappingData.medicationEntry,\n        rxnorm_concept_id: mappingData.rxnormConceptId,\n        rxnorm_name: mappingData.rxnormName,\n        dose: mappingData.dose,\n        dose_unit: mappingData.doseUnit,\n        route: mappingData.route,\n        mapping_status: mappingData.mappingStatus,\n        mapping_confidence: mappingData.mappingConfidence,\n        mapped_by: mappingData.mappedBy,\n        mapped_at: mappingData.mappingStatus === 'confirmed' ? new Date().toISOString() : null\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const confirmRxNormMapping = async (mappingId: string, mappedBy: string) => {\n    const { error } = await supabase\n      .from('rxnorm_mappings')\n      .update({\n        mapping_status: 'confirmed',\n        mapped_by: mappedBy,\n        mapped_at: new Date().toISOString()\n      })\n      .eq('id', mappingId)\n\n    if (error) throw error\n  }\n\n  const getRxNormMappings = async (status?: string) => {\n    let query = supabase\n      .from('rxnorm_mappings')\n      .select('*')\n      .order('created_at', { ascending: false })\n\n    if (status) {\n      query = query.eq('mapping_status', status)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  const mapSNOMED = async (mappingData: {\n    clinicalTerm: string\n    snomedConceptId?: string\n    snomedDescription?: string\n    termType: 'symptom' | 'finding' | 'impression' | 'procedure' | 'other'\n    mappingStatus: 'unmapped' | 'suggested' | 'confirmed' | 'unknown'\n    mappingConfidence?: number\n    mappedBy?: string\n  }) => {\n    const { data, error } = await supabase\n      .from('snomed_mappings')\n      .insert({\n        clinical_term: mappingData.clinicalTerm,\n        snomed_concept_id: mappingData.snomedConceptId,\n        snomed_description: mappingData.snomedDescription,\n        term_type: mappingData.termType,\n        mapping_status: mappingData.mappingStatus,\n        mapping_confidence: mappingData.mappingConfidence,\n        mapped_by: mappingData.mappedBy,\n        mapped_at: mappingData.mappingStatus === 'confirmed' ? new Date().toISOString() : null\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n    return data\n  }\n\n  const confirmSNOMEDMapping = async (mappingId: string, mappedBy: string) => {\n    const { error } = await supabase\n      .from('snomed_mappings')\n      .update({\n        mapping_status: 'confirmed',\n        mapped_by: mappedBy,\n        mapped_at: new Date().toISOString()\n      })\n      .eq('id', mappingId)\n\n    if (error) throw error\n  }\n\n  const getSNOMEDMappings = async (status?: string) => {\n    let query = supabase\n      .from('snomed_mappings')\n      .select('*')\n      .order('created_at', { ascending: false })\n\n    if (status) {\n      query = query.eq('mapping_status', status)\n    }\n\n    const { data, error } = await query\n\n    if (error) throw error\n    return data || []\n  }\n\n  return {\n    createInvoice,\n    addInvoiceLineItem,\n    calculateInvoiceTotals,\n    finalizeInvoice,\n    sendInvoice,\n    getInvoice,\n    getInvoices,\n    createNEMSISValidation,\n    getNEMSISValidation,\n    markNEMSISExported,\n    mapRxNorm,\n    confirmRxNormMapping,\n    getRxNormMappings,\n    mapSNOMED,\n    confirmSNOMEDMapping,\n    getSNOMEDMappings\n  }\n}\n","<template>\n  <div class=\"workspace-builders\">\n    <div class=\"builders-tabs\">\n      <button\n        v-for=\"builder in builders\"\n        :key=\"builder.id\"\n        @click=\"activeBuilder = builder.id\"\n        :class=\"['builder-tab', { active: activeBuilder === builder.id }]\"\n      >\n        {{ builder.icon }} {{ builder.name }}\n      </button>\n    </div>\n\n    <div class=\"builder-content\">\n      <div v-if=\"activeBuilder === 'invoice'\" class=\"builder-section\">\n        <h3>Invoice Builder</h3>\n        <p class=\"builder-description\">Create patient-pay and private-party invoices</p>\n\n        <div class=\"builder-form\">\n          <div class=\"form-row\">\n            <div class=\"form-field\">\n              <label>Invoice Number:</label>\n              <input v-model=\"invoiceForm.invoiceNumber\" type=\"text\" placeholder=\"INV-2024-001\" />\n            </div>\n            <div class=\"form-field\">\n              <label>Invoice Type:</label>\n              <select v-model=\"invoiceForm.invoiceType\">\n                <option value=\"patient_pay\">Patient Pay</option>\n                <option value=\"private_party\">Private Party</option>\n                <option value=\"agency_billing\">Agency Billing</option>\n              </select>\n            </div>\n          </div>\n          <div class=\"form-row\">\n            <div class=\"form-field\">\n              <label>Payer Name:</label>\n              <input v-model=\"invoiceForm.payerName\" type=\"text\" placeholder=\"John Doe\" />\n            </div>\n            <div class=\"form-field\">\n              <label>Due Date:</label>\n              <input v-model=\"invoiceForm.dueDate\" type=\"date\" />\n            </div>\n          </div>\n\n          <div class=\"line-items-section\">\n            <h4>Line Items</h4>\n            <div v-for=\"(item, index) in invoiceForm.lineItems\" :key=\"index\" class=\"line-item\">\n              <select v-model=\"item.itemType\">\n                <option value=\"transport\">Transport</option>\n                <option value=\"mileage\">Mileage</option>\n                <option value=\"service_level\">Service Level</option>\n                <option value=\"telehealth\">Telehealth</option>\n              </select>\n              <input v-model=\"item.description\" type=\"text\" placeholder=\"Description\" />\n              <input v-model.number=\"item.quantity\" type=\"number\" placeholder=\"Qty\" style=\"width: 80px\" />\n              <input v-model.number=\"item.unitPrice\" type=\"number\" placeholder=\"Price\" style=\"width: 100px\" />\n              <button @click=\"removeLineItem(index)\" class=\"remove-btn\">√ó</button>\n            </div>\n            <button @click=\"addLineItem\" class=\"add-line-btn\">+ Add Line Item</button>\n          </div>\n\n          <div class=\"invoice-total\">\n            <p>Subtotal: ${{ calculateTotal() }}</p>\n            <p class=\"total\">Total: ${{ calculateTotal() }}</p>\n          </div>\n\n          <div class=\"form-actions\">\n            <button @click=\"saveDraft\" class=\"save-btn\">Save Draft</button>\n            <button @click=\"finalizeInvoiceAction\" class=\"finalize-btn\">Finalize Invoice</button>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"activeBuilder === 'nemsis'\" class=\"builder-section\">\n        <h3>NEMSIS Builder</h3>\n        <p class=\"builder-description\">Validate and export ePCR data to NEMSIS format</p>\n\n        <div class=\"validation-status\">\n          <div class=\"status-header\">\n            <h4>NEMSIS Readiness</h4>\n            <span :class=\"['status-badge', nemsisStatus.status]\">{{ nemsisStatus.status }}</span>\n          </div>\n          <div class=\"progress-bar\">\n            <div class=\"progress-fill\" :style=\"{ width: nemsisProgress + '%' }\"></div>\n          </div>\n          <p class=\"progress-text\">\n            {{ nemsisStatus.requiredComplete }}/{{ nemsisStatus.requiredTotal }} required fields complete\n          </p>\n        </div>\n\n        <div class=\"validation-sections\">\n          <div class=\"validation-item\">\n            <span class=\"validation-icon\">‚úì</span>\n            <span class=\"validation-label\">Patient Demographics</span>\n            <span class=\"validation-status complete\">Complete</span>\n          </div>\n          <div class=\"validation-item\">\n            <span class=\"validation-icon\">‚úì</span>\n            <span class=\"validation-label\">Incident Information</span>\n            <span class=\"validation-status complete\">Complete</span>\n          </div>\n          <div class=\"validation-item\">\n            <span class=\"validation-icon\">‚ö†</span>\n            <span class=\"validation-label\">Vital Signs</span>\n            <span class=\"validation-status incomplete\">Incomplete</span>\n          </div>\n          <div class=\"validation-item\">\n            <span class=\"validation-icon\">‚úì</span>\n            <span class=\"validation-label\">Medications Administered</span>\n            <span class=\"validation-status complete\">Complete</span>\n          </div>\n        </div>\n\n        <div class=\"form-actions\">\n          <button :disabled=\"!nemsisStatus.exportReady\" class=\"export-btn\">Export NEMSIS</button>\n        </div>\n      </div>\n\n      <div v-if=\"activeBuilder === 'rxnorm'\" class=\"builder-section\">\n        <h3>RxNorm Builder</h3>\n        <p class=\"builder-description\">Standardize medication documentation</p>\n\n        <div class=\"mapping-section\">\n          <div class=\"mapping-input\">\n            <label>Medication Entry:</label>\n            <input v-model=\"rxnormForm.medicationEntry\" type=\"text\" placeholder=\"Aspirin 81mg PO\" />\n            <button @click=\"suggestRxNorm\" class=\"suggest-btn\">Suggest Mapping</button>\n          </div>\n\n          <div v-if=\"rxnormForm.suggested\" class=\"mapping-result\">\n            <h4>Suggested Mapping</h4>\n            <div class=\"mapping-card\">\n              <p><strong>RxNorm Concept:</strong> {{ rxnormForm.rxnormName }}</p>\n              <p><strong>Concept ID:</strong> {{ rxnormForm.rxnormConceptId }}</p>\n              <p><strong>Confidence:</strong> {{ rxnormForm.confidence }}%</p>\n              <div class=\"mapping-details\">\n                <input v-model=\"rxnormForm.dose\" type=\"text\" placeholder=\"Dose (81)\" />\n                <input v-model=\"rxnormForm.doseUnit\" type=\"text\" placeholder=\"Unit (mg)\" />\n                <input v-model=\"rxnormForm.route\" type=\"text\" placeholder=\"Route (PO)\" />\n              </div>\n              <div class=\"mapping-actions\">\n                <button @click=\"confirmRxNorm\" class=\"confirm-btn\">Confirm Mapping</button>\n                <button @click=\"rejectRxNorm\" class=\"reject-btn\">Reject</button>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"mapping-list\">\n            <h4>Recent Mappings</h4>\n            <div class=\"mapping-list-item\" v-for=\"mapping in rxnormMappings\" :key=\"mapping.id\">\n              <span>{{ mapping.medication_entry }}</span>\n              <span :class=\"['mapping-status', mapping.mapping_status]\">{{ mapping.mapping_status }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div v-if=\"activeBuilder === 'snomed'\" class=\"builder-section\">\n        <h3>SNOMED Builder</h3>\n        <p class=\"builder-description\">Standardize clinical concepts</p>\n\n        <div class=\"mapping-section\">\n          <div class=\"mapping-input\">\n            <label>Clinical Term:</label>\n            <input v-model=\"snomedForm.clinicalTerm\" type=\"text\" placeholder=\"Chest pain\" />\n            <select v-model=\"snomedForm.termType\">\n              <option value=\"symptom\">Symptom</option>\n              <option value=\"finding\">Finding</option>\n              <option value=\"impression\">Impression</option>\n              <option value=\"procedure\">Procedure</option>\n            </select>\n            <button @click=\"suggestSNOMED\" class=\"suggest-btn\">Suggest Mapping</button>\n          </div>\n\n          <div v-if=\"snomedForm.suggested\" class=\"mapping-result\">\n            <h4>Suggested Mapping</h4>\n            <div class=\"mapping-card\">\n              <p><strong>SNOMED Concept:</strong> {{ snomedForm.snomedDescription }}</p>\n              <p><strong>Concept ID:</strong> {{ snomedForm.snomedConceptId }}</p>\n              <p><strong>Confidence:</strong> {{ snomedForm.confidence }}%</p>\n              <div class=\"mapping-actions\">\n                <button @click=\"confirmSNOMED\" class=\"confirm-btn\">Confirm Mapping</button>\n                <button @click=\"rejectSNOMED\" class=\"reject-btn\">Reject</button>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"mapping-list\">\n            <h4>Recent Mappings</h4>\n            <div class=\"mapping-list-item\" v-for=\"mapping in snomedMappings\" :key=\"mapping.id\">\n              <span>{{ mapping.clinical_term }}</span>\n              <span class=\"term-type\">{{ mapping.term_type }}</span>\n              <span :class=\"['mapping-status', mapping.mapping_status]\">{{ mapping.mapping_status }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst {\n  createInvoice,\n  addInvoiceLineItem,\n  calculateInvoiceTotals,\n  finalizeInvoice,\n  getRxNormMappings,\n  mapRxNorm,\n  confirmRxNormMapping,\n  getSNOMEDMappings,\n  mapSNOMED,\n  confirmSNOMEDMapping\n} = useBuilders()\n\nconst activeBuilder = ref('invoice')\n\nconst builders = [\n  { id: 'invoice', name: 'Invoice', icon: 'üíµ' },\n  { id: 'nemsis', name: 'NEMSIS', icon: 'üöë' },\n  { id: 'rxnorm', name: 'RxNorm', icon: 'üíä' },\n  { id: 'snomed', name: 'SNOMED', icon: 'ü©∫' }\n]\n\nconst invoiceForm = ref({\n  invoiceNumber: '',\n  invoiceType: 'patient_pay',\n  payerName: '',\n  dueDate: '',\n  lineItems: [\n    { itemType: 'transport', description: '', quantity: 1, unitPrice: 0 }\n  ]\n})\n\nconst nemsisStatus = ref({\n  status: 'incomplete',\n  requiredComplete: 3,\n  requiredTotal: 4,\n  exportReady: false\n})\n\nconst nemsisProgress = computed(() => {\n  return (nemsisStatus.value.requiredComplete / nemsisStatus.value.requiredTotal) * 100\n})\n\nconst rxnormForm = ref({\n  medicationEntry: '',\n  suggested: false,\n  rxnormConceptId: '',\n  rxnormName: '',\n  dose: '',\n  doseUnit: '',\n  route: '',\n  confidence: 0\n})\n\nconst snomedForm = ref({\n  clinicalTerm: '',\n  termType: 'symptom',\n  suggested: false,\n  snomedConceptId: '',\n  snomedDescription: '',\n  confidence: 0\n})\n\nconst rxnormMappings = ref<any[]>([])\nconst snomedMappings = ref<any[]>([])\n\nconst addLineItem = () => {\n  invoiceForm.value.lineItems.push({\n    itemType: 'transport',\n    description: '',\n    quantity: 1,\n    unitPrice: 0\n  })\n}\n\nconst removeLineItem = (index: number) => {\n  invoiceForm.value.lineItems.splice(index, 1)\n}\n\nconst calculateTotal = () => {\n  const total = invoiceForm.value.lineItems.reduce((sum, item) => {\n    return sum + (item.quantity * item.unitPrice)\n  }, 0)\n  return (total / 100).toFixed(2)\n}\n\nconst saveDraft = async () => {\n  const invoice = await createInvoice({\n    invoiceNumber: invoiceForm.value.invoiceNumber,\n    invoiceType: invoiceForm.value.invoiceType as any,\n    payerName: invoiceForm.value.payerName,\n    dueDate: invoiceForm.value.dueDate\n  })\n\n  for (let i = 0; i < invoiceForm.value.lineItems.length; i++) {\n    const item = invoiceForm.value.lineItems[i]\n    await addInvoiceLineItem({\n      invoiceId: invoice.id,\n      lineNumber: i + 1,\n      itemType: item.itemType,\n      description: item.description,\n      quantity: item.quantity,\n      unitPriceCents: Math.round(item.unitPrice * 100)\n    })\n  }\n\n  await calculateInvoiceTotals(invoice.id)\n  alert('Invoice draft saved!')\n}\n\nconst finalizeInvoiceAction = async () => {\n  await saveDraft()\n  alert('Invoice finalized!')\n}\n\nconst suggestRxNorm = () => {\n  rxnormForm.value.suggested = true\n  rxnormForm.value.rxnormConceptId = 'RXCUI:1191'\n  rxnormForm.value.rxnormName = 'Aspirin 81 MG Oral Tablet'\n  rxnormForm.value.dose = '81'\n  rxnormForm.value.doseUnit = 'mg'\n  rxnormForm.value.route = 'PO'\n  rxnormForm.value.confidence = 95\n}\n\nconst confirmRxNorm = async () => {\n  await mapRxNorm({\n    medicationEntry: rxnormForm.value.medicationEntry,\n    rxnormConceptId: rxnormForm.value.rxnormConceptId,\n    rxnormName: rxnormForm.value.rxnormName,\n    dose: rxnormForm.value.dose,\n    doseUnit: rxnormForm.value.doseUnit,\n    route: rxnormForm.value.route,\n    mappingStatus: 'confirmed',\n    mappingConfidence: rxnormForm.value.confidence,\n    mappedBy: 'founder'\n  })\n\n  rxnormForm.value.suggested = false\n  rxnormForm.value.medicationEntry = ''\n  await loadRxNormMappings()\n}\n\nconst rejectRxNorm = () => {\n  rxnormForm.value.suggested = false\n}\n\nconst suggestSNOMED = () => {\n  snomedForm.value.suggested = true\n  snomedForm.value.snomedConceptId = 'SCT:29857009'\n  snomedForm.value.snomedDescription = 'Chest pain (finding)'\n  snomedForm.value.confidence = 92\n}\n\nconst confirmSNOMED = async () => {\n  await mapSNOMED({\n    clinicalTerm: snomedForm.value.clinicalTerm,\n    snomedConceptId: snomedForm.value.snomedConceptId,\n    snomedDescription: snomedForm.value.snomedDescription,\n    termType: snomedForm.value.termType as any,\n    mappingStatus: 'confirmed',\n    mappingConfidence: snomedForm.value.confidence,\n    mappedBy: 'founder'\n  })\n\n  snomedForm.value.suggested = false\n  snomedForm.value.clinicalTerm = ''\n  await loadSNOMEDMappings()\n}\n\nconst rejectSNOMED = () => {\n  snomedForm.value.suggested = false\n}\n\nconst loadRxNormMappings = async () => {\n  rxnormMappings.value = await getRxNormMappings()\n}\n\nconst loadSNOMEDMappings = async () => {\n  snomedMappings.value = await getSNOMEDMappings()\n}\n\nonMounted(() => {\n  loadRxNormMappings()\n  loadSNOMEDMappings()\n})\n</script>\n\n<style scoped>\n.workspace-builders {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.builders-tabs {\n  display: flex;\n  border-bottom: 1px solid #e5e7eb;\n  background: #f9fafb;\n}\n\n.builder-tab {\n  flex: 1;\n  padding: 16px;\n  background: none;\n  border: none;\n  border-bottom: 3px solid transparent;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.builder-tab:hover {\n  background: white;\n}\n\n.builder-tab.active {\n  background: white;\n  border-bottom-color: #3b82f6;\n}\n\n.builder-content {\n  padding: 24px;\n}\n\n.builder-section h3 {\n  font-size: 20px;\n  font-weight: 700;\n  color: #111827;\n  margin: 0 0 8px 0;\n}\n\n.builder-description {\n  font-size: 14px;\n  color: #6b7280;\n  margin: 0 0 24px 0;\n}\n\n.builder-form {\n  max-width: 800px;\n}\n\n.form-row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 16px;\n  margin-bottom: 16px;\n}\n\n.form-field {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.form-field label {\n  font-size: 13px;\n  font-weight: 500;\n  color: #374151;\n}\n\n.form-field input,\n.form-field select {\n  padding: 8px 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n}\n\n.line-items-section {\n  margin: 24px 0;\n}\n\n.line-items-section h4 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 12px 0;\n}\n\n.line-item {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 8px;\n}\n\n.line-item select,\n.line-item input {\n  padding: 8px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n}\n\n.line-item select {\n  width: 140px;\n}\n\n.line-item input[type=\"text\"] {\n  flex: 1;\n}\n\n.remove-btn {\n  padding: 8px 12px;\n  background: #fecaca;\n  color: #991b1b;\n  border: none;\n  border-radius: 6px;\n  font-size: 18px;\n  cursor: pointer;\n}\n\n.add-line-btn {\n  padding: 8px 16px;\n  background: #dbeafe;\n  color: #1e40af;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.invoice-total {\n  margin: 24px 0;\n  padding: 16px;\n  background: #f9fafb;\n  border-radius: 6px;\n  text-align: right;\n}\n\n.invoice-total p {\n  margin: 0 0 8px 0;\n  font-size: 15px;\n  color: #374151;\n}\n\n.invoice-total .total {\n  font-size: 20px;\n  font-weight: 700;\n  color: #111827;\n}\n\n.form-actions {\n  display: flex;\n  gap: 12px;\n}\n\n.save-btn,\n.finalize-btn,\n.export-btn,\n.suggest-btn,\n.confirm-btn,\n.reject-btn {\n  padding: 10px 24px;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n}\n\n.save-btn {\n  background: #e5e7eb;\n  color: #374151;\n}\n\n.finalize-btn {\n  background: #3b82f6;\n  color: white;\n}\n\n.export-btn {\n  background: #10b981;\n  color: white;\n}\n\n.export-btn:disabled {\n  background: #d1d5db;\n  cursor: not-allowed;\n}\n\n.validation-status {\n  margin-bottom: 24px;\n  padding: 20px;\n  background: #f9fafb;\n  border-radius: 8px;\n}\n\n.status-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n\n.status-header h4 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0;\n}\n\n.status-badge {\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: uppercase;\n}\n\n.status-badge.valid {\n  background: #d1fae5;\n  color: #065f46;\n}\n\n.status-badge.incomplete {\n  background: #fef3c7;\n  color: #92400e;\n}\n\n.progress-bar {\n  height: 8px;\n  background: #e5e7eb;\n  border-radius: 4px;\n  overflow: hidden;\n  margin-bottom: 8px;\n}\n\n.progress-fill {\n  height: 100%;\n  background: #3b82f6;\n  transition: width 0.3s;\n}\n\n.progress-text {\n  font-size: 13px;\n  color: #6b7280;\n  margin: 0;\n}\n\n.validation-sections {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 24px;\n}\n\n.validation-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n}\n\n.validation-icon {\n  font-size: 18px;\n}\n\n.validation-label {\n  flex: 1;\n  font-size: 14px;\n  color: #374151;\n}\n\n.validation-status {\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 600;\n}\n\n.validation-status.complete {\n  background: #d1fae5;\n  color: #065f46;\n}\n\n.validation-status.incomplete {\n  background: #fef3c7;\n  color: #92400e;\n}\n\n.mapping-section {\n  max-width: 700px;\n}\n\n.mapping-input {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 24px;\n  align-items: end;\n}\n\n.mapping-input label {\n  font-size: 13px;\n  font-weight: 500;\n  color: #374151;\n  margin-bottom: 6px;\n}\n\n.mapping-input input,\n.mapping-input select {\n  padding: 8px 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n}\n\n.suggest-btn {\n  background: #3b82f6;\n  color: white;\n}\n\n.mapping-result {\n  margin-bottom: 24px;\n}\n\n.mapping-result h4 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 12px 0;\n}\n\n.mapping-card {\n  padding: 16px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n}\n\n.mapping-card p {\n  margin: 0 0 8px 0;\n  font-size: 14px;\n  color: #374151;\n}\n\n.mapping-details {\n  display: flex;\n  gap: 8px;\n  margin: 16px 0;\n}\n\n.mapping-details input {\n  flex: 1;\n  padding: 8px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 14px;\n}\n\n.mapping-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.confirm-btn {\n  background: #10b981;\n  color: white;\n}\n\n.reject-btn {\n  background: #ef4444;\n  color: white;\n}\n\n.mapping-list h4 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 12px 0;\n}\n\n.mapping-list-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  margin-bottom: 8px;\n  font-size: 14px;\n}\n\n.term-type {\n  padding: 2px 8px;\n  background: #dbeafe;\n  color: #1e40af;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 600;\n}\n\n.mapping-status {\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 11px;\n  font-weight: 600;\n}\n\n.mapping-status.confirmed {\n  background: #d1fae5;\n  color: #065f46;\n}\n\n.mapping-status.suggested {\n  background: #fef3c7;\n  color: #92400e;\n}\n\n.mapping-status.unmapped {\n  background: #e5e7eb;\n  color: #6b7280;\n}\n</style>\n","<template>\n  <div class=\"face-sheet-reviewer\">\n    <div class=\"reviewer-header\">\n      <h2>Face Sheet Review & Approval</h2>\n      <p class=\"subtitle\">{{ pendingFaceSheets.length }} pending face sheets requiring your attention</p>\n    </div>\n\n    <div v-if=\"pendingFaceSheets.length === 0\" class=\"no-pending\">\n      <span class=\"check-icon\">‚úÖ</span>\n      <p>No face sheets pending review</p>\n    </div>\n\n    <div v-else class=\"face-sheets-list\">\n      <div\n        v-for=\"fs in pendingFaceSheets\"\n        :key=\"fs.id\"\n        class=\"face-sheet-card\"\n        :class=\"{ expanded: expandedId === fs.id }\"\n      >\n        <div class=\"card-header\" @click=\"toggleExpand(fs.id)\">\n          <div class=\"patient-info\">\n            <div class=\"patient-name\">{{ fs.patient_first_name }} {{ fs.patient_last_name }}</div>\n            <div class=\"patient-dob\">DOB: {{ formatDate(fs.patient_dob) }}</div>\n          </div>\n\n          <div class=\"confidence-section\">\n            <span :class=\"['confidence-score', getConfidenceClass(fs.overall_confidence_score)]\">\n              {{ fs.overall_confidence_score }}%\n            </span>\n            <span class=\"chevron\">{{ expandedId === fs.id ? '‚ñº' : '‚ñ∂' }}</span>\n          </div>\n        </div>\n\n        <div v-if=\"expandedId === fs.id\" class=\"card-expanded\">\n          <div class=\"field-grid\">\n            <div class=\"field-row\">\n              <label>Payer:</label>\n              <span>{{ fs.primary_payer_name }}</span>\n            </div>\n            <div class=\"field-row\">\n              <label>Plan Type:</label>\n              <span>{{ fs.plan_type }}</span>\n            </div>\n            <div class=\"field-row\">\n              <label>Member ID:</label>\n              <span class=\"mono\">{{ fs.member_id }}</span>\n            </div>\n            <div class=\"field-row\">\n              <label>Group Number:</label>\n              <span class=\"mono\">{{ fs.group_number || '‚Äî' }}</span>\n            </div>\n            <div v-if=\"fs.subscriber_name\" class=\"field-row\">\n              <label>Subscriber:</label>\n              <span>{{ fs.subscriber_name }}</span>\n            </div>\n            <div v-if=\"fs.subscriber_relationship\" class=\"field-row\">\n              <label>Relationship:</label>\n              <span>{{ fs.subscriber_relationship }}</span>\n            </div>\n          </div>\n\n          <div v-if=\"fs.face_sheet_fields\" class=\"field-confidence\">\n            <h4>Field Confidence Scores:</h4>\n            <div\n              v-for=\"field in fs.face_sheet_fields\"\n              :key=\"field.id\"\n              class=\"field-confidence-item\"\n              :class=\"{ uncertain: field.is_uncertain }\"\n            >\n              <span class=\"field-name\">{{ formatFieldName(field.field_name) }}</span>\n              <span :class=\"['field-score', getConfidenceClass(field.field_confidence)]\">\n                {{ field.field_confidence }}%\n              </span>\n              <span v-if=\"field.is_uncertain\" class=\"uncertain-badge\">Uncertain</span>\n            </div>\n          </div>\n\n          <div class=\"source-info\">\n            <h4>Source: {{ fs.source_type }}</h4>\n            <p class=\"extraction-method\">{{ fs.extraction_method }}</p>\n          </div>\n\n          <div class=\"card-actions\">\n            <button @click=\"approveFaceSheet(fs.id)\" class=\"approve-btn\">Approve</button>\n            <button @click=\"requestCorrections(fs.id)\" class=\"correct-btn\">Request Corrections</button>\n            <button @click=\"sendToAIRecovery(fs.id)\" class=\"recovery-btn\">Send to AI for Recovery</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"approvalsSummary.length > 0\" class=\"approvals-summary\">\n      <h3>Recent Approvals</h3>\n      <div class=\"approval-items\">\n        <div v-for=\"approval in approvalsSummary\" :key=\"approval.id\" class=\"approval-item\">\n          <span class=\"check-mark\">‚úì</span>\n          <span class=\"approval-text\">{{ approval.patient_name }} approved by {{ approval.approved_by }}</span>\n          <span class=\"approval-time\">{{ formatTime(approval.approved_at) }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst supabase = useSupabaseClient()\nconst { useFaceSheet } = useCurrentInstance()?.appContext?.config?.globalProperties || {}\n\nconst pendingFaceSheets = ref<any[]>([])\nconst approvalsSummary = ref<any[]>([])\nconst expandedId = ref<string | null>(null)\n\nconst formatDate = (dateStr: string) => {\n  return new Date(dateStr).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })\n}\n\nconst formatTime = (timestamp: string) => {\n  const now = new Date()\n  const then = new Date(timestamp)\n  const diffMs = now.getTime() - then.getTime()\n  const diffMins = Math.floor(diffMs / 60000)\n\n  if (diffMins < 60) return `${diffMins}m ago`\n  if (diffMins < 1440) return `${Math.floor(diffMins / 60)}h ago`\n  return then.toLocaleDateString()\n}\n\nconst formatFieldName = (name: string) => {\n  return name\n    .split('_')\n    .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(' ')\n}\n\nconst getConfidenceClass = (score: number) => {\n  if (score >= 90) return 'high'\n  if (score >= 70) return 'medium'\n  return 'low'\n}\n\nconst toggleExpand = (id: string) => {\n  expandedId.value = expandedId.value === id ? null : id\n}\n\nconst loadPendingFaceSheets = async () => {\n  const { data, error } = await supabase\n    .from('face_sheets')\n    .select(`\n      *,\n      face_sheet_fields (*)\n    `)\n    .eq('is_approved', false)\n    .order('overall_confidence_score', { ascending: true })\n    .limit(10)\n\n  if (error) {\n    console.error('Error loading face sheets:', error)\n    return\n  }\n\n  pendingFaceSheets.value = data || []\n}\n\nconst loadRecentApprovals = async () => {\n  const { data, error } = await supabase\n    .from('face_sheets')\n    .select('id, patient_first_name, patient_last_name, approved_by, approved_at')\n    .eq('is_approved', true)\n    .order('approved_at', { ascending: false })\n    .limit(5)\n\n  if (error) {\n    console.error('Error loading approvals:', error)\n    return\n  }\n\n  approvalsSummary.value = (data || []).map(fs => ({\n    id: fs.id,\n    patient_name: `${fs.patient_first_name} ${fs.patient_last_name}`,\n    approved_by: fs.approved_by,\n    approved_at: fs.approved_at\n  }))\n}\n\nconst approveFaceSheet = async (faceSheetId: string) => {\n  const { error } = await supabase\n    .from('face_sheets')\n    .update({\n      is_approved: true,\n      approved_at: new Date().toISOString(),\n      approved_by: 'founder'\n    })\n    .eq('id', faceSheetId)\n\n  if (error) {\n    console.error('Error approving face sheet:', error)\n    return\n  }\n\n  await loadPendingFaceSheets()\n  await loadRecentApprovals()\n  expandedId.value = null\n}\n\nconst requestCorrections = (faceSheetId: string) => {\n  console.log('Request corrections for:', faceSheetId)\n}\n\nconst sendToAIRecovery = (faceSheetId: string) => {\n  console.log('Send to AI recovery:', faceSheetId)\n}\n\nonMounted(() => {\n  loadPendingFaceSheets()\n  loadRecentApprovals()\n\n  setInterval(() => {\n    loadPendingFaceSheets()\n  }, 30000)\n})\n</script>\n\n<style scoped>\n.face-sheet-reviewer {\n  background: white;\n  border-radius: 8px;\n  padding: 24px;\n}\n\n.reviewer-header {\n  margin-bottom: 24px;\n}\n\n.reviewer-header h2 {\n  font-size: 24px;\n  font-weight: 700;\n  color: #111827;\n  margin: 0 0 8px 0;\n}\n\n.subtitle {\n  font-size: 14px;\n  color: #6b7280;\n  margin: 0;\n}\n\n.no-pending {\n  text-align: center;\n  padding: 60px;\n  color: #6b7280;\n}\n\n.check-icon {\n  font-size: 48px;\n  display: block;\n  margin-bottom: 12px;\n}\n\n.face-sheets-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-bottom: 24px;\n}\n\n.face-sheet-card {\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  overflow: hidden;\n  transition: all 0.2s;\n}\n\n.face-sheet-card:hover {\n  border-color: #3b82f6;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  cursor: pointer;\n  background: #f9fafb;\n  transition: background 0.2s;\n}\n\n.card-header:hover {\n  background: #f3f4f6;\n}\n\n.patient-info {\n  flex: 1;\n}\n\n.patient-name {\n  font-size: 16px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.patient-dob {\n  font-size: 13px;\n  color: #6b7280;\n  margin-top: 4px;\n}\n\n.confidence-section {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.confidence-score {\n  padding: 6px 12px;\n  border-radius: 12px;\n  font-size: 14px;\n  font-weight: 700;\n}\n\n.confidence-score.high {\n  background: #d1fae5;\n  color: #065f46;\n}\n\n.confidence-score.medium {\n  background: #fef3c7;\n  color: #92400e;\n}\n\n.confidence-score.low {\n  background: #fee2e2;\n  color: #991b1b;\n}\n\n.chevron {\n  color: #6b7280;\n  font-size: 12px;\n}\n\n.card-expanded {\n  padding: 20px;\n  border-top: 1px solid #e5e7eb;\n  background: #f9fafb;\n}\n\n.field-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 16px;\n  margin-bottom: 20px;\n}\n\n.field-row {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.field-row label {\n  font-size: 12px;\n  font-weight: 600;\n  color: #6b7280;\n  text-transform: uppercase;\n}\n\n.field-row span {\n  font-size: 14px;\n  color: #111827;\n}\n\n.mono {\n  font-family: 'Courier New', monospace;\n  background: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 13px;\n}\n\n.field-confidence {\n  margin: 20px 0;\n  padding: 16px;\n  background: white;\n  border-radius: 6px;\n}\n\n.field-confidence h4 {\n  font-size: 13px;\n  font-weight: 600;\n  color: #374151;\n  margin: 0 0 12px 0;\n}\n\n.field-confidence-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n  border-bottom: 1px solid #f3f4f6;\n  font-size: 13px;\n}\n\n.field-confidence-item.uncertain {\n  background: #fffbeb;\n  padding: 8px;\n  margin-bottom: 8px;\n  border-radius: 4px;\n}\n\n.field-name {\n  color: #374151;\n  font-weight: 500;\n}\n\n.field-score {\n  padding: 2px 8px;\n  border-radius: 4px;\n  font-weight: 600;\n  font-size: 12px;\n}\n\n.field-score.high {\n  background: #d1fae5;\n  color: #065f46;\n}\n\n.field-score.medium {\n  background: #fef3c7;\n  color: #92400e;\n}\n\n.field-score.low {\n  background: #fee2e2;\n  color: #991b1b;\n}\n\n.uncertain-badge {\n  padding: 2px 8px;\n  background: #f59e0b;\n  color: white;\n  border-radius: 4px;\n  font-size: 11px;\n  font-weight: 600;\n}\n\n.source-info {\n  margin: 20px 0;\n  padding: 12px;\n  background: white;\n  border-radius: 6px;\n}\n\n.source-info h4 {\n  font-size: 13px;\n  font-weight: 600;\n  color: #374151;\n  margin: 0 0 4px 0;\n}\n\n.extraction-method {\n  font-size: 12px;\n  color: #6b7280;\n  margin: 0;\n}\n\n.card-actions {\n  display: flex;\n  gap: 8px;\n  margin-top: 16px;\n  padding-top: 16px;\n  border-top: 1px solid #e5e7eb;\n}\n\n.approve-btn,\n.correct-btn,\n.recovery-btn {\n  flex: 1;\n  padding: 10px;\n  border: none;\n  border-radius: 6px;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.approve-btn {\n  background: #10b981;\n  color: white;\n}\n\n.approve-btn:hover {\n  background: #059669;\n}\n\n.correct-btn {\n  background: #3b82f6;\n  color: white;\n}\n\n.correct-btn:hover {\n  background: #2563eb;\n}\n\n.recovery-btn {\n  background: #8b5cf6;\n  color: white;\n}\n\n.recovery-btn:hover {\n  background: #7c3aed;\n}\n\n.approvals-summary {\n  padding: 16px;\n  background: #f0fdf4;\n  border-radius: 8px;\n}\n\n.approvals-summary h3 {\n  font-size: 14px;\n  font-weight: 600;\n  color: #065f46;\n  margin: 0 0 12px 0;\n}\n\n.approval-items {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.approval-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 13px;\n  color: #065f46;\n}\n\n.check-mark {\n  color: #10b981;\n  font-weight: 700;\n}\n\n.approval-text {\n  flex: 1;\n}\n\n.approval-time {\n  color: #6b7280;\n  font-size: 12px;\n}\n</style>\n","export const useEndOfDayReconciliation = () => {\n  const supabase = useSupabaseClient()\n\n  const generateEndOfDayReport = async (reconciliationDate: Date = new Date()) => {\n    const dateStr = reconciliationDate.toISOString().split('T')[0]\n    const startOfDay = new Date(reconciliationDate)\n    startOfDay.setHours(0, 0, 0, 0)\n    const endOfDay = new Date(reconciliationDate)\n    endOfDay.setHours(23, 59, 59, 999)\n\n    const [\n      billableEncounters,\n      faceSheets,\n      faceSheetsApproved,\n      claimsSubmitted,\n      claimsInProgress,\n      hardBreaches,\n      criticalItems,\n      unlinkedCalls,\n      blockingDocs\n    ] = await Promise.all([\n      countBillableEncounters(startOfDay, endOfDay),\n      countFaceSheets(startOfDay, endOfDay),\n      countApprovedFaceSheets(startOfDay, endOfDay),\n      countSubmittedClaims(startOfDay, endOfDay),\n      countInProgressClaims(),\n      countHardSLABreaches(),\n      countUnresolvedCriticalItems(),\n      countUnlinkedCalls(startOfDay, endOfDay),\n      countBlockingDocuments()\n    ])\n\n    const allClear =\n      hardBreaches === 0 &&\n      criticalItems === 0 &&\n      unlinkedCalls === 0 &&\n      blockingDocs === 0\n\n    const { data: reconciliation, error } = await supabase\n      .from('end_of_day_reconciliation')\n      .insert({\n        reconciliation_date: dateStr,\n        total_billable_encounters: billableEncounters,\n        total_face_sheets_created: faceSheets,\n        total_face_sheets_approved: faceSheetsApproved,\n        total_face_sheets_pending: faceSheets - faceSheetsApproved,\n        total_claims_submitted: claimsSubmitted,\n        total_claims_in_progress: claimsInProgress,\n        missed_deadlines: hardBreaches,\n        unresolved_critical_items: criticalItems,\n        unlinked_calls: unlinkedCalls,\n        blocking_documents: blockingDocs,\n        all_clear: allClear,\n        reconciliation_status: 'pending'\n      })\n      .select()\n      .single()\n\n    if (error) throw error\n\n    return {\n      reconciliationId: reconciliation.id,\n      summary: {\n        allClear,\n        billableEncounters,\n        faceSheetStats: {\n          created: faceSheets,\n          approved: faceSheetsApproved,\n          pending: faceSheets - faceSheetsApproved\n        },\n        claimStats: {\n          submitted: claimsSubmitted,\n          inProgress: claimsInProgress\n        },\n        issues: {\n          hardBreaches,\n          criticalItems,\n          unlinkedCalls,\n          blockingDocuments: blockingDocs\n        }\n      },\n      recommendation: allClear ? 'All clear. You can close the day.' : 'Review flagged items before closing.'\n    }\n  }\n\n  const countBillableEncounters = async (startDate: Date, endDate: Date) => {\n    const { count, error } = await supabase\n      .from('queue_billing')\n      .select('*', { count: 'exact' })\n      .eq('billing_type', 'epcr_complete')\n      .gte('entered_queue_at', startDate.toISOString())\n      .lte('entered_queue_at', endDate.toISOString())\n\n    if (error) throw error\n    return count || 0\n  }\n\n  const countFaceSheets = async (startDate: Date, endDate: Date) => {\n    const { count, error } = await supabase\n      .from('face_sheets')\n      .select('*', { count: 'exact' })\n      .gte('created_at', startDate.toISOString())\n      .lte('created_at', endDate.toISOString())\n\n    if (error) throw error\n    return count || 0\n  }\n\n  const countApprovedFaceSheets = async (startDate: Date, endDate: Date) => {\n    const { count, error } = await supabase\n      .from('face_sheets')\n      .select('*', { count: 'exact' })\n      .eq('is_approved', true)\n      .gte('approved_at', startDate.toISOString())\n      .lte('approved_at', endDate.toISOString())\n\n    if (error) throw error\n    return count || 0\n  }\n\n  const countSubmittedClaims = async (startDate: Date, endDate: Date) => {\n    const { count, error } = await supabase\n      .from('queue_billing')\n      .select('*', { count: 'exact' })\n      .eq('queue_state', 'submitted')\n      .gte('entered_queue_at', startDate.toISOString())\n      .lte('entered_queue_at', endDate.toISOString())\n\n    if (error) throw error\n    return count || 0\n  }\n\n  const countInProgressClaims = async () => {\n    const { count, error } = await supabase\n      .from('queue_billing')\n      .select('*', { count: 'exact' })\n      .eq('queue_state', 'in_progress')\n\n    if (error) throw error\n    return count || 0\n  }\n\n  const countHardSLABreaches = async () => {\n    const { count, error } = await supabase\n      .from('queue_item_sla_tracking')\n      .select('*', { count: 'exact' })\n      .eq('hard_breach_triggered', true)\n      .eq('hard_breach_acknowledged', false)\n\n    if (error) throw error\n    return count || 0\n  }\n\n  const countUnresolvedCriticalItems = async () => {\n    const { count, error } = await supabase\n      .from('priority_scores')\n      .select('*', { count: 'exact' })\n      .eq('is_critical', true)\n\n    if (error) throw error\n    return count || 0\n  }\n\n  const countUnlinkedCalls = async (startDate: Date, endDate: Date) => {\n    const { count, error } = await supabase\n      .from('active_calls')\n      .select('*', { count: 'exact' })\n      .is('linked_claim_id', null)\n      .is('linked_invoice_id', null)\n      .gte('created_at', startDate.toISOString())\n      .lte('created_at', endDate.toISOString())\n\n    if (error) throw error\n    return count || 0\n  }\n\n  const countBlockingDocuments = async () => {\n    const { count, error } = await supabase\n      .from('queue_documents')\n      .select('*', { count: 'exact' })\n      .eq('blocking_workflow', true)\n\n    if (error) throw error\n    return count || 0\n  }\n\n  const reviewReconciliation = async (reconciliationId: string, userId: string, notes: string = '') => {\n    const { error } = await supabase\n      .from('end_of_day_reconciliation')\n      .update({\n        reconciliation_status: 'reviewed',\n        reviewed_by: userId,\n        reviewed_at: new Date().toISOString(),\n        notes: notes\n      })\n      .eq('id', reconciliationId)\n\n    if (error) throw error\n  }\n\n  const closeDay = async (reconciliationId: string, userId: string) => {\n    const { error } = await supabase\n      .from('end_of_day_reconciliation')\n      .update({\n        reconciliation_status: 'closed',\n        reviewed_by: userId,\n        reviewed_at: new Date().toISOString()\n      })\n      .eq('id', reconciliationId)\n\n    if (error) throw error\n  }\n\n  const getTodaysReconciliation = async () => {\n    const today = new Date()\n    const dateStr = today.toISOString().split('T')[0]\n\n    const { data, error } = await supabase\n      .from('end_of_day_reconciliation')\n      .select('*')\n      .eq('reconciliation_date', dateStr)\n      .maybeSingle()\n\n    if (error) throw error\n    return data\n  }\n\n  return {\n    generateEndOfDayReport,\n    reviewReconciliation,\n    closeDay,\n    getTodaysReconciliation,\n    countBillableEncounters,\n    countFaceSheets,\n    countApprovedFaceSheets,\n    countSubmittedClaims,\n    countInProgressClaims,\n    countHardSLABreaches,\n    countUnresolvedCriticalItems,\n    countUnlinkedCalls,\n    countBlockingDocuments\n  }\n}\n","<template>\n  <div class=\"reconciliation-container\">\n    <div class=\"reconciliation-header\">\n      <h2>End of Day Reconciliation</h2>\n      <p class=\"timestamp\">{{ formatDate(new Date()) }}</p>\n    </div>\n\n    <div v-if=\"loading\" class=\"loading\">Generating reconciliation...</div>\n\n    <div v-else class=\"reconciliation-content\">\n      <div v-if=\"reconciliation\" class=\"reconciliation-summary\">\n        <div :class=\"['all-clear-banner', { cleared: reconciliation.all_clear }]\">\n          <span v-if=\"reconciliation.all_clear\" class=\"check-icon\">‚úÖ</span>\n          <span v-else class=\"warning-icon\">‚ö†Ô∏è</span>\n          <div class=\"banner-text\">\n            <h3>{{ reconciliation.all_clear ? 'All Clear!' : 'Items Requiring Attention' }}</h3>\n            <p>\n              {{\n                reconciliation.all_clear\n                  ? 'You can safely close the day.'\n                  : `${reconciliation.missed_deadlines + reconciliation.unresolved_critical_items} items need review.`\n              }}\n            </p>\n          </div>\n        </div>\n\n        <div class=\"metrics-grid\">\n          <div class=\"metric-card\">\n            <span class=\"metric-icon\">üìã</span>\n            <span class=\"metric-label\">Billable Encounters</span>\n            <span class=\"metric-value\">{{ reconciliation.total_billable_encounters }}</span>\n          </div>\n\n          <div class=\"metric-card\">\n            <span class=\"metric-icon\">üë§</span>\n            <span class=\"metric-label\">Face Sheets Created</span>\n            <span class=\"metric-value\">{{ reconciliation.total_face_sheets_created }}</span>\n          </div>\n\n          <div class=\"metric-card\">\n            <span class=\"metric-icon\">‚úì</span>\n            <span class=\"metric-label\">Face Sheets Approved</span>\n            <span class=\"metric-value\">{{ reconciliation.total_face_sheets_approved }}</span>\n          </div>\n\n          <div class=\"metric-card\">\n            <span class=\"metric-icon\">‚è≥</span>\n            <span class=\"metric-label\">Face Sheets Pending</span>\n            <span class=\"metric-value\">{{ reconciliation.total_face_sheets_pending }}</span>\n          </div>\n\n          <div class=\"metric-card\">\n            <span class=\"metric-icon\">üì§</span>\n            <span class=\"metric-label\">Claims Submitted</span>\n            <span class=\"metric-value\">{{ reconciliation.total_claims_submitted }}</span>\n          </div>\n\n          <div class=\"metric-card\">\n            <span class=\"metric-icon\">‚åõ</span>\n            <span class=\"metric-label\">Claims In Progress</span>\n            <span class=\"metric-value\">{{ reconciliation.total_claims_in_progress }}</span>\n          </div>\n        </div>\n\n        <div class=\"issues-section\">\n          <h3>Issues Requiring Attention</h3>\n\n          <div v-if=\"reconciliation.missed_deadlines > 0\" class=\"issue-item critical\">\n            <span class=\"issue-icon\">üö®</span>\n            <div class=\"issue-content\">\n              <h4>Hard SLA Breaches</h4>\n              <p>{{ reconciliation.missed_deadlines }} items have missed hard deadlines</p>\n            </div>\n            <button @click=\"viewHardBreaches\" class=\"view-btn\">View</button>\n          </div>\n\n          <div v-if=\"reconciliation.unresolved_critical_items > 0\" class=\"issue-item warning\">\n            <span class=\"issue-icon\">‚ö†Ô∏è</span>\n            <div class=\"issue-content\">\n              <h4>Unresolved Critical Items</h4>\n              <p>{{ reconciliation.unresolved_critical_items }} critical items need resolution</p>\n            </div>\n            <button @click=\"viewCriticalItems\" class=\"view-btn\">View</button>\n          </div>\n\n          <div v-if=\"reconciliation.unlinked_calls > 0\" class=\"issue-item\">\n            <span class=\"issue-icon\">üìû</span>\n            <div class=\"issue-content\">\n              <h4>Unlinked Calls</h4>\n              <p>{{ reconciliation.unlinked_calls }} calls not linked to billing records</p>\n            </div>\n            <button @click=\"viewUnlinkedCalls\" class=\"view-btn\">View</button>\n          </div>\n\n          <div v-if=\"reconciliation.blocking_documents > 0\" class=\"issue-item\">\n            <span class=\"issue-icon\">üìÑ</span>\n            <div class=\"issue-content\">\n              <h4>Blocking Documents</h4>\n              <p>{{ reconciliation.blocking_documents }} documents are blocking billing</p>\n            </div>\n            <button @click=\"viewBlockingDocs\" class=\"view-btn\">View</button>\n          </div>\n\n          <div v-if=\"allIssuesResolved\" class=\"no-issues\">\n            <span>‚úÖ All issues resolved</span>\n          </div>\n        </div>\n\n        <div class=\"action-buttons\">\n          <button v-if=\"!reconciliation.all_clear\" @click=\"reviewAgain\" class=\"review-btn\">\n            Review Issues\n          </button>\n          <button @click=\"closeDay\" class=\"close-btn\" :disabled=\"!reconciliation.all_clear\">\n            {{ reconciliation.all_clear ? 'Close Day' : 'Cannot close yet' }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { generateEndOfDayReport } = useEndOfDayReconciliation()\n\nconst reconciliation = ref<any>(null)\nconst loading = ref(true)\n\nconst formatDate = (date: Date) => {\n  return date.toLocaleDateString('en-US', {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  })\n}\n\nconst allIssuesResolved = computed(() => {\n  if (!reconciliation.value) return false\n  return (\n    reconciliation.value.missed_deadlines === 0 &&\n    reconciliation.value.unresolved_critical_items === 0 &&\n    reconciliation.value.unlinked_calls === 0 &&\n    reconciliation.value.blocking_documents === 0\n  )\n})\n\nconst generateReconciliation = async () => {\n  try {\n    loading.value = true\n    const result = await generateEndOfDayReport()\n    reconciliation.value = result.summary\n  } catch (error) {\n    console.error('Error generating reconciliation:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst viewHardBreaches = () => {\n  console.log('View hard breaches')\n}\n\nconst viewCriticalItems = () => {\n  console.log('View critical items')\n}\n\nconst viewUnlinkedCalls = () => {\n  console.log('View unlinked calls')\n}\n\nconst viewBlockingDocs = () => {\n  console.log('View blocking documents')\n}\n\nconst reviewAgain = () => {\n  generateReconciliation()\n}\n\nconst closeDay = async () => {\n  console.log('Closing day')\n}\n\nonMounted(() => {\n  generateReconciliation()\n})\n</script>\n\n<style scoped>\n.reconciliation-container {\n  background: white;\n  border-radius: 8px;\n  padding: 24px;\n  max-width: 1000px;\n}\n\n.reconciliation-header {\n  margin-bottom: 24px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.reconciliation-header h2 {\n  font-size: 28px;\n  font-weight: 700;\n  color: #111827;\n  margin: 0 0 8px 0;\n}\n\n.timestamp {\n  font-size: 14px;\n  color: #6b7280;\n  margin: 0;\n}\n\n.loading {\n  text-align: center;\n  padding: 60px;\n  color: #6b7280;\n  font-size: 16px;\n}\n\n.all-clear-banner {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 20px;\n  background: #fef3c7;\n  border-left: 4px solid #f59e0b;\n  border-radius: 8px;\n  margin-bottom: 24px;\n}\n\n.all-clear-banner.cleared {\n  background: #d1fae5;\n  border-left-color: #10b981;\n}\n\n.check-icon,\n.warning-icon {\n  font-size: 32px;\n}\n\n.banner-text {\n  flex: 1;\n}\n\n.banner-text h3 {\n  font-size: 18px;\n  font-weight: 700;\n  color: #111827;\n  margin: 0 0 4px 0;\n}\n\n.banner-text p {\n  font-size: 14px;\n  color: #6b7280;\n  margin: 0;\n}\n\n.all-clear-banner.cleared h3 {\n  color: #065f46;\n}\n\n.all-clear-banner.cleared p {\n  color: #065f46;\n}\n\n.metrics-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 12px;\n  margin-bottom: 24px;\n}\n\n.metric-card {\n  padding: 16px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n}\n\n.metric-icon {\n  font-size: 24px;\n}\n\n.metric-label {\n  font-size: 12px;\n  color: #6b7280;\n  text-align: center;\n  font-weight: 500;\n}\n\n.metric-value {\n  font-size: 24px;\n  font-weight: 700;\n  color: #111827;\n}\n\n.issues-section {\n  margin: 24px 0;\n}\n\n.issues-section h3 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 16px 0;\n}\n\n.issue-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 16px;\n  background: #f9fafb;\n  border-left: 4px solid #e5e7eb;\n  border-radius: 6px;\n  margin-bottom: 12px;\n}\n\n.issue-item.critical {\n  background: #fee2e2;\n  border-left-color: #ef4444;\n}\n\n.issue-item.warning {\n  background: #fffbeb;\n  border-left-color: #f59e0b;\n}\n\n.issue-icon {\n  font-size: 20px;\n}\n\n.issue-content {\n  flex: 1;\n}\n\n.issue-content h4 {\n  font-size: 14px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 4px 0;\n}\n\n.issue-content p {\n  font-size: 13px;\n  color: #6b7280;\n  margin: 0;\n}\n\n.view-btn {\n  padding: 6px 16px;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  font-size: 13px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.view-btn:hover {\n  border-color: #3b82f6;\n  color: #3b82f6;\n}\n\n.no-issues {\n  text-align: center;\n  padding: 32px;\n  color: #10b981;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.action-buttons {\n  display: flex;\n  gap: 12px;\n  margin-top: 24px;\n  padding-top: 24px;\n  border-top: 1px solid #e5e7eb;\n}\n\n.review-btn,\n.close-btn {\n  flex: 1;\n  padding: 12px;\n  border: none;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.review-btn {\n  background: #3b82f6;\n  color: white;\n}\n\n.review-btn:hover {\n  background: #2563eb;\n}\n\n.close-btn {\n  background: #10b981;\n  color: white;\n}\n\n.close-btn:hover:not(:disabled) {\n  background: #059669;\n}\n\n.close-btn:disabled {\n  background: #d1d5db;\n  color: #9ca3af;\n  cursor: not-allowed;\n}\n</style>\n","<template>\n  <div class=\"billing-workspace\">\n    <div class=\"workspace-header\">\n      <div class=\"header-content\">\n        <h1>Founder Billing Workspace</h1>\n        <p class=\"workspace-subtitle\">Private billing command center for communications and documents</p>\n      </div>\n      <div class=\"workspace-stats\">\n        <div class=\"stat-box\">\n          <span class=\"stat-value\">{{ dashboard.unreadEmails }}</span>\n          <span class=\"stat-label\">Unread Emails</span>\n        </div>\n        <div class=\"stat-box\">\n          <span class=\"stat-value\">{{ dashboard.escalatedCalls }}</span>\n          <span class=\"stat-label\">Escalated Calls</span>\n        </div>\n        <div class=\"stat-box\">\n          <span class=\"stat-value\">{{ dashboard.pendingFaxes }}</span>\n          <span class=\"stat-label\">Pending Faxes</span>\n        </div>\n        <div class=\"stat-box\">\n          <span class=\"stat-value\">{{ dashboard.draftDocuments }}</span>\n          <span class=\"stat-label\">Draft Documents</span>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"workspace-tabs\">\n      <button\n        v-for=\"tab in tabs\"\n        :key=\"tab.id\"\n        @click=\"activeTab = tab.id\"\n        :class=\"['tab-button', { active: activeTab === tab.id }]\"\n      >\n        <span class=\"tab-icon\">{{ tab.icon }}</span>\n        <span class=\"tab-name\">{{ tab.name }}</span>\n        <span v-if=\"tab.badge > 0\" class=\"tab-badge\">{{ tab.badge }}</span>\n      </button>\n    </div>\n\n    <SystemFailoverStatus />\n    <PhoneSystem />\n\n    <div class=\"workspace-content\">\n      <div v-show=\"activeTab === 'overview'\" class=\"tab-content\">\n        <div class=\"overview-section\">\n          <h2>Workspace Overview</h2>\n          <div class=\"overview-grid\">\n            <div class=\"overview-card\">\n              <div class=\"card-icon\">üìß</div>\n              <div class=\"card-content\">\n                <h3>Email Communications</h3>\n                <p>{{ dashboard.totalEmails }} total emails</p>\n                <p>{{ dashboard.unreadEmails }} unread</p>\n              </div>\n            </div>\n            <div class=\"overview-card\">\n              <div class=\"card-icon\">üìû</div>\n              <div class=\"card-content\">\n                <h3>AI Phone Calls</h3>\n                <p>{{ dashboard.totalCalls }} total calls</p>\n                <p>{{ dashboard.pendingCalls }} pending review</p>\n                <p>{{ dashboard.escalatedCalls }} escalated</p>\n              </div>\n            </div>\n            <div class=\"overview-card\">\n              <div class=\"card-icon\">üì†</div>\n              <div class=\"card-content\">\n                <h3>Fax Communications</h3>\n                <p>{{ dashboard.totalFaxes }} total faxes</p>\n                <p>{{ dashboard.pendingFaxes }} pending</p>\n              </div>\n            </div>\n            <div class=\"overview-card\">\n              <div class=\"card-icon\">üìÑ</div>\n              <div class=\"card-content\">\n                <h3>Documents</h3>\n                <p>{{ dashboard.totalDocuments }} total documents</p>\n                <p>{{ dashboard.draftDocuments }} drafts</p>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"recent-activity\">\n            <h3>Recent Activity</h3>\n            <div v-if=\"activityLog.length === 0\" class=\"no-activity\">\n              No recent activity\n            </div>\n            <div v-else class=\"activity-list\">\n              <div v-for=\"activity in activityLog\" :key=\"activity.id\" class=\"activity-item\">\n                <span class=\"activity-icon\">{{ getActivityIcon(activity.activity_type) }}</span>\n                <div class=\"activity-details\">\n                  <span class=\"activity-description\">{{ activity.activity_description }}</span>\n                  <span class=\"activity-time\">{{ formatDateTime(activity.created_at) }}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"workspace-info\">\n            <h3>About This Workspace</h3>\n            <div class=\"info-content\">\n              <p>This is a private, founder-only workspace for billing operations.</p>\n              <ul>\n                <li><strong>Email:</strong> Internal billing communications via Malibu</li>\n                <li><strong>AI Phone:</strong> Human-quality voice assistant for insurance calls</li>\n                <li><strong>Fax:</strong> Compliance and legacy payer requirements</li>\n                <li><strong>Documents:</strong> Cloud-based office suite with version control</li>\n              </ul>\n              <p class=\"security-note\">üîí All content is encrypted, audited, and immutable when finalized</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div v-show=\"activeTab === 'email'\" class=\"tab-content\">\n        <BillingEmailCenter />\n      </div>\n\n      <div v-show=\"activeTab === 'phone'\" class=\"tab-content\">\n        <AIPhoneAssistant />\n      </div>\n\n      <div v-show=\"activeTab === 'fax'\" class=\"tab-content\">\n        <BillingFaxCenter />\n      </div>\n\n      <div v-show=\"activeTab === 'documents'\" class=\"tab-content\">\n        <DocumentWorkspace />\n      </div>\n\n      <div v-show=\"activeTab === 'queues'\" class=\"tab-content\">\n        <QueueManagement />\n      </div>\n\n      <div v-show=\"activeTab === 'builders'\" class=\"tab-content\">\n        <WorkspaceBuilders />\n      </div>\n\n      <div v-show=\"activeTab === 'sla'\" class=\"tab-content\">\n        <div class=\"sla-dashboard\">\n          <h2>SLA Timers & Priority Scoring</h2>\n          <p class=\"subtitle\">Real-time SLA tracking across all queues with priority escalation</p>\n          <div class=\"sla-info\">\n            <p>SLA timers and priority scores are automatically calculated and updated in real-time.</p>\n            <p>Each queue item has a target response time, soft breach threshold, and hard breach threshold.</p>\n            <p>Hard SLA breaches require immediate acknowledgment and appear at the top of all queues.</p>\n          </div>\n        </div>\n      </div>\n\n      <div v-show=\"activeTab === 'facesheet'\" class=\"tab-content\">\n        <AIFaceSheetReviewer />\n      </div>\n\n      <div v-show=\"activeTab === 'approval'\" class=\"tab-content\">\n        <div class=\"approval-dashboard\">\n          <h2>One-Click Approvals</h2>\n          <p class=\"subtitle\">Review and approve AI decisions with minimal friction</p>\n          <div class=\"approval-info\">\n            <p>Confidence scoring determines approval workflow:</p>\n            <ul>\n              <li><strong>High (90-100%):</strong> Auto-approved, no action needed</li>\n              <li><strong>Medium (70-89%):</strong> One-click approval with uncertainty highlighted</li>\n              <li><strong>Low (&lt;70%):</strong> Blocked for AI recovery or human correction</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div v-show=\"activeTab === 'eod'\" class=\"tab-content\">\n        <EndOfDayReconciliation />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\ndefinePageMeta({\n  middleware: 'auth'\n})\n\nconst { getWorkspaceDashboard, getActivityLog } = useBillingWorkspace()\n\nconst activeTab = ref('overview')\nconst dashboard = ref({\n  totalEmails: 0,\n  unreadEmails: 0,\n  totalCalls: 0,\n  pendingCalls: 0,\n  escalatedCalls: 0,\n  totalFaxes: 0,\n  pendingFaxes: 0,\n  totalDocuments: 0,\n  draftDocuments: 0\n})\n\nconst activityLog = ref<any[]>([])\n\nconst tabs = computed(() => [\n  { id: 'overview', name: 'Overview', icon: 'üè†', badge: 0 },\n  { id: 'sla', name: 'SLA & Priority', icon: '‚è±Ô∏è', badge: 0 },\n  { id: 'facesheet', name: 'Face Sheets', icon: 'üë§', badge: 0 },\n  { id: 'approval', name: 'Approvals', icon: '‚úì', badge: 0 },\n  { id: 'queues', name: 'Queues', icon: 'üìã', badge: 0 },\n  { id: 'eod', name: 'End of Day', icon: 'üåô', badge: 0 },\n  { id: 'email', name: 'Email', icon: 'üìß', badge: dashboard.value.unreadEmails },\n  { id: 'phone', name: 'Phone', icon: 'üìû', badge: dashboard.value.escalatedCalls },\n  { id: 'fax', name: 'Fax', icon: 'üì†', badge: dashboard.value.pendingFaxes },\n  { id: 'documents', name: 'Documents', icon: 'üìÑ', badge: 0 },\n  { id: 'builders', name: 'Builders', icon: 'üî®', badge: 0 }\n])\n\nconst getActivityIcon = (type: string) => {\n  const icons: Record<string, string> = {\n    email_sent: 'üìß',\n    email_received: 'üì®',\n    call_made: 'üìû',\n    fax_sent: 'üì†',\n    document_created: 'üìÑ',\n    document_edited: '‚úèÔ∏è',\n    document_finalized: 'üîí'\n  }\n  return icons[type] || 'üìã'\n}\n\nconst formatDateTime = (date: string) => {\n  const d = new Date(date)\n  const now = new Date()\n  const diffMs = now.getTime() - d.getTime()\n  const diffMins = Math.floor(diffMs / 60000)\n\n  if (diffMins < 1) return 'Just now'\n  if (diffMins < 60) return `${diffMins}m ago`\n  if (diffMins < 1440) return `${Math.floor(diffMins / 60)}h ago`\n  return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n}\n\nonMounted(async () => {\n  dashboard.value = await getWorkspaceDashboard()\n  activityLog.value = await getActivityLog(10)\n})\n</script>\n\n<style scoped>\n.billing-workspace {\n  min-height: 100vh;\n  background: #f9fafb;\n  padding: 24px;\n}\n\n.workspace-header {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 32px;\n  margin-bottom: 24px;\n}\n\n.header-content {\n  margin-bottom: 24px;\n}\n\n.header-content h1 {\n  font-size: 32px;\n  font-weight: 700;\n  color: #111827;\n  margin: 0 0 8px 0;\n}\n\n.workspace-subtitle {\n  font-size: 16px;\n  color: #6b7280;\n  margin: 0;\n}\n\n.workspace-stats {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 16px;\n}\n\n.stat-box {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 16px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n}\n\n.stat-value {\n  font-size: 32px;\n  font-weight: 700;\n  color: #111827;\n  margin-bottom: 4px;\n}\n\n.stat-label {\n  font-size: 12px;\n  color: #6b7280;\n  text-align: center;\n}\n\n.workspace-tabs {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 24px;\n  overflow-x: auto;\n}\n\n.tab-button {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 500;\n  color: #6b7280;\n  cursor: pointer;\n  transition: all 0.2s;\n  white-space: nowrap;\n}\n\n.tab-button:hover {\n  border-color: #3b82f6;\n  color: #3b82f6;\n}\n\n.tab-button.active {\n  background: #3b82f6;\n  color: white;\n  border-color: #3b82f6;\n}\n\n.tab-icon {\n  font-size: 18px;\n}\n\n.tab-badge {\n  padding: 2px 6px;\n  background: #dc2626;\n  color: white;\n  border-radius: 10px;\n  font-size: 11px;\n  font-weight: 600;\n}\n\n.tab-button.active .tab-badge {\n  background: white;\n  color: #3b82f6;\n}\n\n.workspace-content {\n  background: white;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n}\n\n.tab-content {\n  padding: 24px;\n}\n\n.overview-section h2 {\n  font-size: 24px;\n  font-weight: 700;\n  color: #111827;\n  margin: 0 0 24px 0;\n}\n\n.overview-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 16px;\n  margin-bottom: 32px;\n}\n\n.overview-card {\n  display: flex;\n  gap: 16px;\n  padding: 20px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n}\n\n.card-icon {\n  font-size: 48px;\n}\n\n.card-content h3 {\n  font-size: 16px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 8px 0;\n}\n\n.card-content p {\n  font-size: 13px;\n  color: #6b7280;\n  margin: 0 0 4px 0;\n}\n\n.recent-activity {\n  margin-bottom: 32px;\n}\n\n.recent-activity h3 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 16px 0;\n}\n\n.no-activity {\n  padding: 40px;\n  text-align: center;\n  color: #6b7280;\n  font-size: 14px;\n}\n\n.activity-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.activity-item {\n  display: flex;\n  gap: 12px;\n  padding: 12px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n}\n\n.activity-icon {\n  font-size: 24px;\n}\n\n.activity-details {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.activity-description {\n  font-size: 14px;\n  color: #111827;\n}\n\n.activity-time {\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.workspace-info {\n  background: #eff6ff;\n  border: 1px solid #bfdbfe;\n  border-radius: 8px;\n  padding: 24px;\n}\n\n.workspace-info h3 {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 16px 0;\n}\n\n.info-content p {\n  margin: 0 0 12px 0;\n  color: #374151;\n  line-height: 1.6;\n}\n\n.info-content ul {\n  margin: 0 0 16px 0;\n  padding-left: 20px;\n}\n\n.info-content li {\n  margin-bottom: 8px;\n  color: #374151;\n  line-height: 1.6;\n}\n\n.info-content strong {\n  color: #111827;\n  font-weight: 600;\n}\n\n.security-note {\n  padding: 12px;\n  background: #fef3c7;\n  border: 1px solid #fde68a;\n  border-radius: 6px;\n  font-size: 13px;\n  color: #78350f;\n  margin: 0;\n}\n</style>\n"],"names":["_unref","_ssrRenderList","_ssrInterpolate","_ssrRenderClass","_ssrRenderAttrs","_mergeProps","_ssrRenderAttr","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrLooseEqual"],"mappings":"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"}
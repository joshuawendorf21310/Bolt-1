{"version":3,"file":"default-BVUnTX0g.js","sources":["../../../../composables/usePermissions.ts","../../../../layouts/default.vue"],"sourcesContent":["export const usePermissions = () => {\n  const { employee } = useAuth()\n\n  const hasPermission = (permission: string): boolean => {\n    if (!employee.value) return false\n\n    const credentials = employee.value.credentials || []\n    return credentials.includes(permission)\n  }\n\n  const hasRole = (roleName: string): boolean => {\n    if (!employee.value) return false\n\n    return employee.value.position?.toLowerCase().includes(roleName.toLowerCase())\n  }\n\n  const canAccessModule = (module: string): boolean => {\n    if (!employee.value) return false\n\n    const modulePermissions: Record<string, string[]> = {\n      cad: ['dispatcher', 'admin', 'supervisor'],\n      mdt: ['paramedic', 'emt', 'firefighter', 'admin', 'supervisor'],\n      epcr: ['paramedic', 'emt', 'admin', 'supervisor'],\n      transport: ['dispatcher', 'admin', 'supervisor'],\n      hems: ['pilot', 'flight_medic', 'admin', 'supervisor'],\n      fire: ['firefighter', 'fire_chief', 'admin', 'supervisor'],\n      scheduling: ['admin', 'supervisor', 'hr'],\n      crewlink: ['all'],\n      billing: ['billing', 'admin', 'finance'],\n      hr: ['hr', 'admin']\n    }\n\n    const allowedRoles = modulePermissions[module.toLowerCase()] || []\n\n    if (allowedRoles.includes('all')) return true\n\n    const position = employee.value.position?.toLowerCase() || ''\n    return allowedRoles.some(role => position.includes(role))\n  }\n\n  const isAdmin = (): boolean => {\n    return hasRole('admin')\n  }\n\n  const isSupervisor = (): boolean => {\n    return hasRole('supervisor') || isAdmin()\n  }\n\n  return {\n    hasPermission,\n    hasRole,\n    canAccessModule,\n    isAdmin,\n    isSupervisor\n  }\n}\n","<template>\n  <div class=\"app-layout\">\n    <header class=\"app-header\">\n      <div class=\"header-content\">\n        <div class=\"logo\" @click=\"navigateTo('/dashboard')\">\n          <span class=\"logo-text\">FUSION</span><span class=\"logo-accent\">EMS</span>\n          <span class=\"logo-quantum\">QUANTUM</span>\n        </div>\n\n        <nav class=\"nav-menu\">\n          <NuxtLink to=\"/dashboard\" class=\"nav-link\">\n            <span class=\"nav-icon\">üìä</span>\n            Dashboard\n          </NuxtLink>\n\n          <NuxtLink v-if=\"canAccessModule('cad')\" to=\"/cad\" class=\"nav-link\">\n            <span class=\"nav-icon\">üö®</span>\n            CAD\n          </NuxtLink>\n\n          <NuxtLink v-if=\"canAccessModule('mdt')\" to=\"/mdt\" class=\"nav-link\">\n            <span class=\"nav-icon\">üì±</span>\n            MDT\n          </NuxtLink>\n\n          <NuxtLink v-if=\"canAccessModule('epcr')\" to=\"/epcr\" class=\"nav-link\">\n            <span class=\"nav-icon\">üìã</span>\n            ePCR\n          </NuxtLink>\n\n          <NuxtLink v-if=\"canAccessModule('transport')\" to=\"/transport\" class=\"nav-link\">\n            <span class=\"nav-icon\">üöë</span>\n            Transport\n          </NuxtLink>\n\n          <NuxtLink v-if=\"canAccessModule('hems')\" to=\"/hems\" class=\"nav-link\">\n            <span class=\"nav-icon\">üöÅ</span>\n            HEMS\n          </NuxtLink>\n\n          <NuxtLink v-if=\"canAccessModule('fire')\" to=\"/fire\" class=\"nav-link\">\n            <span class=\"nav-icon\">üî•</span>\n            Fire\n          </NuxtLink>\n\n          <NuxtLink v-if=\"canAccessModule('scheduling')\" to=\"/scheduling\" class=\"nav-link\">\n            <span class=\"nav-icon\">üìÖ</span>\n            Schedule\n          </NuxtLink>\n\n          <NuxtLink v-if=\"canAccessModule('billing')\" to=\"/billing\" class=\"nav-link\">\n            <span class=\"nav-icon\">üí∞</span>\n            Billing\n          </NuxtLink>\n\n          <NuxtLink v-if=\"canAccessModule('hr')\" to=\"/hr\" class=\"nav-link\">\n            <span class=\"nav-icon\">üë•</span>\n            HR\n          </NuxtLink>\n        </nav>\n\n        <div class=\"header-actions\">\n          <div class=\"user-info\">\n            <span class=\"user-name\">{{ employee?.first_name }} {{ employee?.last_name }}</span>\n            <span class=\"user-role\">{{ employee?.position }}</span>\n          </div>\n          <button @click=\"handleSignOut\" class=\"btn btn-secondary btn-sm\">Sign Out</button>\n        </div>\n      </div>\n    </header>\n\n    <main class=\"app-main\">\n      <slot />\n    </main>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { signOut, employee } = useAuth()\nconst { canAccessModule } = usePermissions()\nconst router = useRouter()\n\nconst handleSignOut = async () => {\n  await signOut()\n  router.push('/login')\n}\n</script>\n\n<style scoped>\n.app-layout {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background: var(--color-dark-600);\n}\n\n.app-header {\n  background: var(--color-dark-400);\n  border-bottom: 2px solid var(--color-primary-500);\n  box-shadow: 0 4px 20px rgba(255, 107, 0, 0.1);\n  position: sticky;\n  top: 0;\n  z-index: 100;\n}\n\n.header-content {\n  max-width: 1920px;\n  margin: 0 auto;\n  padding: var(--spacing-4) var(--spacing-6);\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-6);\n}\n\n.logo {\n  display: flex;\n  align-items: baseline;\n  gap: 4px;\n  cursor: pointer;\n  transition: transform 0.2s ease;\n}\n\n.logo:hover {\n  transform: scale(1.05);\n}\n\n.logo-text {\n  font-family: 'Orbitron', sans-serif;\n  font-size: 1.25rem;\n  font-weight: 900;\n  color: #ffffff;\n  letter-spacing: 0.1em;\n}\n\n.logo-accent {\n  font-family: 'Orbitron', sans-serif;\n  font-size: 1.25rem;\n  font-weight: 900;\n  color: var(--color-primary-500);\n  letter-spacing: 0.1em;\n}\n\n.logo-quantum {\n  font-family: 'Orbitron', sans-serif;\n  font-size: 0.5rem;\n  font-weight: 600;\n  color: var(--color-error-500);\n  letter-spacing: 0.2em;\n  margin-left: var(--spacing-1);\n  align-self: flex-start;\n}\n\n.nav-menu {\n  display: flex;\n  gap: var(--spacing-1);\n  flex: 1;\n  flex-wrap: wrap;\n}\n\n.nav-link {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-2);\n  padding: var(--spacing-2) var(--spacing-4);\n  color: var(--color-gray-400);\n  text-decoration: none;\n  border-radius: var(--border-radius-md);\n  transition: all 0.2s ease;\n  font-weight: 500;\n  font-size: 0.875rem;\n  white-space: nowrap;\n}\n\n.nav-icon {\n  font-size: 1.125rem;\n}\n\n.nav-link:hover {\n  color: var(--color-primary-500);\n  background: rgba(255, 107, 0, 0.1);\n}\n\n.nav-link.router-link-active {\n  color: var(--color-primary-500);\n  background: rgba(255, 107, 0, 0.15);\n  border-bottom: 2px solid var(--color-primary-500);\n}\n\n.header-actions {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-4);\n}\n\n.user-info {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n}\n\n.user-name {\n  font-weight: 600;\n  color: #ffffff;\n  font-size: 0.875rem;\n}\n\n.user-role {\n  font-size: 0.75rem;\n  color: var(--color-gray-400);\n  text-transform: capitalize;\n}\n\n.app-main {\n  flex: 1;\n  overflow-y: auto;\n}\n\n@media (max-width: 1200px) {\n  .nav-menu {\n    display: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .header-content {\n    padding: var(--spacing-3) var(--spacing-4);\n    gap: var(--spacing-3);\n  }\n\n  .user-info {\n    display: none;\n  }\n}\n</style>\n"],"names":["_ssrRenderAttrs","_mergeProps","_push","_parent","_createVNode","_unref","_ssrInterpolate"],"mappings":"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"}